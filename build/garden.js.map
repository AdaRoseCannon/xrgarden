{"version":3,"file":"garden.js","sources":["../node_modules/three/examples/jsm/controls/OrbitControls.js","../node_modules/webxr-polyfill/build/webxr-polyfill.module.js","../node_modules/@tweenjs/tween.js/dist/tween.esm.js","../src/lib/scene.js","../node_modules/three/examples/jsm/webxr/VRButton.js","../node_modules/three/examples/jsm/loaders/GLTFLoader.js","../node_modules/three/examples/jsm/libs/motion-controllers.module.js","../node_modules/three/examples/jsm/webxr/XRControllerModelFactory.js","../src/lib/controllers/gamepad.js","../src/lib/controllers/locomotion/fade.js","../src/lib/controllers/controllers.js","../src/lib/flow.js","../src/lib/positions.js","../src/lib/meshes.js","../src/lib/audio.js","../node_modules/three/examples/jsm/libs/stats.module.js","../src/garden.js"],"sourcesContent":["import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\tvar twoPI = 2 * Math.PI;\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\n\t\t\tvar min = scope.minAzimuthAngle;\n\t\t\tvar max = scope.maxAzimuthAngle;\n\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\tif ( min < max ) {\n\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp, false );\n\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyOut( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseDown( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseMove( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseUp( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch ( mouseAction ) {\n\n\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.PAN:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove, false );\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'pointerdown', onPointerDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\n\n\t// make sure element can receive keys.\n\n\tif ( scope.domElement.tabIndex === - 1 ) {\n\n\t\tscope.domElement.tabIndex = 0;\n\n\t}\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n","/**\n * @license\n * webxr-polyfill\n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * cardboard-vr-display\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * webvr-polyfill-dpdb \n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * wglu-preserve-state\n * Copyright (c) 2016, Brandon Jones.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * @license\n * nosleep.js\n * Copyright (c) 2017, Rich Tibbett\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nconst _global = typeof global !== 'undefined' ? global :\n                typeof self !== 'undefined' ? self :\n                typeof window !== 'undefined' ? window : {};\n\nconst PRIVATE = Symbol('@@webxr-polyfill/EventTarget');\nclass EventTarget {\n  constructor() {\n    this[PRIVATE] = {\n      listeners: new Map(),\n    };\n  }\n  addEventListener(type, listener) {\n    if (typeof type !== 'string') { throw new Error('`type` must be a string'); }\n    if (typeof listener !== 'function') { throw new Error('`listener` must be a function'); }\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    typedListeners.push(listener);\n    this[PRIVATE].listeners.set(type, typedListeners);\n  }\n  removeEventListener(type, listener) {\n    if (typeof type !== 'string') { throw new Error('`type` must be a string'); }\n    if (typeof listener !== 'function') { throw new Error('`listener` must be a function'); }\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    for (let i = typedListeners.length; i >= 0; i--) {\n      if (typedListeners[i] === listener) {\n        typedListeners.pop();\n      }\n    }\n  }\n  dispatchEvent(type, event) {\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    const queue = [];\n    for (let i = 0; i < typedListeners.length; i++) {\n      queue[i] = typedListeners[i];\n    }\n    for (let listener of queue) {\n      listener(event);\n    }\n    if (typeof this[`on${type}`] === 'function') {\n      this[`on${type}`](event);\n    }\n  }\n}\n\nconst EPSILON = 0.000001;\nlet ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\n\n\nconst degree = Math.PI / 180;\n\nfunction create() {\n  let out = new ARRAY_TYPE(16);\n  if(ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\nfunction invert(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n  let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n\n\nfunction multiply(out, a, b) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n  let b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n  out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n  out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n  out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\nfunction fromRotationTranslation(out, q, v) {\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\nfunction getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n\nfunction getRotation(out, mat) {\n  let trace = mat[0] + mat[5] + mat[10];\n  let S = 0;\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if ((mat[0] > mat[5]) && (mat[0] > mat[10])) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n  return out;\n}\n\n\n\n\nfunction perspective(out, fovy, aspect, near, far) {\n  let f = 1.0 / Math.tan(fovy / 2), nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = (2 * far * near) * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n  return out;\n}\n\nfunction create$1() {\n  let out = new ARRAY_TYPE(3);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  return out;\n}\nfunction clone$1(a) {\n  var out = new ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\nfunction length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return Math.sqrt(x*x + y*y + z*z);\n}\nfunction fromValues$1(x, y, z) {\n  let out = new ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\nfunction copy$1(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\nfunction add$1(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\n\n\n\n\n\n\n\nfunction scale$1(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n\n\n\n\n\nfunction normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let len = x*x + y*y + z*z;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nfunction cross(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2];\n  let bx = b[0], by = b[1], bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n\n\n\n\n\nfunction transformQuat(out, a, q) {\n    let qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n    let x = a[0], y = a[1], z = a[2];\n    let uvx = qy * z - qz * y,\n        uvy = qz * x - qx * z,\n        uvz = qx * y - qy * x;\n    let uuvx = qy * uvz - qz * uvy,\n        uuvy = qz * uvx - qx * uvz,\n        uuvz = qx * uvy - qy * uvx;\n    let w2 = qw * 2;\n    uvx *= w2;\n    uvy *= w2;\n    uvz *= w2;\n    uuvx *= 2;\n    uuvy *= 2;\n    uuvz *= 2;\n    out[0] = x + uvx + uuvx;\n    out[1] = y + uvy + uuvy;\n    out[2] = z + uvz + uuvz;\n    return out;\n}\n\n\n\nfunction angle(a, b) {\n  let tempA = fromValues$1(a[0], a[1], a[2]);\n  let tempB = fromValues$1(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  let cosine = dot(tempA, tempB);\n  if(cosine > 1.0) {\n    return 0;\n  }\n  else if(cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n\n\n\n\n\n\n\n\nconst len = length;\n\nconst forEach = (function() {\n  let vec = create$1();\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 3;\n    }\n    if(!offset) {\n      offset = 0;\n    }\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n    }\n    return a;\n  };\n})();\n\nfunction create$2() {\n  let out = new ARRAY_TYPE(9);\n  if(ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n\nfunction create$3() {\n  let out = new ARRAY_TYPE(4);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n  return out;\n}\nfunction clone$3(a) {\n  let out = new ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nfunction fromValues$3(x, y, z, w) {\n  let out = new ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\nfunction copy$3(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction normalize$1(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  let len = x*x + y*y + z*z + w*w;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n  }\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst forEach$1 = (function() {\n  let vec = create$3();\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 4;\n    }\n    if(!offset) {\n      offset = 0;\n    }\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2]; vec[3] = a[i+3];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2]; a[i+3] = vec[3];\n    }\n    return a;\n  };\n})();\n\nfunction create$4() {\n  let out = new ARRAY_TYPE(4);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  out[3] = 1;\n  return out;\n}\n\nfunction setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  let s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n\nfunction multiply$4(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n\n\n\nfunction slerp(out, a, b, t) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n  let omega, cosom, sinom, scale0, scale1;\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\n  if ( cosom < 0.0 ) {\n    cosom = -cosom;\n    bx = - bx;\n    by = - by;\n    bz = - bz;\n    bw = - bw;\n  }\n  if ( (1.0 - cosom) > EPSILON ) {\n    omega  = Math.acos(cosom);\n    sinom  = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    scale0 = 1.0 - t;\n    scale1 = t;\n  }\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n\nfunction invert$2(out, a) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let dot$$1 = a0*a0 + a1*a1 + a2*a2 + a3*a3;\n  let invDot = dot$$1 ? 1.0/dot$$1 : 0;\n  out[0] = -a0*invDot;\n  out[1] = -a1*invDot;\n  out[2] = -a2*invDot;\n  out[3] = a3*invDot;\n  return out;\n}\n\nfunction fromMat3(out, m) {\n  let fTrace = m[0] + m[4] + m[8];\n  let fRoot;\n  if ( fTrace > 0.0 ) {\n    fRoot = Math.sqrt(fTrace + 1.0);\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5/fRoot;\n    out[0] = (m[5]-m[7])*fRoot;\n    out[1] = (m[6]-m[2])*fRoot;\n    out[2] = (m[1]-m[3])*fRoot;\n  } else {\n    let i = 0;\n    if ( m[4] > m[0] )\n      i = 1;\n    if ( m[8] > m[i*3+i] )\n      i = 2;\n    let j = (i+1)%3;\n    let k = (i+2)%3;\n    fRoot = Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j*3+k] - m[k*3+j]) * fRoot;\n    out[j] = (m[j*3+i] + m[i*3+j]) * fRoot;\n    out[k] = (m[k*3+i] + m[i*3+k]) * fRoot;\n  }\n  return out;\n}\nfunction fromEuler(out, x, y, z) {\n    let halfToRad = 0.5 * Math.PI / 180.0;\n    x *= halfToRad;\n    y *= halfToRad;\n    z *= halfToRad;\n    let sx = Math.sin(x);\n    let cx = Math.cos(x);\n    let sy = Math.sin(y);\n    let cy = Math.cos(y);\n    let sz = Math.sin(z);\n    let cz = Math.cos(z);\n    out[0] = sx * cy * cz - cx * sy * sz;\n    out[1] = cx * sy * cz + sx * cy * sz;\n    out[2] = cx * cy * sz - sx * sy * cz;\n    out[3] = cx * cy * cz + sx * sy * sz;\n    return out;\n}\n\nconst clone$4 = clone$3;\nconst fromValues$4 = fromValues$3;\nconst copy$4 = copy$3;\n\n\n\n\n\n\n\n\n\n\nconst normalize$2 = normalize$1;\n\n\nconst rotationTo = (function() {\n  let tmpvec3 = create$1();\n  let xUnitVec3 = fromValues$1(1,0,0);\n  let yUnitVec3 = fromValues$1(0,1,0);\n  return function(out, a, b) {\n    let dot$$1 = dot(a, b);\n    if (dot$$1 < -0.999999) {\n      cross(tmpvec3, xUnitVec3, a);\n      if (len(tmpvec3) < 0.000001)\n        cross(tmpvec3, yUnitVec3, a);\n      normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot$$1 > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot$$1;\n      return normalize$2(out, out);\n    }\n  };\n})();\nconst sqlerp = (function () {\n  let temp1 = create$4();\n  let temp2 = create$4();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}());\nconst setAxes = (function() {\n  let matr = create$2();\n  return function(out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize$2(out, fromMat3(out, matr));\n  };\n})();\n\nconst PRIVATE$1 = Symbol('@@webxr-polyfill/XRRigidTransform');\nclass XRRigidTransform$1 {\n  constructor() {\n    this[PRIVATE$1] = {\n      matrix: null,\n      position: null,\n      orientation: null,\n      inverse: null,\n    };\n    if (arguments.length === 0) {\n      this[PRIVATE$1].matrix = identity(new Float32Array(16));\n    } else if (arguments.length === 1) {\n      if (arguments[0] instanceof Float32Array) {\n        this[PRIVATE$1].matrix = arguments[0];\n      } else {\n        this[PRIVATE$1].position = this._getPoint(arguments[0]);\n        this[PRIVATE$1].orientation = DOMPointReadOnly.fromPoint({\n            x: 0, y: 0, z: 0, w: 1\n        });\n      }\n    } else if (arguments.length === 2) {\n      this[PRIVATE$1].position = this._getPoint(arguments[0]);\n      this[PRIVATE$1].orientation = this._getPoint(arguments[1]);\n    } else {\n      throw new Error(\"Too many arguments!\");\n    }\n    if (this[PRIVATE$1].matrix) {\n        let position = create$1();\n        getTranslation(position, this[PRIVATE$1].matrix);\n        this[PRIVATE$1].position = DOMPointReadOnly.fromPoint({\n            x: position[0],\n            y: position[1],\n            z: position[2]\n        });\n        let orientation = create$4();\n        getRotation(orientation, this[PRIVATE$1].matrix);\n        this[PRIVATE$1].orientation = DOMPointReadOnly.fromPoint({\n          x: orientation[0],\n          y: orientation[1],\n          z: orientation[2],\n          w: orientation[3]\n        });\n    } else {\n        this[PRIVATE$1].matrix = identity(new Float32Array(16));\n        fromRotationTranslation(\n          this[PRIVATE$1].matrix,\n          fromValues$4(\n            this[PRIVATE$1].orientation.x,\n            this[PRIVATE$1].orientation.y,\n            this[PRIVATE$1].orientation.z,\n            this[PRIVATE$1].orientation.w),\n          fromValues$1(\n            this[PRIVATE$1].position.x,\n            this[PRIVATE$1].position.y,\n            this[PRIVATE$1].position.z)\n        );\n    }\n  }\n  _getPoint(arg) {\n    if (arg instanceof DOMPointReadOnly) {\n      return arg;\n    }\n    return DOMPointReadOnly.fromPoint(arg);\n  }\n  get matrix() { return this[PRIVATE$1].matrix; }\n  get position() { return this[PRIVATE$1].position; }\n  get orientation() { return this[PRIVATE$1].orientation; }\n  get inverse() {\n    if (this[PRIVATE$1].inverse === null) {\n      let invMatrix = identity(new Float32Array(16));\n      invert(invMatrix, this[PRIVATE$1].matrix);\n      this[PRIVATE$1].inverse = new XRRigidTransform$1(invMatrix);\n      this[PRIVATE$1].inverse[PRIVATE$1].inverse = this;\n    }\n    return this[PRIVATE$1].inverse;\n  }\n}\n\nconst PRIVATE$2 = Symbol('@@webxr-polyfill/XRSpace');\n\nclass XRSpace {\n  constructor(specialType = null, inputSource = null) {\n    this[PRIVATE$2] = {\n      specialType,\n      inputSource,\n      baseMatrix: null,\n      inverseBaseMatrix: null,\n      lastFrameId: -1\n    };\n  }\n  get _specialType() {\n    return this[PRIVATE$2].specialType;\n  }\n  get _inputSource() {\n    return this[PRIVATE$2].inputSource;\n  }\n  _ensurePoseUpdated(device, frameId) {\n    if (frameId == this[PRIVATE$2].lastFrameId) return;\n    this[PRIVATE$2].lastFrameId = frameId;\n    this._onPoseUpdate(device);\n  }\n  _onPoseUpdate(device) {\n    if (this[PRIVATE$2].specialType == 'viewer') {\n      this._baseMatrix = device.getBasePoseMatrix();\n    }\n  }\n  set _baseMatrix(matrix) {\n    this[PRIVATE$2].baseMatrix = matrix;\n    this[PRIVATE$2].inverseBaseMatrix = null;\n  }\n  get _baseMatrix() {\n    if (!this[PRIVATE$2].baseMatrix) {\n      if (this[PRIVATE$2].inverseBaseMatrix) {\n        this[PRIVATE$2].baseMatrix = new Float32Array(16);\n        invert(this[PRIVATE$2].baseMatrix, this[PRIVATE$2].inverseBaseMatrix);\n      }\n    }\n    return this[PRIVATE$2].baseMatrix;\n  }\n  set _inverseBaseMatrix(matrix) {\n    this[PRIVATE$2].inverseBaseMatrix = matrix;\n    this[PRIVATE$2].baseMatrix = null;\n  }\n  get _inverseBaseMatrix() {\n    if (!this[PRIVATE$2].inverseBaseMatrix) {\n      if (this[PRIVATE$2].baseMatrix) {\n        this[PRIVATE$2].inverseBaseMatrix = new Float32Array(16);\n        invert(this[PRIVATE$2].inverseBaseMatrix, this[PRIVATE$2].baseMatrix);\n      }\n    }\n    return this[PRIVATE$2].inverseBaseMatrix;\n  }\n  _getSpaceRelativeTransform(space) {\n    if (!this._inverseBaseMatrix || !space._baseMatrix) {\n      return null;\n    }\n    let out = new Float32Array(16);\n    multiply(out, this._inverseBaseMatrix, space._baseMatrix);\n    return new XRRigidTransform$1(out);\n  }\n}\n\nconst DEFAULT_EMULATION_HEIGHT = 1.6;\nconst PRIVATE$3 = Symbol('@@webxr-polyfill/XRReferenceSpace');\nconst XRReferenceSpaceTypes = [\n  'viewer',\n  'local',\n  'local-floor',\n  'bounded-floor',\n  'unbounded'\n];\nfunction isFloor(type) {\n  return type === 'bounded-floor' || type === 'local-floor';\n}\nclass XRReferenceSpace extends XRSpace {\n  constructor(type, transform = null) {\n    if (!XRReferenceSpaceTypes.includes(type)) {\n      throw new Error(`XRReferenceSpaceType must be one of ${XRReferenceSpaceTypes}`);\n    }\n    super(type);\n    if (type === 'bounded-floor' && !transform) {\n      throw new Error(`XRReferenceSpace cannot use 'bounded-floor' type if the platform does not provide the floor level`);\n    }\n    if (isFloor(type) && !transform) {\n      transform = identity(new Float32Array(16));\n      transform[13] = DEFAULT_EMULATION_HEIGHT;\n    }\n    this._inverseBaseMatrix = transform || identity(new Float32Array(16));\n    this[PRIVATE$3] = {\n      type,\n      transform,\n      originOffset : identity(new Float32Array(16)),\n    };\n  }\n  _transformBasePoseMatrix(out, pose) {\n    multiply(out, this._inverseBaseMatrix, pose);\n  }\n  _originOffsetMatrix() {\n    return this[PRIVATE$3].originOffset;\n  }\n  _adjustForOriginOffset(transformMatrix) {\n    let inverseOriginOffsetMatrix = new Float32Array(16);\n    invert(inverseOriginOffsetMatrix, this[PRIVATE$3].originOffset);\n    multiply(transformMatrix, inverseOriginOffsetMatrix, transformMatrix);\n  }\n  _getSpaceRelativeTransform(space) {\n    let transform = super._getSpaceRelativeTransform(space);\n    this._adjustForOriginOffset(transform.matrix);\n    return new XRRigidTransform(transform.matrix);\n  }\n  getOffsetReferenceSpace(additionalOffset) {\n    let newSpace = new XRReferenceSpace(\n      this[PRIVATE$3].type,\n      this[PRIVATE$3].transform,\n      this[PRIVATE$3].bounds);\n    multiply(newSpace[PRIVATE$3].originOffset, this[PRIVATE$3].originOffset, additionalOffset.matrix);\n    return newSpace;\n  }\n}\n\nconst PRIVATE$4 = Symbol('@@webxr-polyfill/XR');\nconst XRSessionModes = ['inline', 'immersive-vr', 'immersive-ar'];\nconst DEFAULT_SESSION_OPTIONS = {\n  'inline': {\n    requiredFeatures: ['viewer'],\n    optionalFeatures: [],\n  },\n  'immersive-vr': {\n    requiredFeatures: ['viewer', 'local'],\n    optionalFeatures: [],\n  },\n  'immersive-ar': {\n    requiredFeatures: ['viewer', 'local'],\n    optionalFeatures: [],\n  }\n};\nconst POLYFILL_REQUEST_SESSION_ERROR =\n`Polyfill Error: Must call navigator.xr.isSessionSupported() with any XRSessionMode\nor navigator.xr.requestSession('inline') prior to requesting an immersive\nsession. This is a limitation specific to the WebXR Polyfill and does not apply\nto native implementations of the API.`;\nclass XRSystem extends EventTarget {\n  constructor(devicePromise) {\n    super();\n    this[PRIVATE$4] = {\n      device: null,\n      devicePromise,\n      immersiveSession: null,\n      inlineSessions: new Set(),\n    };\n    devicePromise.then((device) => { this[PRIVATE$4].device = device; });\n  }\n  async isSessionSupported(mode) {\n    if (!this[PRIVATE$4].device) {\n      await this[PRIVATE$4].devicePromise;\n    }\n    if (mode != 'inline') {\n      return Promise.resolve(this[PRIVATE$4].device.isSessionSupported(mode));\n    }\n    return Promise.resolve(true);\n  }\n  async requestSession(mode, options) {\n    if (!this[PRIVATE$4].device) {\n      if (mode != 'inline') {\n        throw new Error(POLYFILL_REQUEST_SESSION_ERROR);\n      } else {\n        await this[PRIVATE$4].devicePromise;\n      }\n    }\n    if (!XRSessionModes.includes(mode)) {\n      throw new TypeError(\n          `The provided value '${mode}' is not a valid enum value of type XRSessionMode`);\n    }\n    const defaultOptions = DEFAULT_SESSION_OPTIONS[mode];\n    const requiredFeatures = defaultOptions.requiredFeatures.concat(\n        options && options.requiredFeatures ? options.requiredFeatures : []);\n    const optionalFeatures = defaultOptions.optionalFeatures.concat(\n        options && options.optionalFeatures ? options.optionalFeatures : []);\n    const enabledFeatures = new Set();\n    let requirementsFailed = false;\n    for (let feature of requiredFeatures) {\n      if (!this[PRIVATE$4].device.isFeatureSupported(feature)) {\n        console.error(`The required feature '${feature}' is not supported`);\n        requirementsFailed = true;\n      } else {\n        enabledFeatures.add(feature);\n      }\n    }\n    if (requirementsFailed) {\n      throw new DOMException('Session does not support some required features', 'NotSupportedError');\n    }\n    for (let feature of optionalFeatures) {\n      if (!this[PRIVATE$4].device.isFeatureSupported(feature)) {\n        console.log(`The optional feature '${feature}' is not supported`);\n      } else {\n        enabledFeatures.add(feature);\n      }\n    }\n    const sessionId = await this[PRIVATE$4].device.requestSession(mode, enabledFeatures);\n    const session = new XRSession(this[PRIVATE$4].device, mode, sessionId);\n    if (mode == 'inline') {\n      this[PRIVATE$4].inlineSessions.add(session);\n    } else {\n      this[PRIVATE$4].immersiveSession = session;\n    }\n    const onSessionEnd = () => {\n      if (mode == 'inline') {\n        this[PRIVATE$4].inlineSessions.delete(session);\n      } else {\n        this[PRIVATE$4].immersiveSession = null;\n      }\n      session.removeEventListener('end', onSessionEnd);\n    };\n    session.addEventListener('end', onSessionEnd);\n    return session;\n  }\n}\n\nlet now;\nif ('performance' in _global === false) {\n  let startTime = Date.now();\n  now = () => Date.now() - startTime;\n} else {\n  now = () => performance.now();\n}\nvar now$1 = now;\n\nconst PRIVATE$5 = Symbol('@@webxr-polyfill/XRPose');\nclass XRPose$1 {\n  constructor(transform, emulatedPosition) {\n    this[PRIVATE$5] = {\n      transform,\n      emulatedPosition,\n    };\n  }\n  get transform() { return this[PRIVATE$5].transform; }\n  get emulatedPosition() { return this[PRIVATE$5].emulatedPosition; }\n}\n\nconst PRIVATE$6 = Symbol('@@webxr-polyfill/XRViewerPose');\nclass XRViewerPose extends XRPose$1 {\n  constructor(transform, views, emulatedPosition = false) {\n    super(transform, emulatedPosition);\n    this[PRIVATE$6] = {\n      views\n    };\n  }\n  get views() {\n    return this[PRIVATE$6].views;\n  }\n}\n\nconst PRIVATE$7 = Symbol('@@webxr-polyfill/XRViewport');\nclass XRViewport {\n  constructor(target) {\n    this[PRIVATE$7] = { target };\n  }\n  get x() { return this[PRIVATE$7].target.x; }\n  get y() { return this[PRIVATE$7].target.y; }\n  get width() { return this[PRIVATE$7].target.width; }\n  get height() { return this[PRIVATE$7].target.height; }\n}\n\nconst XREyes = ['left', 'right', 'none'];\nconst PRIVATE$8 = Symbol('@@webxr-polyfill/XRView');\nclass XRView {\n  constructor(device, transform, eye, sessionId) {\n    if (!XREyes.includes(eye)) {\n      throw new Error(`XREye must be one of: ${XREyes}`);\n    }\n    const temp = Object.create(null);\n    const viewport = new XRViewport(temp);\n    this[PRIVATE$8] = {\n      device,\n      eye,\n      viewport,\n      temp,\n      sessionId,\n      transform,\n    };\n  }\n  get eye() { return this[PRIVATE$8].eye; }\n  get projectionMatrix() { return this[PRIVATE$8].device.getProjectionMatrix(this.eye); }\n  get transform() { return this[PRIVATE$8].transform; }\n  _getViewport(layer) {\n    if (this[PRIVATE$8].device.getViewport(this[PRIVATE$8].sessionId,\n                                           this.eye,\n                                           layer,\n                                           this[PRIVATE$8].temp)) {\n      return this[PRIVATE$8].viewport;\n    }\n    return undefined;\n  }\n}\n\nconst PRIVATE$9 = Symbol('@@webxr-polyfill/XRFrame');\nconst NON_ACTIVE_MSG = \"XRFrame access outside the callback that produced it is invalid.\";\nconst NON_ANIMFRAME_MSG = \"getViewerPose can only be called on XRFrame objects passed to XRSession.requestAnimationFrame callbacks.\";\nlet NEXT_FRAME_ID = 0;\nclass XRFrame {\n  constructor(device, session, sessionId) {\n    this[PRIVATE$9] = {\n      id: ++NEXT_FRAME_ID,\n      active: false,\n      animationFrame: false,\n      device,\n      session,\n      sessionId\n    };\n  }\n  get session() { return this[PRIVATE$9].session; }\n  getViewerPose(referenceSpace) {\n    if (!this[PRIVATE$9].animationFrame) {\n      throw new DOMException(NON_ANIMFRAME_MSG, 'InvalidStateError');\n    }\n    if (!this[PRIVATE$9].active) {\n      throw new DOMException(NON_ACTIVE_MSG, 'InvalidStateError');\n    }\n    const device = this[PRIVATE$9].device;\n    const session = this[PRIVATE$9].session;\n    session[PRIVATE$15].viewerSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n    referenceSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n    let viewerTransform = referenceSpace._getSpaceRelativeTransform(session[PRIVATE$15].viewerSpace);\n    const views = [];\n    for (let viewSpace of session[PRIVATE$15].viewSpaces) {\n      viewSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n      let viewTransform = referenceSpace._getSpaceRelativeTransform(viewSpace);\n      let view = new XRView(device, viewTransform, viewSpace.eye, this[PRIVATE$9].sessionId);\n      views.push(view);\n    }\n    let viewerPose = new XRViewerPose(viewerTransform, views, false                             );\n    return viewerPose;\n  }\n  getPose(space, baseSpace) {\n    if (!this[PRIVATE$9].active) {\n      throw new DOMException(NON_ACTIVE_MSG, 'InvalidStateError');\n    }\n    const device = this[PRIVATE$9].device;\n    if (space._specialType === \"target-ray\" || space._specialType === \"grip\") {\n      return device.getInputPose(\n        space._inputSource, baseSpace, space._specialType);\n    } else {\n      space._ensurePoseUpdated(device, this[PRIVATE$9].id);\n      baseSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n      let transform = baseSpace._getSpaceRelativeTransform(space);\n      if (!transform) { return null; }\n      return new XRPose(transform, false                             );\n    }\n    return null;\n  }\n}\n\nconst PRIVATE$10 = Symbol('@@webxr-polyfill/XRRenderState');\nconst XRRenderStateInit = Object.freeze({\n  depthNear: 0.1,\n  depthFar: 1000.0,\n  inlineVerticalFieldOfView: null,\n  baseLayer: null\n});\nclass XRRenderState {\n  constructor(stateInit = {}) {\n    const config = Object.assign({}, XRRenderStateInit, stateInit);\n    this[PRIVATE$10] = { config };\n  }\n  get depthNear() { return this[PRIVATE$10].config.depthNear; }\n  get depthFar() { return this[PRIVATE$10].config.depthFar; }\n  get inlineVerticalFieldOfView() { return this[PRIVATE$10].config.inlineVerticalFieldOfView; }\n  get baseLayer() { return this[PRIVATE$10].config.baseLayer; }\n}\n\nconst POLYFILLED_XR_COMPATIBLE = Symbol('@@webxr-polyfill/polyfilled-xr-compatible');\nconst XR_COMPATIBLE = Symbol('@@webxr-polyfill/xr-compatible');\n\nconst PRIVATE$11 = Symbol('@@webxr-polyfill/XRWebGLLayer');\nconst XRWebGLLayerInit = Object.freeze({\n  antialias: true,\n  depth: false,\n  stencil: false,\n  alpha: true,\n  multiview: false,\n  ignoreDepthValues: false,\n  framebufferScaleFactor: 1.0,\n});\nclass XRWebGLLayer {\n  constructor(session, context, layerInit={}) {\n    const config = Object.assign({}, XRWebGLLayerInit, layerInit);\n    if (!(session instanceof XRSession$1)) {\n      throw new Error('session must be a XRSession');\n    }\n    if (session.ended) {\n      throw new Error(`InvalidStateError`);\n    }\n    if (context[POLYFILLED_XR_COMPATIBLE]) {\n      if (context[XR_COMPATIBLE] !== true) {\n        throw new Error(`InvalidStateError`);\n      }\n    }\n    const framebuffer = context.getParameter(context.FRAMEBUFFER_BINDING);\n    this[PRIVATE$11] = {\n      context,\n      config,\n      framebuffer,\n      session,\n    };\n  }\n  get context() { return this[PRIVATE$11].context; }\n  get antialias() { return this[PRIVATE$11].config.antialias; }\n  get ignoreDepthValues() { return true; }\n  get framebuffer() { return this[PRIVATE$11].framebuffer; }\n  get framebufferWidth() { return this[PRIVATE$11].context.drawingBufferWidth; }\n  get framebufferHeight() { return this[PRIVATE$11].context.drawingBufferHeight; }\n  get _session() { return this[PRIVATE$11].session; }\n  getViewport(view) {\n    return view._getViewport(this);\n  }\n  static getNativeFramebufferScaleFactor(session) {\n    if (!session) {\n      throw new TypeError('getNativeFramebufferScaleFactor must be passed a session.')\n    }\n    if (session[PRIVATE$15].ended) { return 0.0; }\n    return 1.0;\n  }\n}\n\nconst PRIVATE$12 = Symbol('@@webxr-polyfill/XRInputSourceEvent');\nclass XRInputSourceEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$12] = {\n      frame: eventInitDict.frame,\n      inputSource: eventInitDict.inputSource\n    };\n    Object.setPrototypeOf(this, XRInputSourceEvent.prototype);\n  }\n  get frame() { return this[PRIVATE$12].frame; }\n  get inputSource() { return this[PRIVATE$12].inputSource; }\n}\n\nconst PRIVATE$13 = Symbol('@@webxr-polyfill/XRSessionEvent');\nclass XRSessionEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$13] = {\n      session: eventInitDict.session\n    };\n    Object.setPrototypeOf(this, XRSessionEvent.prototype);\n  }\n  get session() { return this[PRIVATE$13].session; }\n}\n\nconst PRIVATE$14 = Symbol('@@webxr-polyfill/XRInputSourcesChangeEvent');\nclass XRInputSourcesChangeEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$14] = {\n      session: eventInitDict.session,\n      added: eventInitDict.added,\n      removed: eventInitDict.removed\n    };\n    Object.setPrototypeOf(this, XRInputSourcesChangeEvent.prototype);\n  }\n  get session() { return this[PRIVATE$14].session; }\n  get added() { return this[PRIVATE$14].added; }\n  get removed() { return this[PRIVATE$14].removed; }\n}\n\nconst PRIVATE$15 = Symbol('@@webxr-polyfill/XRSession');\nclass XRViewSpace extends XRSpace {\n  constructor(eye) {\n    super(eye);\n  }\n  get eye() {\n    return this._specialType;\n  }\n  _onPoseUpdate(device) {\n    this._inverseBaseMatrix = device.getBaseViewMatrix(this._specialType);\n  }\n}\nclass XRSession$1 extends EventTarget {\n  constructor(device, mode, id) {\n    super();\n    let immersive = mode != 'inline';\n    let initialRenderState = new XRRenderState({\n      inlineVerticalFieldOfView: immersive ? null : Math.PI * 0.5\n    });\n    this[PRIVATE$15] = {\n      device,\n      mode,\n      immersive,\n      ended: false,\n      suspended: false,\n      frameCallbacks: [],\n      currentFrameCallbacks: null,\n      frameHandle: 0,\n      deviceFrameHandle: null,\n      id,\n      activeRenderState: initialRenderState,\n      pendingRenderState: null,\n      viewerSpace: new XRReferenceSpace(\"viewer\"),\n      viewSpaces: [],\n      currentInputSources: []\n    };\n    if (immersive) {\n      this[PRIVATE$15].viewSpaces.push(new XRViewSpace('left'),\n                                    new XRViewSpace('right'));\n    } else {\n      this[PRIVATE$15].viewSpaces.push(new XRViewSpace('none'));\n    }\n    this[PRIVATE$15].onDeviceFrame = () => {\n      if (this[PRIVATE$15].ended || this[PRIVATE$15].suspended) {\n        return;\n      }\n      this[PRIVATE$15].deviceFrameHandle = null;\n      this[PRIVATE$15].startDeviceFrameLoop();\n      if (this[PRIVATE$15].pendingRenderState !== null) {\n        this[PRIVATE$15].activeRenderState = new XRRenderState(this[PRIVATE$15].pendingRenderState);\n        this[PRIVATE$15].pendingRenderState = null;\n        if (this[PRIVATE$15].activeRenderState.baseLayer) {\n          this[PRIVATE$15].device.onBaseLayerSet(\n            this[PRIVATE$15].id,\n            this[PRIVATE$15].activeRenderState.baseLayer);\n        }\n      }\n      if (this[PRIVATE$15].activeRenderState.baseLayer === null) {\n        return;\n      }\n      const frame = new XRFrame(device, this, this[PRIVATE$15].id);\n      const callbacks = this[PRIVATE$15].currentFrameCallbacks = this[PRIVATE$15].frameCallbacks;\n      this[PRIVATE$15].frameCallbacks = [];\n      frame[PRIVATE$9].active = true;\n      frame[PRIVATE$9].animationFrame = true;\n      this[PRIVATE$15].device.onFrameStart(this[PRIVATE$15].id, this[PRIVATE$15].activeRenderState);\n      this._checkInputSourcesChange();\n      const rightNow = now$1();\n      for (let i = 0; i < callbacks.length; i++) {\n        try {\n          if (!callbacks[i].cancelled && typeof callbacks[i].callback === 'function') {\n            callbacks[i].callback(rightNow, frame);\n          }\n        } catch(err) {\n          console.error(err);\n        }\n      }\n      this[PRIVATE$15].currentFrameCallbacks = null;\n      frame[PRIVATE$9].active = false;\n      this[PRIVATE$15].device.onFrameEnd(this[PRIVATE$15].id);\n    };\n    this[PRIVATE$15].startDeviceFrameLoop = () => {\n      if (this[PRIVATE$15].deviceFrameHandle === null) {\n        this[PRIVATE$15].deviceFrameHandle = this[PRIVATE$15].device.requestAnimationFrame(\n          this[PRIVATE$15].onDeviceFrame\n        );\n      }\n    };\n    this[PRIVATE$15].stopDeviceFrameLoop = () => {\n      const handle = this[PRIVATE$15].deviceFrameHandle;\n      if (handle !== null) {\n        this[PRIVATE$15].device.cancelAnimationFrame(handle);\n        this[PRIVATE$15].deviceFrameHandle = null;\n      }\n    };\n    this[PRIVATE$15].onPresentationEnd = sessionId => {\n      if (sessionId !== this[PRIVATE$15].id) {\n        this[PRIVATE$15].suspended = false;\n        this[PRIVATE$15].startDeviceFrameLoop();\n        this.dispatchEvent('focus', { session: this });\n        return;\n      }\n      this[PRIVATE$15].ended = true;\n      this[PRIVATE$15].stopDeviceFrameLoop();\n      device.removeEventListener('@@webxr-polyfill/vr-present-end', this[PRIVATE$15].onPresentationEnd);\n      device.removeEventListener('@@webxr-polyfill/vr-present-start', this[PRIVATE$15].onPresentationStart);\n      device.removeEventListener('@@webxr-polyfill/input-select-start', this[PRIVATE$15].onSelectStart);\n      device.removeEventListener('@@webxr-polyfill/input-select-end', this[PRIVATE$15].onSelectEnd);\n      this.dispatchEvent('end', new XRSessionEvent('end', { session: this }));\n    };\n    device.addEventListener('@@webxr-polyfill/vr-present-end', this[PRIVATE$15].onPresentationEnd);\n    this[PRIVATE$15].onPresentationStart = sessionId => {\n      if (sessionId === this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].suspended = true;\n      this[PRIVATE$15].stopDeviceFrameLoop();\n      this.dispatchEvent('blur', { session: this });\n    };\n    device.addEventListener('@@webxr-polyfill/vr-present-start', this[PRIVATE$15].onPresentationStart);\n    this[PRIVATE$15].onSelectStart = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('selectstart',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-select-start', this[PRIVATE$15].onSelectStart);\n    this[PRIVATE$15].onSelectEnd = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('selectend',  evt.inputSource);\n      this[PRIVATE$15].dispatchInputSourceEvent('select',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-select-end', this[PRIVATE$15].onSelectEnd);\n    this[PRIVATE$15].onSqueezeStart = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('squeezestart',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-squeeze-start', this[PRIVATE$15].onSqueezeStart);\n    this[PRIVATE$15].onSqueezeEnd = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('squeezeend',  evt.inputSource);\n      this[PRIVATE$15].dispatchInputSourceEvent('squeeze',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-squeeze-end', this[PRIVATE$15].onSqueezeEnd);\n    this[PRIVATE$15].dispatchInputSourceEvent = (type, inputSource) => {\n      const frame = new XRFrame(device, this, this[PRIVATE$15].id);\n      const event = new XRInputSourceEvent(type, { frame, inputSource });\n      frame[PRIVATE$9].active = true;\n      this.dispatchEvent(type, event);\n      frame[PRIVATE$9].active = false;\n    };\n    this[PRIVATE$15].startDeviceFrameLoop();\n    this.onblur = undefined;\n    this.onfocus = undefined;\n    this.onresetpose = undefined;\n    this.onend = undefined;\n    this.onselect = undefined;\n    this.onselectstart = undefined;\n    this.onselectend = undefined;\n  }\n  get renderState() { return this[PRIVATE$15].activeRenderState; }\n  get environmentBlendMode() {\n    return this[PRIVATE$15].device.environmentBlendMode || 'opaque';\n  }\n  async requestReferenceSpace(type) {\n    if (this[PRIVATE$15].ended) {\n      return;\n    }\n    if (!XRReferenceSpaceTypes.includes(type)) {\n      throw new TypeError(`XRReferenceSpaceType must be one of ${XRReferenceSpaceTypes}`);\n    }\n    if (!this[PRIVATE$15].device.doesSessionSupportReferenceSpace(this[PRIVATE$15].id, type)) {\n      throw new DOMException(`The ${type} reference space is not supported by this session.`, 'NotSupportedError');\n    }\n    if (type === 'viewer') {\n      return this[PRIVATE$15].viewerSpace;\n    }\n    let transform = await this[PRIVATE$15].device.requestFrameOfReferenceTransform(type);\n    if (type === 'bounded-floor') {\n      if (!transform) {\n        throw new DOMException(`${type} XRReferenceSpace not supported by this device.`, 'NotSupportedError');\n      }\n      let bounds = this[PRIVATE$15].device.requestStageBounds();\n      if (!bounds) {\n        throw new DOMException(`${type} XRReferenceSpace not supported by this device.`, 'NotSupportedError');\n      }\n      throw new DOMException(`The WebXR polyfill does not support the ${type} reference space yet.`, 'NotSupportedError');\n    }\n    return new XRReferenceSpace(type, transform);\n  }\n  requestAnimationFrame(callback) {\n    if (this[PRIVATE$15].ended) {\n      return;\n    }\n    const handle = ++this[PRIVATE$15].frameHandle;\n    this[PRIVATE$15].frameCallbacks.push({\n      handle,\n      callback,\n      cancelled: false\n    });\n    return handle;\n  }\n  cancelAnimationFrame(handle) {\n    let callbacks = this[PRIVATE$15].frameCallbacks;\n    let index = callbacks.findIndex(d => d && d.handle === handle);\n    if (index > -1) {\n      callbacks[index].cancelled = true;\n      callbacks.splice(index, 1);\n    }\n    callbacks = this[PRIVATE$15].currentFrameCallbacks;\n    if (callbacks) {\n      index = callbacks.findIndex(d => d && d.handle === handle);\n      if (index > -1) {\n        callbacks[index].cancelled = true;\n      }\n    }\n  }\n  get inputSources() {\n    return this[PRIVATE$15].device.getInputSources();\n  }\n  async end() {\n    if (this[PRIVATE$15].ended) {\n      return;\n    }\n    if (this[PRIVATE$15].immersive) {\n      this[PRIVATE$15].ended = true;\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/vr-present-start',\n                                                 this[PRIVATE$15].onPresentationStart);\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/vr-present-end',\n                                                 this[PRIVATE$15].onPresentationEnd);\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/input-select-start',\n                                                 this[PRIVATE$15].onSelectStart);\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/input-select-end',\n                                                 this[PRIVATE$15].onSelectEnd);\n      this.dispatchEvent('end', new XRSessionEvent('end', { session: this }));\n    }\n    this[PRIVATE$15].stopDeviceFrameLoop();\n    return this[PRIVATE$15].device.endSession(this[PRIVATE$15].id);\n  }\n  updateRenderState(newState) {\n    if (this[PRIVATE$15].ended) {\n      const message = \"Can't call updateRenderState on an XRSession \" +\n                      \"that has already ended.\";\n      throw new Error(message);\n    }\n    if (newState.baseLayer && (newState.baseLayer._session !== this)) {\n      const message = \"Called updateRenderState with a base layer that was \" +\n                      \"created by a different session.\";\n      throw new Error(message);\n    }\n    const fovSet = (newState.inlineVerticalFieldOfView !== null) &&\n                   (newState.inlineVerticalFieldOfView !== undefined);\n    if (fovSet) {\n      if (this[PRIVATE$15].immersive) {\n        const message = \"inlineVerticalFieldOfView must not be set for an \" +\n                        \"XRRenderState passed to updateRenderState for an \" +\n                        \"immersive session.\";\n        throw new Error(message);\n      } else {\n        newState.inlineVerticalFieldOfView = Math.min(\n          3.13, Math.max(0.01, newState.inlineVerticalFieldOfView));\n      }\n    }\n    if (this[PRIVATE$15].pendingRenderState === null) {\n      const activeRenderState = this[PRIVATE$15].activeRenderState;\n      this[PRIVATE$15].pendingRenderState = {\n        depthNear: activeRenderState.depthNear,\n        depthFar: activeRenderState.depthFar,\n        inlineVerticalFieldOfView: activeRenderState.inlineVerticalFieldOfView,\n        baseLayer: activeRenderState.baseLayer\n      };\n    }\n    Object.assign(this[PRIVATE$15].pendingRenderState, newState);\n  }\n  _checkInputSourcesChange() {\n    const added = [];\n    const removed = [];\n    const newInputSources = this.inputSources;\n    const oldInputSources = this[PRIVATE$15].currentInputSources;\n    for (const newInputSource of newInputSources) {\n      if (!oldInputSources.includes(newInputSource)) {\n        added.push(newInputSource);\n      }\n    }\n    for (const oldInputSource of oldInputSources) {\n      if (!newInputSources.includes(oldInputSource)) {\n        removed.push(oldInputSource);\n      }\n    }\n    if (added.length > 0 || removed.length > 0) {\n      this.dispatchEvent('inputsourceschange', new XRInputSourcesChangeEvent('inputsourceschange', {\n        session: this,\n        added: added,\n        removed: removed\n      }));\n    }\n    this[PRIVATE$15].currentInputSources.length = 0;\n    for (const newInputSource of newInputSources) {\n      this[PRIVATE$15].currentInputSources.push(newInputSource);\n    }\n  }\n}\n\nconst PRIVATE$16 = Symbol('@@webxr-polyfill/XRInputSource');\nclass XRInputSource {\n  constructor(impl) {\n    this[PRIVATE$16] = {\n      impl,\n      gripSpace: new XRSpace(\"grip\", this),\n      targetRaySpace: new XRSpace(\"target-ray\", this)\n    };\n  }\n  get handedness() { return this[PRIVATE$16].impl.handedness; }\n  get targetRayMode() { return this[PRIVATE$16].impl.targetRayMode; }\n  get gripSpace() {\n    let mode = this[PRIVATE$16].impl.targetRayMode;\n    if (mode === \"gaze\" || mode === \"screen\") {\n      return null;\n    }\n    return this[PRIVATE$16].gripSpace;\n  }\n  get targetRaySpace() { return this[PRIVATE$16].targetRaySpace; }\n  get profiles() { return this[PRIVATE$16].impl.profiles; }\n  get gamepad() { return this[PRIVATE$16].impl.gamepad; }\n}\n\nconst PRIVATE$17 = Symbol('@@webxr-polyfill/XRReferenceSpaceEvent');\nclass XRReferenceSpaceEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$17] = {\n      referenceSpace: eventInitDict.referenceSpace,\n      transform: eventInitDict.transform || null\n    };\n    Object.setPrototypeOf(this, XRReferenceSpaceEvent.prototype);\n  }\n  get referenceSpace() { return this[PRIVATE$17].referenceSpace; }\n  get transform() { return this[PRIVATE$17].transform; }\n}\n\nvar API = {\n  XRSystem,\n  XRSession: XRSession$1,\n  XRSessionEvent,\n  XRFrame,\n  XRView,\n  XRViewport,\n  XRViewerPose,\n  XRWebGLLayer,\n  XRSpace,\n  XRReferenceSpace,\n  XRReferenceSpaceEvent,\n  XRInputSource,\n  XRInputSourceEvent,\n  XRInputSourcesChangeEvent,\n  XRRenderState,\n  XRRigidTransform: XRRigidTransform$1,\n  XRPose: XRPose$1,\n};\n\nconst polyfillMakeXRCompatible = Context => {\n  if (typeof Context.prototype.makeXRCompatible === 'function') {\n    return false;\n  }\n  Context.prototype.makeXRCompatible = function () {\n    this[XR_COMPATIBLE] = true;\n    return Promise.resolve();\n  };\n  return true;\n};\nconst polyfillGetContext = (Canvas) => {\n  const getContext = Canvas.prototype.getContext;\n  Canvas.prototype.getContext = function (contextType, glAttribs) {\n    const ctx = getContext.call(this, contextType, glAttribs);\n    if (ctx) {\n      ctx[POLYFILLED_XR_COMPATIBLE] = true;\n      if (glAttribs && ('xrCompatible' in glAttribs)) {\n        ctx[XR_COMPATIBLE] = glAttribs.xrCompatible;\n      }\n    }\n    return ctx;\n  };\n};\n\nconst isImageBitmapSupported = global =>\n  !!(global.ImageBitmapRenderingContext &&\n     global.createImageBitmap);\nconst isMobile = global => {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true;})(global.navigator.userAgent||global.navigator.vendor||global.opera);\n  return check;\n};\nconst applyCanvasStylesForMinimalRendering = canvas => {\n  canvas.style.display = 'block';\n  canvas.style.position = 'absolute';\n  canvas.style.width = canvas.style.height = '1px';\n  canvas.style.top = canvas.style.left = '0px';\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar cardboardVrDisplay = createCommonjsModule(function (module, exports) {\n(function (global, factory) {\n\tmodule.exports = factory();\n}(commonjsGlobal, (function () { var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\nvar MIN_TIMESTEP = 0.001;\nvar MAX_TIMESTEP = 1;\nvar dataUri = function dataUri(mimeType, svg) {\n  return 'data:' + mimeType + ',' + encodeURIComponent(svg);\n};\nvar lerp = function lerp(a, b, t) {\n  return a + (b - a) * t;\n};\nvar isIOS = function () {\n  var isIOS = /iPad|iPhone|iPod/.test(navigator.platform);\n  return function () {\n    return isIOS;\n  };\n}();\nvar isWebViewAndroid = function () {\n  var isWebViewAndroid = navigator.userAgent.indexOf('Version') !== -1 && navigator.userAgent.indexOf('Android') !== -1 && navigator.userAgent.indexOf('Chrome') !== -1;\n  return function () {\n    return isWebViewAndroid;\n  };\n}();\nvar isSafari = function () {\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  return function () {\n    return isSafari;\n  };\n}();\nvar isFirefoxAndroid = function () {\n  var isFirefoxAndroid = navigator.userAgent.indexOf('Firefox') !== -1 && navigator.userAgent.indexOf('Android') !== -1;\n  return function () {\n    return isFirefoxAndroid;\n  };\n}();\nvar getChromeVersion = function () {\n  var match = navigator.userAgent.match(/.*Chrome\\/([0-9]+)/);\n  var value = match ? parseInt(match[1], 10) : null;\n  return function () {\n    return value;\n  };\n}();\nvar isSafariWithoutDeviceMotion = function () {\n  var value = false;\n  value = isIOS() && isSafari() && navigator.userAgent.indexOf('13_4') !== -1;\n  return function () {\n    return value;\n  };\n}();\nvar isChromeWithoutDeviceMotion = function () {\n  var value = false;\n  if (getChromeVersion() === 65) {\n    var match = navigator.userAgent.match(/.*Chrome\\/([0-9\\.]*)/);\n    if (match) {\n      var _match$1$split = match[1].split('.'),\n          _match$1$split2 = slicedToArray(_match$1$split, 4),\n          major = _match$1$split2[0],\n          minor = _match$1$split2[1],\n          branch = _match$1$split2[2],\n          build = _match$1$split2[3];\n      value = parseInt(branch, 10) === 3325 && parseInt(build, 10) < 148;\n    }\n  }\n  return function () {\n    return value;\n  };\n}();\nvar isR7 = function () {\n  var isR7 = navigator.userAgent.indexOf('R7 Build') !== -1;\n  return function () {\n    return isR7;\n  };\n}();\nvar isLandscapeMode = function isLandscapeMode() {\n  var rtn = window.orientation == 90 || window.orientation == -90;\n  return isR7() ? !rtn : rtn;\n};\nvar isTimestampDeltaValid = function isTimestampDeltaValid(timestampDeltaS) {\n  if (isNaN(timestampDeltaS)) {\n    return false;\n  }\n  if (timestampDeltaS <= MIN_TIMESTEP) {\n    return false;\n  }\n  if (timestampDeltaS > MAX_TIMESTEP) {\n    return false;\n  }\n  return true;\n};\nvar getScreenWidth = function getScreenWidth() {\n  return Math.max(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar getScreenHeight = function getScreenHeight() {\n  return Math.min(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar requestFullscreen = function requestFullscreen(element) {\n  if (isWebViewAndroid()) {\n    return false;\n  }\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar exitFullscreen = function exitFullscreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar getFullscreenElement = function getFullscreenElement() {\n  return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;\n};\nvar linkProgram = function linkProgram(gl, vertexSource, fragmentSource, attribLocationMap) {\n  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, vertexSource);\n  gl.compileShader(vertexShader);\n  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, fragmentSource);\n  gl.compileShader(fragmentShader);\n  var program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  for (var attribName in attribLocationMap) {\n    gl.bindAttribLocation(program, attribLocationMap[attribName], attribName);\n  }gl.linkProgram(program);\n  gl.deleteShader(vertexShader);\n  gl.deleteShader(fragmentShader);\n  return program;\n};\nvar getProgramUniforms = function getProgramUniforms(gl, program) {\n  var uniforms = {};\n  var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  var uniformName = '';\n  for (var i = 0; i < uniformCount; i++) {\n    var uniformInfo = gl.getActiveUniform(program, i);\n    uniformName = uniformInfo.name.replace('[0]', '');\n    uniforms[uniformName] = gl.getUniformLocation(program, uniformName);\n  }\n  return uniforms;\n};\nvar orthoMatrix = function orthoMatrix(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right),\n      bt = 1 / (bottom - top),\n      nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n};\nvar isMobile = function isMobile() {\n  var check = false;\n  (function (a) {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n};\nvar extend = function extend(dest, src) {\n  for (var key in src) {\n    if (src.hasOwnProperty(key)) {\n      dest[key] = src[key];\n    }\n  }\n  return dest;\n};\nvar safariCssSizeWorkaround = function safariCssSizeWorkaround(canvas) {\n  if (isIOS()) {\n    var width = canvas.style.width;\n    var height = canvas.style.height;\n    canvas.style.width = parseInt(width) + 1 + 'px';\n    canvas.style.height = parseInt(height) + 'px';\n    setTimeout(function () {\n      canvas.style.width = width;\n      canvas.style.height = height;\n    }, 100);\n  }\n  window.canvas = canvas;\n};\nvar frameDataFromPose = function () {\n  var piOver180 = Math.PI / 180.0;\n  var rad45 = Math.PI * 0.25;\n  function mat4_perspectiveFromFieldOfView(out, fov, near, far) {\n    var upTan = Math.tan(fov ? fov.upDegrees * piOver180 : rad45),\n        downTan = Math.tan(fov ? fov.downDegrees * piOver180 : rad45),\n        leftTan = Math.tan(fov ? fov.leftDegrees * piOver180 : rad45),\n        rightTan = Math.tan(fov ? fov.rightDegrees * piOver180 : rad45),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = far * near / (near - far);\n    out[15] = 0.0;\n    return out;\n  }\n  function mat4_fromRotationTranslation(out, q, v) {\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n  }\n  function mat4_translate(out, a, v) {\n    var x = v[0],\n        y = v[1],\n        z = v[2],\n        a00,\n        a01,\n        a02,\n        a03,\n        a10,\n        a11,\n        a12,\n        a13,\n        a20,\n        a21,\n        a22,\n        a23;\n    if (a === out) {\n      out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n      out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n      out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n      out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n      a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\n      a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\n      a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\n      out[0] = a00;out[1] = a01;out[2] = a02;out[3] = a03;\n      out[4] = a10;out[5] = a11;out[6] = a12;out[7] = a13;\n      out[8] = a20;out[9] = a21;out[10] = a22;out[11] = a23;\n      out[12] = a00 * x + a10 * y + a20 * z + a[12];\n      out[13] = a01 * x + a11 * y + a21 * z + a[13];\n      out[14] = a02 * x + a12 * y + a22 * z + a[14];\n      out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n  }\n  function mat4_invert(out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15],\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n      return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n  }\n  var defaultOrientation = new Float32Array([0, 0, 0, 1]);\n  var defaultPosition = new Float32Array([0, 0, 0]);\n  function updateEyeMatrices(projection, view, pose, fov, offset, vrDisplay) {\n    mat4_perspectiveFromFieldOfView(projection, fov || null, vrDisplay.depthNear, vrDisplay.depthFar);\n    var orientation = pose.orientation || defaultOrientation;\n    var position = pose.position || defaultPosition;\n    mat4_fromRotationTranslation(view, orientation, position);\n    if (offset) mat4_translate(view, view, offset);\n    mat4_invert(view, view);\n  }\n  return function (frameData, pose, vrDisplay) {\n    if (!frameData || !pose) return false;\n    frameData.pose = pose;\n    frameData.timestamp = pose.timestamp;\n    updateEyeMatrices(frameData.leftProjectionMatrix, frameData.leftViewMatrix, pose, vrDisplay._getFieldOfView(\"left\"), vrDisplay._getEyeOffset(\"left\"), vrDisplay);\n    updateEyeMatrices(frameData.rightProjectionMatrix, frameData.rightViewMatrix, pose, vrDisplay._getFieldOfView(\"right\"), vrDisplay._getEyeOffset(\"right\"), vrDisplay);\n    return true;\n  };\n}();\nvar isInsideCrossOriginIFrame = function isInsideCrossOriginIFrame() {\n  var isFramed = window.self !== window.top;\n  var refOrigin = getOriginFromUrl(document.referrer);\n  var thisOrigin = getOriginFromUrl(window.location.href);\n  return isFramed && refOrigin !== thisOrigin;\n};\nvar getOriginFromUrl = function getOriginFromUrl(url) {\n  var domainIdx;\n  var protoSepIdx = url.indexOf(\"://\");\n  if (protoSepIdx !== -1) {\n    domainIdx = protoSepIdx + 3;\n  } else {\n    domainIdx = 0;\n  }\n  var domainEndIdx = url.indexOf('/', domainIdx);\n  if (domainEndIdx === -1) {\n    domainEndIdx = url.length;\n  }\n  return url.substring(0, domainEndIdx);\n};\nvar getQuaternionAngle = function getQuaternionAngle(quat) {\n  if (quat.w > 1) {\n    console.warn('getQuaternionAngle: w > 1');\n    return 0;\n  }\n  var angle = 2 * Math.acos(quat.w);\n  return angle;\n};\nvar warnOnce = function () {\n  var observedWarnings = {};\n  return function (key, message) {\n    if (observedWarnings[key] === undefined) {\n      console.warn('webvr-polyfill: ' + message);\n      observedWarnings[key] = true;\n    }\n  };\n}();\nvar deprecateWarning = function deprecateWarning(deprecated, suggested) {\n  var alternative = suggested ? 'Please use ' + suggested + ' instead.' : '';\n  warnOnce(deprecated, deprecated + ' has been deprecated. ' + 'This may not work on native WebVR displays. ' + alternative);\n};\nfunction WGLUPreserveGLState(gl, bindings, callback) {\n  if (!bindings) {\n    callback(gl);\n    return;\n  }\n  var boundValues = [];\n  var activeTexture = null;\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    switch (binding) {\n      case gl.TEXTURE_BINDING_2D:\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) {\n          console.error(\"TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit\");\n          boundValues.push(null, null);\n          break;\n        }\n        if (!activeTexture) {\n          activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        }\n        gl.activeTexture(textureUnit);\n        boundValues.push(gl.getParameter(binding), null);\n        break;\n      case gl.ACTIVE_TEXTURE:\n        activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        boundValues.push(null);\n        break;\n      default:\n        boundValues.push(gl.getParameter(binding));\n        break;\n    }\n  }\n  callback(gl);\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    var boundValue = boundValues[i];\n    switch (binding) {\n      case gl.ACTIVE_TEXTURE:\n        break;\n      case gl.ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ARRAY_BUFFER, boundValue);\n        break;\n      case gl.COLOR_CLEAR_VALUE:\n        gl.clearColor(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.COLOR_WRITEMASK:\n        gl.colorMask(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.CURRENT_PROGRAM:\n        gl.useProgram(boundValue);\n        break;\n      case gl.ELEMENT_ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, boundValue);\n        break;\n      case gl.FRAMEBUFFER_BINDING:\n        gl.bindFramebuffer(gl.FRAMEBUFFER, boundValue);\n        break;\n      case gl.RENDERBUFFER_BINDING:\n        gl.bindRenderbuffer(gl.RENDERBUFFER, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_2D:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_2D, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, boundValue);\n        break;\n      case gl.VIEWPORT:\n        gl.viewport(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.BLEND:\n      case gl.CULL_FACE:\n      case gl.DEPTH_TEST:\n      case gl.SCISSOR_TEST:\n      case gl.STENCIL_TEST:\n        if (boundValue) {\n          gl.enable(binding);\n        } else {\n          gl.disable(binding);\n        }\n        break;\n      default:\n        console.log(\"No GL restore behavior for 0x\" + binding.toString(16));\n        break;\n    }\n    if (activeTexture) {\n      gl.activeTexture(activeTexture);\n    }\n  }\n}\nvar glPreserveState = WGLUPreserveGLState;\nvar distortionVS = ['attribute vec2 position;', 'attribute vec3 texCoord;', 'varying vec2 vTexCoord;', 'uniform vec4 viewportOffsetScale[2];', 'void main() {', '  vec4 viewport = viewportOffsetScale[int(texCoord.z)];', '  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;', '  gl_Position = vec4( position, 1.0, 1.0 );', '}'].join('\\n');\nvar distortionFS = ['precision mediump float;', 'uniform sampler2D diffuse;', 'varying vec2 vTexCoord;', 'void main() {', '  gl_FragColor = texture2D(diffuse, vTexCoord);', '}'].join('\\n');\nfunction CardboardDistorter(gl, cardboardUI, bufferScale, dirtySubmitFrameBindings) {\n  this.gl = gl;\n  this.cardboardUI = cardboardUI;\n  this.bufferScale = bufferScale;\n  this.dirtySubmitFrameBindings = dirtySubmitFrameBindings;\n  this.ctxAttribs = gl.getContextAttributes();\n  this.instanceExt = gl.getExtension('ANGLE_instanced_arrays');\n  this.meshWidth = 20;\n  this.meshHeight = 20;\n  this.bufferWidth = gl.drawingBufferWidth;\n  this.bufferHeight = gl.drawingBufferHeight;\n  this.realBindFramebuffer = gl.bindFramebuffer;\n  this.realEnable = gl.enable;\n  this.realDisable = gl.disable;\n  this.realColorMask = gl.colorMask;\n  this.realClearColor = gl.clearColor;\n  this.realViewport = gl.viewport;\n  if (!isIOS()) {\n    this.realCanvasWidth = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'width');\n    this.realCanvasHeight = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'height');\n  }\n  this.isPatched = false;\n  this.lastBoundFramebuffer = null;\n  this.cullFace = false;\n  this.depthTest = false;\n  this.blend = false;\n  this.scissorTest = false;\n  this.stencilTest = false;\n  this.viewport = [0, 0, 0, 0];\n  this.colorMask = [true, true, true, true];\n  this.clearColor = [0, 0, 0, 0];\n  this.attribs = {\n    position: 0,\n    texCoord: 1\n  };\n  this.program = linkProgram(gl, distortionVS, distortionFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.viewportOffsetScale = new Float32Array(8);\n  this.setTextureBounds();\n  this.vertexBuffer = gl.createBuffer();\n  this.indexBuffer = gl.createBuffer();\n  this.indexCount = 0;\n  this.renderTarget = gl.createTexture();\n  this.framebuffer = gl.createFramebuffer();\n  this.depthStencilBuffer = null;\n  this.depthBuffer = null;\n  this.stencilBuffer = null;\n  if (this.ctxAttribs.depth && this.ctxAttribs.stencil) {\n    this.depthStencilBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.depth) {\n    this.depthBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.stencil) {\n    this.stencilBuffer = gl.createRenderbuffer();\n  }\n  this.patch();\n  this.onResize();\n}\nCardboardDistorter.prototype.destroy = function () {\n  var gl = this.gl;\n  this.unpatch();\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n  gl.deleteBuffer(this.indexBuffer);\n  gl.deleteTexture(this.renderTarget);\n  gl.deleteFramebuffer(this.framebuffer);\n  if (this.depthStencilBuffer) {\n    gl.deleteRenderbuffer(this.depthStencilBuffer);\n  }\n  if (this.depthBuffer) {\n    gl.deleteRenderbuffer(this.depthBuffer);\n  }\n  if (this.stencilBuffer) {\n    gl.deleteRenderbuffer(this.stencilBuffer);\n  }\n  if (this.cardboardUI) {\n    this.cardboardUI.destroy();\n  }\n};\nCardboardDistorter.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.RENDERBUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0];\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.realClearColor.call(gl, 0, 0, 0, 1);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.framebuffer);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.texImage2D(gl.TEXTURE_2D, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, self.bufferWidth, self.bufferHeight, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, self.renderTarget, 0);\n    if (self.ctxAttribs.depth && self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthStencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.depthStencilBuffer);\n    } else if (self.ctxAttribs.depth) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, self.depthBuffer);\n    } else if (self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.stencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.STENCIL_INDEX8, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.stencilBuffer);\n    }\n    if (!gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      console.error('Framebuffer incomplete!');\n    }\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    self.realClearColor.apply(gl, self.clearColor);\n  });\n  if (this.cardboardUI) {\n    this.cardboardUI.onResize();\n  }\n};\nCardboardDistorter.prototype.patch = function () {\n  if (this.isPatched) {\n    return;\n  }\n  var self = this;\n  var canvas = this.gl.canvas;\n  var gl = this.gl;\n  if (!isIOS()) {\n    canvas.width = getScreenWidth() * this.bufferScale;\n    canvas.height = getScreenHeight() * this.bufferScale;\n    Object.defineProperty(canvas, 'width', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferWidth;\n      },\n      set: function set(value) {\n        self.bufferWidth = value;\n        self.realCanvasWidth.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n    Object.defineProperty(canvas, 'height', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferHeight;\n      },\n      set: function set(value) {\n        self.bufferHeight = value;\n        self.realCanvasHeight.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n  }\n  this.lastBoundFramebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n  if (this.lastBoundFramebuffer == null) {\n    this.lastBoundFramebuffer = this.framebuffer;\n    this.gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n  }\n  this.gl.bindFramebuffer = function (target, framebuffer) {\n    self.lastBoundFramebuffer = framebuffer ? framebuffer : self.framebuffer;\n    self.realBindFramebuffer.call(gl, target, self.lastBoundFramebuffer);\n  };\n  this.cullFace = gl.getParameter(gl.CULL_FACE);\n  this.depthTest = gl.getParameter(gl.DEPTH_TEST);\n  this.blend = gl.getParameter(gl.BLEND);\n  this.scissorTest = gl.getParameter(gl.SCISSOR_TEST);\n  this.stencilTest = gl.getParameter(gl.STENCIL_TEST);\n  gl.enable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = true;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = true;break;\n      case gl.BLEND:\n        self.blend = true;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = true;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = true;break;\n    }\n    self.realEnable.call(gl, pname);\n  };\n  gl.disable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = false;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = false;break;\n      case gl.BLEND:\n        self.blend = false;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = false;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = false;break;\n    }\n    self.realDisable.call(gl, pname);\n  };\n  this.colorMask = gl.getParameter(gl.COLOR_WRITEMASK);\n  gl.colorMask = function (r, g, b, a) {\n    self.colorMask[0] = r;\n    self.colorMask[1] = g;\n    self.colorMask[2] = b;\n    self.colorMask[3] = a;\n    self.realColorMask.call(gl, r, g, b, a);\n  };\n  this.clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);\n  gl.clearColor = function (r, g, b, a) {\n    self.clearColor[0] = r;\n    self.clearColor[1] = g;\n    self.clearColor[2] = b;\n    self.clearColor[3] = a;\n    self.realClearColor.call(gl, r, g, b, a);\n  };\n  this.viewport = gl.getParameter(gl.VIEWPORT);\n  gl.viewport = function (x, y, w, h) {\n    self.viewport[0] = x;\n    self.viewport[1] = y;\n    self.viewport[2] = w;\n    self.viewport[3] = h;\n    self.realViewport.call(gl, x, y, w, h);\n  };\n  this.isPatched = true;\n  safariCssSizeWorkaround(canvas);\n};\nCardboardDistorter.prototype.unpatch = function () {\n  if (!this.isPatched) {\n    return;\n  }\n  var gl = this.gl;\n  var canvas = this.gl.canvas;\n  if (!isIOS()) {\n    Object.defineProperty(canvas, 'width', this.realCanvasWidth);\n    Object.defineProperty(canvas, 'height', this.realCanvasHeight);\n  }\n  canvas.width = this.bufferWidth;\n  canvas.height = this.bufferHeight;\n  gl.bindFramebuffer = this.realBindFramebuffer;\n  gl.enable = this.realEnable;\n  gl.disable = this.realDisable;\n  gl.colorMask = this.realColorMask;\n  gl.clearColor = this.realClearColor;\n  gl.viewport = this.realViewport;\n  if (this.lastBoundFramebuffer == this.framebuffer) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n  this.isPatched = false;\n  setTimeout(function () {\n    safariCssSizeWorkaround(canvas);\n  }, 1);\n};\nCardboardDistorter.prototype.setTextureBounds = function (leftBounds, rightBounds) {\n  if (!leftBounds) {\n    leftBounds = [0, 0, 0.5, 1];\n  }\n  if (!rightBounds) {\n    rightBounds = [0.5, 0, 0.5, 1];\n  }\n  this.viewportOffsetScale[0] = leftBounds[0];\n  this.viewportOffsetScale[1] = leftBounds[1];\n  this.viewportOffsetScale[2] = leftBounds[2];\n  this.viewportOffsetScale[3] = leftBounds[3];\n  this.viewportOffsetScale[4] = rightBounds[0];\n  this.viewportOffsetScale[5] = rightBounds[1];\n  this.viewportOffsetScale[6] = rightBounds[2];\n  this.viewportOffsetScale[7] = rightBounds[3];\n};\nCardboardDistorter.prototype.submitFrame = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [];\n  if (!this.dirtySubmitFrameBindings) {\n    glState.push(gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0);\n  }\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    var positionDivisor = 0;\n    var texCoordDivisor = 0;\n    if (self.instanceExt) {\n      positionDivisor = gl.getVertexAttrib(self.attribs.position, self.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE);\n      texCoordDivisor = gl.getVertexAttrib(self.attribs.texCoord, self.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE);\n    }\n    if (self.cullFace) {\n      self.realDisable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realDisable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realDisable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realDisable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    if (self.ctxAttribs.alpha || isIOS()) {\n      self.realClearColor.call(gl, 0, 0, 0, 1);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    gl.useProgram(self.program);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.enableVertexAttribArray(self.attribs.position);\n    gl.enableVertexAttribArray(self.attribs.texCoord);\n    gl.vertexAttribPointer(self.attribs.position, 2, gl.FLOAT, false, 20, 0);\n    gl.vertexAttribPointer(self.attribs.texCoord, 3, gl.FLOAT, false, 20, 8);\n    if (self.instanceExt) {\n      if (positionDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.position, 0);\n      }\n      if (texCoordDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.texCoord, 0);\n      }\n    }\n    gl.activeTexture(gl.TEXTURE0);\n    gl.uniform1i(self.uniforms.diffuse, 0);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.uniform4fv(self.uniforms.viewportOffsetScale, self.viewportOffsetScale);\n    gl.drawElements(gl.TRIANGLES, self.indexCount, gl.UNSIGNED_SHORT, 0);\n    if (self.cardboardUI) {\n      self.cardboardUI.renderNoState();\n    }\n    self.realBindFramebuffer.call(self.gl, gl.FRAMEBUFFER, self.framebuffer);\n    if (!self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.call(gl, 0, 0, 0, 0);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    if (!self.dirtySubmitFrameBindings) {\n      self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    }\n    if (self.cullFace) {\n      self.realEnable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realEnable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realEnable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realEnable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    if (self.ctxAttribs.alpha || !self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.apply(gl, self.clearColor);\n    }\n    if (self.instanceExt) {\n      if (positionDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.position, positionDivisor);\n      }\n      if (texCoordDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.texCoord, texCoordDivisor);\n      }\n    }\n  });\n  if (isIOS()) {\n    var canvas = gl.canvas;\n    if (canvas.width != self.bufferWidth || canvas.height != self.bufferHeight) {\n      self.bufferWidth = canvas.width;\n      self.bufferHeight = canvas.height;\n      self.onResize();\n    }\n  }\n};\nCardboardDistorter.prototype.updateDeviceInfo = function (deviceInfo) {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = self.computeMeshVertices_(self.meshWidth, self.meshHeight, deviceInfo);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n    if (!self.indexCount) {\n      var indices = self.computeMeshIndices_(self.meshWidth, self.meshHeight);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n      self.indexCount = indices.length;\n    }\n  });\n};\nCardboardDistorter.prototype.computeMeshVertices_ = function (width, height, deviceInfo) {\n  var vertices = new Float32Array(2 * width * height * 5);\n  var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();\n  var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();\n  var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);\n  var vidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        var u = i / (width - 1);\n        var v = j / (height - 1);\n        var s = u;\n        var t = v;\n        var x = lerp(lensFrustum[0], lensFrustum[2], u);\n        var y = lerp(lensFrustum[3], lensFrustum[1], v);\n        var d = Math.sqrt(x * x + y * y);\n        var r = deviceInfo.distortion.distortInverse(d);\n        var p = x * r / d;\n        var q = y * r / d;\n        u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);\n        v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);\n        u = (viewport.x + u * viewport.width - 0.5) * 2.0;\n        v = (viewport.y + v * viewport.height - 0.5) * 2.0;\n        vertices[vidx * 5 + 0] = u;\n        vertices[vidx * 5 + 1] = v;\n        vertices[vidx * 5 + 2] = s;\n        vertices[vidx * 5 + 3] = t;\n        vertices[vidx * 5 + 4] = e;\n      }\n    }\n    var w = lensFrustum[2] - lensFrustum[0];\n    lensFrustum[0] = -(w + lensFrustum[0]);\n    lensFrustum[2] = w - lensFrustum[2];\n    w = noLensFrustum[2] - noLensFrustum[0];\n    noLensFrustum[0] = -(w + noLensFrustum[0]);\n    noLensFrustum[2] = w - noLensFrustum[2];\n    viewport.x = 1 - (viewport.x + viewport.width);\n  }\n  return vertices;\n};\nCardboardDistorter.prototype.computeMeshIndices_ = function (width, height) {\n  var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);\n  var halfwidth = width / 2;\n  var halfheight = height / 2;\n  var vidx = 0;\n  var iidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        if (i == 0 || j == 0) continue;\n        if (i <= halfwidth == j <= halfheight) {\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - 1;\n        } else {\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width - 1;\n        }\n      }\n    }\n  }\n  return indices;\n};\nCardboardDistorter.prototype.getOwnPropertyDescriptor_ = function (proto, attrName) {\n  var descriptor = Object.getOwnPropertyDescriptor(proto, attrName);\n  if (descriptor.get === undefined || descriptor.set === undefined) {\n    descriptor.configurable = true;\n    descriptor.enumerable = true;\n    descriptor.get = function () {\n      return this.getAttribute(attrName);\n    };\n    descriptor.set = function (val) {\n      this.setAttribute(attrName, val);\n    };\n  }\n  return descriptor;\n};\nvar uiVS = ['attribute vec2 position;', 'uniform mat4 projectionMat;', 'void main() {', '  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );', '}'].join('\\n');\nvar uiFS = ['precision mediump float;', 'uniform vec4 color;', 'void main() {', '  gl_FragColor = color;', '}'].join('\\n');\nvar DEG2RAD = Math.PI / 180.0;\nvar kAnglePerGearSection = 60;\nvar kOuterRimEndAngle = 12;\nvar kInnerRimBeginAngle = 20;\nvar kOuterRadius = 1;\nvar kMiddleRadius = 0.75;\nvar kInnerRadius = 0.3125;\nvar kCenterLineThicknessDp = 4;\nvar kButtonWidthDp = 28;\nvar kTouchSlopFactor = 1.5;\nfunction CardboardUI(gl) {\n  this.gl = gl;\n  this.attribs = {\n    position: 0\n  };\n  this.program = linkProgram(gl, uiVS, uiFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.vertexBuffer = gl.createBuffer();\n  this.gearOffset = 0;\n  this.gearVertexCount = 0;\n  this.arrowOffset = 0;\n  this.arrowVertexCount = 0;\n  this.projMat = new Float32Array(16);\n  this.listener = null;\n  this.onResize();\n}\nCardboardUI.prototype.destroy = function () {\n  var gl = this.gl;\n  if (this.listener) {\n    gl.canvas.removeEventListener('click', this.listener, false);\n  }\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n};\nCardboardUI.prototype.listen = function (optionsCallback, backCallback) {\n  var canvas = this.gl.canvas;\n  this.listener = function (event) {\n    var midline = canvas.clientWidth / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor;\n    if (event.clientX > midline - buttonSize && event.clientX < midline + buttonSize && event.clientY > canvas.clientHeight - buttonSize) {\n      optionsCallback(event);\n    }\n    else if (event.clientX < buttonSize && event.clientY < buttonSize) {\n        backCallback(event);\n      }\n  };\n  canvas.addEventListener('click', this.listener, false);\n};\nCardboardUI.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = [];\n    var midline = gl.drawingBufferWidth / 2;\n    var physicalPixels = Math.max(screen.width, screen.height) * window.devicePixelRatio;\n    var scalingRatio = gl.drawingBufferWidth / physicalPixels;\n    var dps = scalingRatio * window.devicePixelRatio;\n    var lineWidth = kCenterLineThicknessDp * dps / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor * dps;\n    var buttonScale = kButtonWidthDp * dps / 2;\n    var buttonBorder = (kButtonWidthDp * kTouchSlopFactor - kButtonWidthDp) * dps;\n    vertices.push(midline - lineWidth, buttonSize);\n    vertices.push(midline - lineWidth, gl.drawingBufferHeight);\n    vertices.push(midline + lineWidth, buttonSize);\n    vertices.push(midline + lineWidth, gl.drawingBufferHeight);\n    self.gearOffset = vertices.length / 2;\n    function addGearSegment(theta, r) {\n      var angle = (90 - theta) * DEG2RAD;\n      var x = Math.cos(angle);\n      var y = Math.sin(angle);\n      vertices.push(kInnerRadius * x * buttonScale + midline, kInnerRadius * y * buttonScale + buttonScale);\n      vertices.push(r * x * buttonScale + midline, r * y * buttonScale + buttonScale);\n    }\n    for (var i = 0; i <= 6; i++) {\n      var segmentTheta = i * kAnglePerGearSection;\n      addGearSegment(segmentTheta, kOuterRadius);\n      addGearSegment(segmentTheta + kOuterRimEndAngle, kOuterRadius);\n      addGearSegment(segmentTheta + kInnerRimBeginAngle, kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kInnerRimBeginAngle), kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kOuterRimEndAngle), kOuterRadius);\n    }\n    self.gearVertexCount = vertices.length / 2 - self.gearOffset;\n    self.arrowOffset = vertices.length / 2;\n    function addArrowVertex(x, y) {\n      vertices.push(buttonBorder + x, gl.drawingBufferHeight - buttonBorder - y);\n    }\n    var angledLineWidth = lineWidth / Math.sin(45 * DEG2RAD);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, 0);\n    addArrowVertex(buttonScale + angledLineWidth, angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, buttonScale * 2);\n    addArrowVertex(buttonScale + angledLineWidth, buttonScale * 2 - angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(angledLineWidth, buttonScale - lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale - lineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale + lineWidth);\n    self.arrowVertexCount = vertices.length / 2 - self.arrowOffset;\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n  });\n};\nCardboardUI.prototype.render = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.CULL_FACE, gl.DEPTH_TEST, gl.BLEND, gl.SCISSOR_TEST, gl.STENCIL_TEST, gl.COLOR_WRITEMASK, gl.VIEWPORT, gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    gl.disable(gl.CULL_FACE);\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.BLEND);\n    gl.disable(gl.SCISSOR_TEST);\n    gl.disable(gl.STENCIL_TEST);\n    gl.colorMask(true, true, true, true);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.renderNoState();\n  });\n};\nCardboardUI.prototype.renderNoState = function () {\n  var gl = this.gl;\n  gl.useProgram(this.program);\n  gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n  gl.enableVertexAttribArray(this.attribs.position);\n  gl.vertexAttribPointer(this.attribs.position, 2, gl.FLOAT, false, 8, 0);\n  gl.uniform4f(this.uniforms.color, 1.0, 1.0, 1.0, 1.0);\n  orthoMatrix(this.projMat, 0, gl.drawingBufferWidth, 0, gl.drawingBufferHeight, 0.1, 1024.0);\n  gl.uniformMatrix4fv(this.uniforms.projectionMat, false, this.projMat);\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount);\n};\nfunction Distortion(coefficients) {\n  this.coefficients = coefficients;\n}\nDistortion.prototype.distortInverse = function (radius) {\n  var r0 = 0;\n  var r1 = 1;\n  var dr0 = radius - this.distort(r0);\n  while (Math.abs(r1 - r0) > 0.0001             ) {\n    var dr1 = radius - this.distort(r1);\n    var r2 = r1 - dr1 * ((r1 - r0) / (dr1 - dr0));\n    r0 = r1;\n    r1 = r2;\n    dr0 = dr1;\n  }\n  return r1;\n};\nDistortion.prototype.distort = function (radius) {\n  var r2 = radius * radius;\n  var ret = 0;\n  for (var i = 0; i < this.coefficients.length; i++) {\n    ret = r2 * (ret + this.coefficients[i]);\n  }\n  return (ret + 1) * radius;\n};\nvar degToRad = Math.PI / 180;\nvar radToDeg = 180 / Math.PI;\nvar Vector3 = function Vector3(x, y, z) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n};\nVector3.prototype = {\n  constructor: Vector3,\n  set: function set(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  },\n  copy: function copy(v) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    return this;\n  },\n  length: function length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  },\n  normalize: function normalize() {\n    var scalar = this.length();\n    if (scalar !== 0) {\n      var invScalar = 1 / scalar;\n      this.multiplyScalar(invScalar);\n    } else {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    }\n    return this;\n  },\n  multiplyScalar: function multiplyScalar(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n  },\n  applyQuaternion: function applyQuaternion(q) {\n    var x = this.x;\n    var y = this.y;\n    var z = this.z;\n    var qx = q.x;\n    var qy = q.y;\n    var qz = q.z;\n    var qw = q.w;\n    var ix = qw * x + qy * z - qz * y;\n    var iy = qw * y + qz * x - qx * z;\n    var iz = qw * z + qx * y - qy * x;\n    var iw = -qx * x - qy * y - qz * z;\n    this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return this;\n  },\n  dot: function dot(v) {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n  },\n  crossVectors: function crossVectors(a, b) {\n    var ax = a.x,\n        ay = a.y,\n        az = a.z;\n    var bx = b.x,\n        by = b.y,\n        bz = b.z;\n    this.x = ay * bz - az * by;\n    this.y = az * bx - ax * bz;\n    this.z = ax * by - ay * bx;\n    return this;\n  }\n};\nvar Quaternion = function Quaternion(x, y, z, w) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n  this.w = w !== undefined ? w : 1;\n};\nQuaternion.prototype = {\n  constructor: Quaternion,\n  set: function set(x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  },\n  copy: function copy(quaternion) {\n    this.x = quaternion.x;\n    this.y = quaternion.y;\n    this.z = quaternion.z;\n    this.w = quaternion.w;\n    return this;\n  },\n  setFromEulerXYZ: function setFromEulerXYZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 + s1 * s2 * c3;\n    this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    return this;\n  },\n  setFromEulerYXZ: function setFromEulerYXZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 - s1 * s2 * c3;\n    this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    return this;\n  },\n  setFromAxisAngle: function setFromAxisAngle(axis, angle) {\n    var halfAngle = angle / 2,\n        s = Math.sin(halfAngle);\n    this.x = axis.x * s;\n    this.y = axis.y * s;\n    this.z = axis.z * s;\n    this.w = Math.cos(halfAngle);\n    return this;\n  },\n  multiply: function multiply(q) {\n    return this.multiplyQuaternions(this, q);\n  },\n  multiplyQuaternions: function multiplyQuaternions(a, b) {\n    var qax = a.x,\n        qay = a.y,\n        qaz = a.z,\n        qaw = a.w;\n    var qbx = b.x,\n        qby = b.y,\n        qbz = b.z,\n        qbw = b.w;\n    this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n    this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n    this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n    this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n    return this;\n  },\n  inverse: function inverse() {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n    this.normalize();\n    return this;\n  },\n  normalize: function normalize() {\n    var l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    if (l === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 1;\n    } else {\n      l = 1 / l;\n      this.x = this.x * l;\n      this.y = this.y * l;\n      this.z = this.z * l;\n      this.w = this.w * l;\n    }\n    return this;\n  },\n  slerp: function slerp(qb, t) {\n    if (t === 0) return this;\n    if (t === 1) return this.copy(qb);\n    var x = this.x,\n        y = this.y,\n        z = this.z,\n        w = this.w;\n    var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;\n    if (cosHalfTheta < 0) {\n      this.w = -qb.w;\n      this.x = -qb.x;\n      this.y = -qb.y;\n      this.z = -qb.z;\n      cosHalfTheta = -cosHalfTheta;\n    } else {\n      this.copy(qb);\n    }\n    if (cosHalfTheta >= 1.0) {\n      this.w = w;\n      this.x = x;\n      this.y = y;\n      this.z = z;\n      return this;\n    }\n    var halfTheta = Math.acos(cosHalfTheta);\n    var sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n    if (Math.abs(sinHalfTheta) < 0.001) {\n      this.w = 0.5 * (w + this.w);\n      this.x = 0.5 * (x + this.x);\n      this.y = 0.5 * (y + this.y);\n      this.z = 0.5 * (z + this.z);\n      return this;\n    }\n    var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n        ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n    this.w = w * ratioA + this.w * ratioB;\n    this.x = x * ratioA + this.x * ratioB;\n    this.y = y * ratioA + this.y * ratioB;\n    this.z = z * ratioA + this.z * ratioB;\n    return this;\n  },\n  setFromUnitVectors: function () {\n    var v1, r;\n    var EPS = 0.000001;\n    return function (vFrom, vTo) {\n      if (v1 === undefined) v1 = new Vector3();\n      r = vFrom.dot(vTo) + 1;\n      if (r < EPS) {\n        r = 0;\n        if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n          v1.set(-vFrom.y, vFrom.x, 0);\n        } else {\n          v1.set(0, -vFrom.z, vFrom.y);\n        }\n      } else {\n        v1.crossVectors(vFrom, vTo);\n      }\n      this.x = v1.x;\n      this.y = v1.y;\n      this.z = v1.z;\n      this.w = r;\n      this.normalize();\n      return this;\n    };\n  }()\n};\nfunction Device(params) {\n  this.width = params.width || getScreenWidth();\n  this.height = params.height || getScreenHeight();\n  this.widthMeters = params.widthMeters;\n  this.heightMeters = params.heightMeters;\n  this.bevelMeters = params.bevelMeters;\n}\nvar DEFAULT_ANDROID = new Device({\n  widthMeters: 0.110,\n  heightMeters: 0.062,\n  bevelMeters: 0.004\n});\nvar DEFAULT_IOS = new Device({\n  widthMeters: 0.1038,\n  heightMeters: 0.0584,\n  bevelMeters: 0.004\n});\nvar Viewers = {\n  CardboardV1: new CardboardViewer({\n    id: 'CardboardV1',\n    label: 'Cardboard I/O 2014',\n    fov: 40,\n    interLensDistance: 0.060,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.042,\n    distortionCoefficients: [0.441, 0.156],\n    inverseCoefficients: [-0.4410035, 0.42756155, -0.4804439, 0.5460139, -0.58821183, 0.5733938, -0.48303202, 0.33299083, -0.17573841, 0.0651772, -0.01488963, 0.001559834]\n  }),\n  CardboardV2: new CardboardViewer({\n    id: 'CardboardV2',\n    label: 'Cardboard I/O 2015',\n    fov: 60,\n    interLensDistance: 0.064,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.039,\n    distortionCoefficients: [0.34, 0.55],\n    inverseCoefficients: [-0.33836704, -0.18162185, 0.862655, -1.2462051, 1.0560602, -0.58208317, 0.21609078, -0.05444823, 0.009177956, -9.904169E-4, 6.183535E-5, -1.6981803E-6]\n  })\n};\nfunction DeviceInfo(deviceParams, additionalViewers) {\n  this.viewer = Viewers.CardboardV2;\n  this.updateDeviceParams(deviceParams);\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n  for (var i = 0; i < additionalViewers.length; i++) {\n    var viewer = additionalViewers[i];\n    Viewers[viewer.id] = new CardboardViewer(viewer);\n  }\n}\nDeviceInfo.prototype.updateDeviceParams = function (deviceParams) {\n  this.device = this.determineDevice_(deviceParams) || this.device;\n};\nDeviceInfo.prototype.getDevice = function () {\n  return this.device;\n};\nDeviceInfo.prototype.setViewer = function (viewer) {\n  this.viewer = viewer;\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n};\nDeviceInfo.prototype.determineDevice_ = function (deviceParams) {\n  if (!deviceParams) {\n    if (isIOS()) {\n      console.warn('Using fallback iOS device measurements.');\n      return DEFAULT_IOS;\n    } else {\n      console.warn('Using fallback Android device measurements.');\n      return DEFAULT_ANDROID;\n    }\n  }\n  var METERS_PER_INCH = 0.0254;\n  var metersPerPixelX = METERS_PER_INCH / deviceParams.xdpi;\n  var metersPerPixelY = METERS_PER_INCH / deviceParams.ydpi;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  return new Device({\n    widthMeters: metersPerPixelX * width,\n    heightMeters: metersPerPixelY * height,\n    bevelMeters: deviceParams.bevelMm * 0.001\n  });\n};\nDeviceInfo.prototype.getDistortedFieldOfViewLeftEye = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var outerDist = (device.widthMeters - viewer.interLensDistance) / 2;\n  var innerDist = viewer.interLensDistance / 2;\n  var bottomDist = viewer.baselineLensDistance - device.bevelMeters;\n  var topDist = device.heightMeters - bottomDist;\n  var outerAngle = radToDeg * Math.atan(distortion.distort(outerDist / eyeToScreenDistance));\n  var innerAngle = radToDeg * Math.atan(distortion.distort(innerDist / eyeToScreenDistance));\n  var bottomAngle = radToDeg * Math.atan(distortion.distort(bottomDist / eyeToScreenDistance));\n  var topAngle = radToDeg * Math.atan(distortion.distort(topDist / eyeToScreenDistance));\n  return {\n    leftDegrees: Math.min(outerAngle, viewer.fov),\n    rightDegrees: Math.min(innerAngle, viewer.fov),\n    downDegrees: Math.min(bottomAngle, viewer.fov),\n    upDegrees: Math.min(topAngle, viewer.fov)\n  };\n};\nDeviceInfo.prototype.getLeftEyeVisibleTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var fovLeft = Math.tan(-degToRad * viewer.fov);\n  var fovTop = Math.tan(degToRad * viewer.fov);\n  var fovRight = Math.tan(degToRad * viewer.fov);\n  var fovBottom = Math.tan(-degToRad * viewer.fov);\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = distortion.distort((centerX - halfWidth) / centerZ);\n  var screenTop = distortion.distort((centerY + halfHeight) / centerZ);\n  var screenRight = distortion.distort((centerX + halfWidth) / centerZ);\n  var screenBottom = distortion.distort((centerY - halfHeight) / centerZ);\n  var result = new Float32Array(4);\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeNoLensTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var result = new Float32Array(4);\n  var fovLeft = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var fovTop = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovRight = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovBottom = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = (centerX - halfWidth) / centerZ;\n  var screenTop = (centerY + halfHeight) / centerZ;\n  var screenRight = (centerX + halfWidth) / centerZ;\n  var screenBottom = (centerY - halfHeight) / centerZ;\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeVisibleScreenRect = function (undistortedFrustum) {\n  var viewer = this.viewer;\n  var device = this.device;\n  var dist = viewer.screenLensDistance;\n  var eyeX = (device.widthMeters - viewer.interLensDistance) / 2;\n  var eyeY = viewer.baselineLensDistance - device.bevelMeters;\n  var left = (undistortedFrustum[0] * dist + eyeX) / device.widthMeters;\n  var top = (undistortedFrustum[1] * dist + eyeY) / device.heightMeters;\n  var right = (undistortedFrustum[2] * dist + eyeX) / device.widthMeters;\n  var bottom = (undistortedFrustum[3] * dist + eyeY) / device.heightMeters;\n  return {\n    x: left,\n    y: bottom,\n    width: right - left,\n    height: top - bottom\n  };\n};\nDeviceInfo.prototype.getFieldOfViewLeftEye = function (opt_isUndistorted) {\n  return opt_isUndistorted ? this.getUndistortedFieldOfViewLeftEye() : this.getDistortedFieldOfViewLeftEye();\n};\nDeviceInfo.prototype.getFieldOfViewRightEye = function (opt_isUndistorted) {\n  var fov = this.getFieldOfViewLeftEye(opt_isUndistorted);\n  return {\n    leftDegrees: fov.rightDegrees,\n    rightDegrees: fov.leftDegrees,\n    upDegrees: fov.upDegrees,\n    downDegrees: fov.downDegrees\n  };\n};\nDeviceInfo.prototype.getUndistortedFieldOfViewLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  return {\n    leftDegrees: radToDeg * Math.atan(p.outerDist),\n    rightDegrees: radToDeg * Math.atan(p.innerDist),\n    downDegrees: radToDeg * Math.atan(p.bottomDist),\n    upDegrees: radToDeg * Math.atan(p.topDist)\n  };\n};\nDeviceInfo.prototype.getUndistortedViewportLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  var viewer = this.viewer;\n  var device = this.device;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var xPxPerTanAngle = device.width / screenWidth;\n  var yPxPerTanAngle = device.height / screenHeight;\n  var x = Math.round((p.eyePosX - p.outerDist) * xPxPerTanAngle);\n  var y = Math.round((p.eyePosY - p.bottomDist) * yPxPerTanAngle);\n  return {\n    x: x,\n    y: y,\n    width: Math.round((p.eyePosX + p.innerDist) * xPxPerTanAngle) - x,\n    height: Math.round((p.eyePosY + p.topDist) * yPxPerTanAngle) - y\n  };\n};\nDeviceInfo.prototype.getUndistortedParams_ = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var halfLensDistance = viewer.interLensDistance / 2 / eyeToScreenDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var eyePosX = screenWidth / 2 - halfLensDistance;\n  var eyePosY = (viewer.baselineLensDistance - device.bevelMeters) / eyeToScreenDistance;\n  var maxFov = viewer.fov;\n  var viewerMax = distortion.distortInverse(Math.tan(degToRad * maxFov));\n  var outerDist = Math.min(eyePosX, viewerMax);\n  var innerDist = Math.min(halfLensDistance, viewerMax);\n  var bottomDist = Math.min(eyePosY, viewerMax);\n  var topDist = Math.min(screenHeight - eyePosY, viewerMax);\n  return {\n    outerDist: outerDist,\n    innerDist: innerDist,\n    topDist: topDist,\n    bottomDist: bottomDist,\n    eyePosX: eyePosX,\n    eyePosY: eyePosY\n  };\n};\nfunction CardboardViewer(params) {\n  this.id = params.id;\n  this.label = params.label;\n  this.fov = params.fov;\n  this.interLensDistance = params.interLensDistance;\n  this.baselineLensDistance = params.baselineLensDistance;\n  this.screenLensDistance = params.screenLensDistance;\n  this.distortionCoefficients = params.distortionCoefficients;\n  this.inverseCoefficients = params.inverseCoefficients;\n}\nDeviceInfo.Viewers = Viewers;\nvar format = 1;\nvar last_updated = \"2019-11-09T17:36:14Z\";\nvar devices = [{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/Nexus 7/*\"},{\"ua\":\"Nexus 7\"}],\"dpi\":[320.8,323],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_X00PD/*\"},{\"ua\":\"ASUS_X00PD\"}],\"dpi\":245,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_X008D/*\"},{\"ua\":\"ASUS_X008D\"}],\"dpi\":282,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_Z00AD/*\"},{\"ua\":\"ASUS_Z00AD\"}],\"dpi\":[403,404.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2 XL/*\"},{\"ua\":\"Pixel 2 XL\"}],\"dpi\":537.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3 XL/*\"},{\"ua\":\"Pixel 3 XL\"}],\"dpi\":[558.5,553.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel XL/*\"},{\"ua\":\"Pixel XL\"}],\"dpi\":[537.9,533],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3/*\"},{\"ua\":\"Pixel 3\"}],\"dpi\":442.4,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2/*\"},{\"ua\":\"Pixel 2\"}],\"dpi\":441,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel/*\"},{\"ua\":\"Pixel\"}],\"dpi\":[432.6,436.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC6435LVW/*\"},{\"ua\":\"HTC6435LVW\"}],\"dpi\":[449.7,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One XL/*\"},{\"ua\":\"HTC One XL\"}],\"dpi\":[315.3,314.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"htc/*/Nexus 9/*\"},{\"ua\":\"Nexus 9\"}],\"dpi\":289,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One M9/*\"},{\"ua\":\"HTC One M9\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One_M8/*\"},{\"ua\":\"HTC One_M8\"}],\"dpi\":[449.7,447.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One/*\"},{\"ua\":\"HTC One\"}],\"dpi\":472.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/Nexus 6P/*\"},{\"ua\":\"Nexus 6P\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BLN-L24/*\"},{\"ua\":\"HONORBLN-L24\"}],\"dpi\":480,\"bw\":4,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BKL-L09/*\"},{\"ua\":\"BKL-L09\"}],\"dpi\":403,\"bw\":3.47,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LENOVO/*/Lenovo PB2-690Y/*\"},{\"ua\":\"Lenovo PB2-690Y\"}],\"dpi\":[457.2,454.713],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5X/*\"},{\"ua\":\"Nexus 5X\"}],\"dpi\":[422,419.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS345/*\"},{\"ua\":\"LGMS345\"}],\"dpi\":[221.7,219.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D800/*\"},{\"ua\":\"LG-D800\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D850/*\"},{\"ua\":\"LG-D850\"}],\"dpi\":[537.9,541.9],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/VS985 4G/*\"},{\"ua\":\"VS985 4G\"}],\"dpi\":[537.9,535.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5/*\"},{\"ua\":\"Nexus 5 B\"}],\"dpi\":[442.4,444.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 4/*\"},{\"ua\":\"Nexus 4\"}],\"dpi\":[319.8,318.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-P769/*\"},{\"ua\":\"LG-P769\"}],\"dpi\":[240.6,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS323/*\"},{\"ua\":\"LGMS323\"}],\"dpi\":[206.6,204.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGLS996/*\"},{\"ua\":\"LGLS996\"}],\"dpi\":[403.4,401.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/4560MMX/*\"},{\"ua\":\"4560MMX\"}],\"dpi\":[240,219.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/A250/*\"},{\"ua\":\"Micromax A250\"}],\"dpi\":[480,446.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/Micromax AQ4501/*\"},{\"ua\":\"Micromax AQ4501\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G5/*\"},{\"ua\":\"Moto G (5) Plus\"}],\"dpi\":[403.4,403],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/DROID RAZR/*\"},{\"ua\":\"DROID RAZR\"}],\"dpi\":[368.1,256.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT830C/*\"},{\"ua\":\"XT830C\"}],\"dpi\":[254,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1021/*\"},{\"ua\":\"XT1021\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1023/*\"},{\"ua\":\"XT1023\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1028/*\"},{\"ua\":\"XT1028\"}],\"dpi\":[326.6,327.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1034/*\"},{\"ua\":\"XT1034\"}],\"dpi\":[326.6,328.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1053/*\"},{\"ua\":\"XT1053\"}],\"dpi\":[315.3,316.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1562/*\"},{\"ua\":\"XT1562\"}],\"dpi\":[403.4,402.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/Nexus 6/*\"},{\"ua\":\"Nexus 6 B\"}],\"dpi\":[494.3,489.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1063/*\"},{\"ua\":\"XT1063\"}],\"dpi\":[295,296.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1064/*\"},{\"ua\":\"XT1064\"}],\"dpi\":[295,295.6],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1092/*\"},{\"ua\":\"XT1092\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1095/*\"},{\"ua\":\"XT1095\"}],\"dpi\":[422,423.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G4/*\"},{\"ua\":\"Moto G (4)\"}],\"dpi\":401,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/A0001/*\"},{\"ua\":\"A0001\"}],\"dpi\":[403.4,401],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1001/*\"},{\"ua\":\"ONE E1001\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1003/*\"},{\"ua\":\"ONE E1003\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1005/*\"},{\"ua\":\"ONE E1005\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2001/*\"},{\"ua\":\"ONE A2001\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2003/*\"},{\"ua\":\"ONE A2003\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2005/*\"},{\"ua\":\"ONE A2005\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3000/*\"},{\"ua\":\"ONEPLUS A3000\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3003/*\"},{\"ua\":\"ONEPLUS A3003\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3010/*\"},{\"ua\":\"ONEPLUS A3010\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A5000/*\"},{\"ua\":\"ONEPLUS A5000 \"}],\"dpi\":[403.411,399.737],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A5010/*\"},{\"ua\":\"ONEPLUS A5010\"}],\"dpi\":[403,400],\"bw\":2,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6000/*\"},{\"ua\":\"ONEPLUS A6000\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6003/*\"},{\"ua\":\"ONEPLUS A6003\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6010/*\"},{\"ua\":\"ONEPLUS A6010\"}],\"dpi\":401,\"bw\":2,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6013/*\"},{\"ua\":\"ONEPLUS A6013\"}],\"dpi\":401,\"bw\":2,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OPPO/*/X909/*\"},{\"ua\":\"X909\"}],\"dpi\":[442.4,444.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9082/*\"},{\"ua\":\"GT-I9082\"}],\"dpi\":[184.7,185.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G360P/*\"},{\"ua\":\"SM-G360P\"}],\"dpi\":[196.7,205.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Nexus S/*\"},{\"ua\":\"Nexus S\"}],\"dpi\":[234.5,229.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[304.8,303.9],\"bw\":5,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T230NU/*\"},{\"ua\":\"SM-T230NU\"}],\"dpi\":216,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-T399/*\"},{\"ua\":\"SGH-T399\"}],\"dpi\":[217.7,231.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-M919/*\"},{\"ua\":\"SGH-M919\"}],\"dpi\":[440.8,437.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N9005/*\"},{\"ua\":\"SM-N9005\"}],\"dpi\":[386.4,387],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SM-N900A/*\"},{\"ua\":\"SAMSUNG-SM-N900A\"}],\"dpi\":[386.4,387.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9500/*\"},{\"ua\":\"GT-I9500\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9505/*\"},{\"ua\":\"GT-I9505\"}],\"dpi\":439.4,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900F/*\"},{\"ua\":\"SM-G900F\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900M/*\"},{\"ua\":\"SM-G900M\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G800F/*\"},{\"ua\":\"SM-G800F\"}],\"dpi\":326.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G906S/*\"},{\"ua\":\"SM-G906S\"}],\"dpi\":[562.7,572.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[306.7,304.8],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T535/*\"},{\"ua\":\"SM-T535\"}],\"dpi\":[142.6,136.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920C/*\"},{\"ua\":\"SM-N920C\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920P/*\"},{\"ua\":\"SM-N920P\"}],\"dpi\":[386.3655,390.144],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920W8/*\"},{\"ua\":\"SM-N920W8\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300I/*\"},{\"ua\":\"GT-I9300I\"}],\"dpi\":[304.8,305.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9195/*\"},{\"ua\":\"GT-I9195\"}],\"dpi\":[249.4,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-L520/*\"},{\"ua\":\"SPH-L520\"}],\"dpi\":[249.4,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SGH-I717/*\"},{\"ua\":\"SAMSUNG-SGH-I717\"}],\"dpi\":285.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-D710/*\"},{\"ua\":\"SPH-D710\"}],\"dpi\":[217.7,204.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-N7100/*\"},{\"ua\":\"GT-N7100\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SCH-I605/*\"},{\"ua\":\"SCH-I605\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Galaxy Nexus/*\"},{\"ua\":\"Galaxy Nexus\"}],\"dpi\":[315.3,314.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910H/*\"},{\"ua\":\"SM-N910H\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910C/*\"},{\"ua\":\"SM-N910C\"}],\"dpi\":[515.2,520.2],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G130M/*\"},{\"ua\":\"SM-G130M\"}],\"dpi\":[165.9,164.8],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G928I/*\"},{\"ua\":\"SM-G928I\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920F/*\"},{\"ua\":\"SM-G920F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920P/*\"},{\"ua\":\"SM-G920P\"}],\"dpi\":[522.5,577],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925F/*\"},{\"ua\":\"SM-G925F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925V/*\"},{\"ua\":\"SM-G925V\"}],\"dpi\":[522.5,576.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G930F/*\"},{\"ua\":\"SM-G930F\"}],\"dpi\":576.6,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G935F/*\"},{\"ua\":\"SM-G935F\"}],\"dpi\":533,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G950F/*\"},{\"ua\":\"SM-G950F\"}],\"dpi\":[562.707,565.293],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955U/*\"},{\"ua\":\"SM-G955U\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955F/*\"},{\"ua\":\"SM-G955F\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960F/*\"},{\"ua\":\"SM-G960F\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G9600/*\"},{\"ua\":\"SM-G9600\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960T/*\"},{\"ua\":\"SM-G960T\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960N/*\"},{\"ua\":\"SM-G960N\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960U/*\"},{\"ua\":\"SM-G960U\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G9608/*\"},{\"ua\":\"SM-G9608\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960FD/*\"},{\"ua\":\"SM-G960FD\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960W/*\"},{\"ua\":\"SM-G960W\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G965F/*\"},{\"ua\":\"SM-G965F\"}],\"dpi\":529,\"bw\":2,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/C6903/*\"},{\"ua\":\"C6903\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/D6653/*\"},{\"ua\":\"D6653\"}],\"dpi\":[428.6,427.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6653/*\"},{\"ua\":\"E6653\"}],\"dpi\":[428.6,425.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6853/*\"},{\"ua\":\"E6853\"}],\"dpi\":[403.4,401.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/SGP321/*\"},{\"ua\":\"SGP321\"}],\"dpi\":[224.7,224.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"TCT/*/ALCATEL ONE TOUCH Fierce/*\"},{\"ua\":\"ALCATEL ONE TOUCH Fierce\"}],\"dpi\":[240,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"THL/*/thl 5000/*\"},{\"ua\":\"thl 5000\"}],\"dpi\":[480,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Fly/*/IQ4412/*\"},{\"ua\":\"IQ4412\"}],\"dpi\":307.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"ZTE/*/ZTE Blade L2/*\"},{\"ua\":\"ZTE Blade L2\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"BENEVE/*/VR518/*\"},{\"ua\":\"VR518\"}],\"dpi\":480,\"bw\":3,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[640,960]}],\"dpi\":[325.1,328.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[640,1136]}],\"dpi\":[317.1,320.2],\"bw\":3,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[750,1334]}],\"dpi\":326.4,\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1242,2208]}],\"dpi\":[453.6,458.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2001]}],\"dpi\":[410.9,415.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2436]}],\"dpi\":458,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/EML-L29/*\"},{\"ua\":\"EML-L29\"}],\"dpi\":428,\"bw\":3.45,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Nokia/*/Nokia 7.1/*\"},{\"ua\":\"Nokia 7.1\"}],\"dpi\":[432,431.9],\"bw\":3,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[1242,2688]}],\"dpi\":458,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G570M/*\"},{\"ua\":\"SM-G570M\"}],\"dpi\":320,\"bw\":3.684,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G970F/*\"},{\"ua\":\"SM-G970F\"}],\"dpi\":438,\"bw\":2.281,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G973F/*\"},{\"ua\":\"SM-G973F\"}],\"dpi\":550,\"bw\":2.002,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G975F/*\"},{\"ua\":\"SM-G975F\"}],\"dpi\":522,\"bw\":2.054,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G977F/*\"},{\"ua\":\"SM-G977F\"}],\"dpi\":505,\"bw\":2.334,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[828,1792]}],\"dpi\":326,\"bw\":5,\"ac\":500}];\nvar DPDB_CACHE = {\n\tformat: format,\n\tlast_updated: last_updated,\n\tdevices: devices\n};\nfunction Dpdb(url, onDeviceParamsUpdated) {\n  this.dpdb = DPDB_CACHE;\n  this.recalculateDeviceParams_();\n  if (url) {\n    this.onDeviceParamsUpdated = onDeviceParamsUpdated;\n    var xhr = new XMLHttpRequest();\n    var obj = this;\n    xhr.open('GET', url, true);\n    xhr.addEventListener('load', function () {\n      obj.loading = false;\n      if (xhr.status >= 200 && xhr.status <= 299) {\n        obj.dpdb = JSON.parse(xhr.response);\n        obj.recalculateDeviceParams_();\n      } else {\n        console.error('Error loading online DPDB!');\n      }\n    });\n    xhr.send();\n  }\n}\nDpdb.prototype.getDeviceParams = function () {\n  return this.deviceParams;\n};\nDpdb.prototype.recalculateDeviceParams_ = function () {\n  var newDeviceParams = this.calcDeviceParams_();\n  if (newDeviceParams) {\n    this.deviceParams = newDeviceParams;\n    if (this.onDeviceParamsUpdated) {\n      this.onDeviceParamsUpdated(this.deviceParams);\n    }\n  } else {\n    console.error('Failed to recalculate device parameters.');\n  }\n};\nDpdb.prototype.calcDeviceParams_ = function () {\n  var db = this.dpdb;\n  if (!db) {\n    console.error('DPDB not available.');\n    return null;\n  }\n  if (db.format != 1) {\n    console.error('DPDB has unexpected format version.');\n    return null;\n  }\n  if (!db.devices || !db.devices.length) {\n    console.error('DPDB does not have a devices section.');\n    return null;\n  }\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  if (!db.devices) {\n    console.error('DPDB has no devices section.');\n    return null;\n  }\n  for (var i = 0; i < db.devices.length; i++) {\n    var device = db.devices[i];\n    if (!device.rules) {\n      console.warn('Device[' + i + '] has no rules section.');\n      continue;\n    }\n    if (device.type != 'ios' && device.type != 'android') {\n      console.warn('Device[' + i + '] has invalid type.');\n      continue;\n    }\n    if (isIOS() != (device.type == 'ios')) continue;\n    var matched = false;\n    for (var j = 0; j < device.rules.length; j++) {\n      var rule = device.rules[j];\n      if (this.ruleMatches_(rule, userAgent, width, height)) {\n        matched = true;\n        break;\n      }\n    }\n    if (!matched) continue;\n    var xdpi = device.dpi[0] || device.dpi;\n    var ydpi = device.dpi[1] || device.dpi;\n    return new DeviceParams({ xdpi: xdpi, ydpi: ydpi, bevelMm: device.bw });\n  }\n  console.warn('No DPDB device match.');\n  return null;\n};\nDpdb.prototype.ruleMatches_ = function (rule, ua, screenWidth, screenHeight) {\n  if (!rule.ua && !rule.res) return false;\n  if (rule.ua && rule.ua.substring(0, 2) === 'SM') rule.ua = rule.ua.substring(0, 7);\n  if (rule.ua && ua.indexOf(rule.ua) < 0) return false;\n  if (rule.res) {\n    if (!rule.res[0] || !rule.res[1]) return false;\n    var resX = rule.res[0];\n    var resY = rule.res[1];\n    if (Math.min(screenWidth, screenHeight) != Math.min(resX, resY) || Math.max(screenWidth, screenHeight) != Math.max(resX, resY)) {\n      return false;\n    }\n  }\n  return true;\n};\nfunction DeviceParams(params) {\n  this.xdpi = params.xdpi;\n  this.ydpi = params.ydpi;\n  this.bevelMm = params.bevelMm;\n}\nfunction SensorSample(sample, timestampS) {\n  this.set(sample, timestampS);\n}\nSensorSample.prototype.set = function (sample, timestampS) {\n  this.sample = sample;\n  this.timestampS = timestampS;\n};\nSensorSample.prototype.copy = function (sensorSample) {\n  this.set(sensorSample.sample, sensorSample.timestampS);\n};\nfunction ComplementaryFilter(kFilter, isDebug) {\n  this.kFilter = kFilter;\n  this.isDebug = isDebug;\n  this.currentAccelMeasurement = new SensorSample();\n  this.currentGyroMeasurement = new SensorSample();\n  this.previousGyroMeasurement = new SensorSample();\n  if (isIOS()) {\n    this.filterQ = new Quaternion(-1, 0, 0, 1);\n  } else {\n    this.filterQ = new Quaternion(1, 0, 0, 1);\n  }\n  this.previousFilterQ = new Quaternion();\n  this.previousFilterQ.copy(this.filterQ);\n  this.accelQ = new Quaternion();\n  this.isOrientationInitialized = false;\n  this.estimatedGravity = new Vector3();\n  this.measuredGravity = new Vector3();\n  this.gyroIntegralQ = new Quaternion();\n}\nComplementaryFilter.prototype.addAccelMeasurement = function (vector, timestampS) {\n  this.currentAccelMeasurement.set(vector, timestampS);\n};\nComplementaryFilter.prototype.addGyroMeasurement = function (vector, timestampS) {\n  this.currentGyroMeasurement.set(vector, timestampS);\n  var deltaT = timestampS - this.previousGyroMeasurement.timestampS;\n  if (isTimestampDeltaValid(deltaT)) {\n    this.run_();\n  }\n  this.previousGyroMeasurement.copy(this.currentGyroMeasurement);\n};\nComplementaryFilter.prototype.run_ = function () {\n  if (!this.isOrientationInitialized) {\n    this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample);\n    this.previousFilterQ.copy(this.accelQ);\n    this.isOrientationInitialized = true;\n    return;\n  }\n  var deltaT = this.currentGyroMeasurement.timestampS - this.previousGyroMeasurement.timestampS;\n  var gyroDeltaQ = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, deltaT);\n  this.gyroIntegralQ.multiply(gyroDeltaQ);\n  this.filterQ.copy(this.previousFilterQ);\n  this.filterQ.multiply(gyroDeltaQ);\n  var invFilterQ = new Quaternion();\n  invFilterQ.copy(this.filterQ);\n  invFilterQ.inverse();\n  this.estimatedGravity.set(0, 0, -1);\n  this.estimatedGravity.applyQuaternion(invFilterQ);\n  this.estimatedGravity.normalize();\n  this.measuredGravity.copy(this.currentAccelMeasurement.sample);\n  this.measuredGravity.normalize();\n  var deltaQ = new Quaternion();\n  deltaQ.setFromUnitVectors(this.estimatedGravity, this.measuredGravity);\n  deltaQ.inverse();\n  if (this.isDebug) {\n    console.log('Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)', radToDeg * getQuaternionAngle(deltaQ), this.estimatedGravity.x.toFixed(1), this.estimatedGravity.y.toFixed(1), this.estimatedGravity.z.toFixed(1), this.measuredGravity.x.toFixed(1), this.measuredGravity.y.toFixed(1), this.measuredGravity.z.toFixed(1));\n  }\n  var targetQ = new Quaternion();\n  targetQ.copy(this.filterQ);\n  targetQ.multiply(deltaQ);\n  this.filterQ.slerp(targetQ, 1 - this.kFilter);\n  this.previousFilterQ.copy(this.filterQ);\n};\nComplementaryFilter.prototype.getOrientation = function () {\n  return this.filterQ;\n};\nComplementaryFilter.prototype.accelToQuaternion_ = function (accel) {\n  var normAccel = new Vector3();\n  normAccel.copy(accel);\n  normAccel.normalize();\n  var quat = new Quaternion();\n  quat.setFromUnitVectors(new Vector3(0, 0, -1), normAccel);\n  quat.inverse();\n  return quat;\n};\nComplementaryFilter.prototype.gyroToQuaternionDelta_ = function (gyro, dt) {\n  var quat = new Quaternion();\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  quat.setFromAxisAngle(axis, gyro.length() * dt);\n  return quat;\n};\nfunction PosePredictor(predictionTimeS, isDebug) {\n  this.predictionTimeS = predictionTimeS;\n  this.isDebug = isDebug;\n  this.previousQ = new Quaternion();\n  this.previousTimestampS = null;\n  this.deltaQ = new Quaternion();\n  this.outQ = new Quaternion();\n}\nPosePredictor.prototype.getPrediction = function (currentQ, gyro, timestampS) {\n  if (!this.previousTimestampS) {\n    this.previousQ.copy(currentQ);\n    this.previousTimestampS = timestampS;\n    return currentQ;\n  }\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  var angularSpeed = gyro.length();\n  if (angularSpeed < degToRad * 20) {\n    if (this.isDebug) {\n      console.log('Moving slowly, at %s deg/s: no prediction', (radToDeg * angularSpeed).toFixed(1));\n    }\n    this.outQ.copy(currentQ);\n    this.previousQ.copy(currentQ);\n    return this.outQ;\n  }\n  var predictAngle = angularSpeed * this.predictionTimeS;\n  this.deltaQ.setFromAxisAngle(axis, predictAngle);\n  this.outQ.copy(this.previousQ);\n  this.outQ.multiply(this.deltaQ);\n  this.previousQ.copy(currentQ);\n  this.previousTimestampS = timestampS;\n  return this.outQ;\n};\nfunction FusionPoseSensor(kFilter, predictionTime, yawOnly, isDebug) {\n  this.yawOnly = yawOnly;\n  this.accelerometer = new Vector3();\n  this.gyroscope = new Vector3();\n  this.filter = new ComplementaryFilter(kFilter, isDebug);\n  this.posePredictor = new PosePredictor(predictionTime, isDebug);\n  this.isFirefoxAndroid = isFirefoxAndroid();\n  this.isIOS = isIOS();\n  var chromeVersion = getChromeVersion();\n  this.isDeviceMotionInRadians = !this.isIOS && chromeVersion && chromeVersion < 66;\n  this.isWithoutDeviceMotion = isChromeWithoutDeviceMotion() || isSafariWithoutDeviceMotion();\n  this.filterToWorldQ = new Quaternion();\n  if (isIOS()) {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), Math.PI / 2);\n  } else {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n  }\n  this.inverseWorldToScreenQ = new Quaternion();\n  this.worldToScreenQ = new Quaternion();\n  this.originalPoseAdjustQ = new Quaternion();\n  this.originalPoseAdjustQ.setFromAxisAngle(new Vector3(0, 0, 1), -window.orientation * Math.PI / 180);\n  this.setScreenTransform_();\n  if (isLandscapeMode()) {\n    this.filterToWorldQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ = new Quaternion();\n  this.orientationOut_ = new Float32Array(4);\n  this.start();\n}\nFusionPoseSensor.prototype.getPosition = function () {\n  return null;\n};\nFusionPoseSensor.prototype.getOrientation = function () {\n  var orientation = void 0;\n  if (this.isWithoutDeviceMotion && this._deviceOrientationQ) {\n    this.deviceOrientationFixQ = this.deviceOrientationFixQ || function () {\n      var z = new Quaternion().setFromAxisAngle(new Vector3(0, 0, -1), 0);\n      var y = new Quaternion();\n      if (window.orientation === -90) {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / -2);\n      } else {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / 2);\n      }\n      return z.multiply(y);\n    }();\n    this.deviceOrientationFilterToWorldQ = this.deviceOrientationFilterToWorldQ || function () {\n      var q = new Quaternion();\n      q.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n      return q;\n    }();\n    orientation = this._deviceOrientationQ;\n    var out = new Quaternion();\n    out.copy(orientation);\n    out.multiply(this.deviceOrientationFilterToWorldQ);\n    out.multiply(this.resetQ);\n    out.multiply(this.worldToScreenQ);\n    out.multiplyQuaternions(this.deviceOrientationFixQ, out);\n    if (this.yawOnly) {\n      out.x = 0;\n      out.z = 0;\n      out.normalize();\n    }\n    this.orientationOut_[0] = out.x;\n    this.orientationOut_[1] = out.y;\n    this.orientationOut_[2] = out.z;\n    this.orientationOut_[3] = out.w;\n    return this.orientationOut_;\n  } else {\n    var filterOrientation = this.filter.getOrientation();\n    orientation = this.posePredictor.getPrediction(filterOrientation, this.gyroscope, this.previousTimestampS);\n  }\n  var out = new Quaternion();\n  out.copy(this.filterToWorldQ);\n  out.multiply(this.resetQ);\n  out.multiply(orientation);\n  out.multiply(this.worldToScreenQ);\n  if (this.yawOnly) {\n    out.x = 0;\n    out.z = 0;\n    out.normalize();\n  }\n  this.orientationOut_[0] = out.x;\n  this.orientationOut_[1] = out.y;\n  this.orientationOut_[2] = out.z;\n  this.orientationOut_[3] = out.w;\n  return this.orientationOut_;\n};\nFusionPoseSensor.prototype.resetPose = function () {\n  this.resetQ.copy(this.filter.getOrientation());\n  this.resetQ.x = 0;\n  this.resetQ.y = 0;\n  this.resetQ.z *= -1;\n  this.resetQ.normalize();\n  if (isLandscapeMode()) {\n    this.resetQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ.multiply(this.originalPoseAdjustQ);\n};\nFusionPoseSensor.prototype.onDeviceOrientation_ = function (e) {\n  this._deviceOrientationQ = this._deviceOrientationQ || new Quaternion();\n  var alpha = e.alpha,\n      beta = e.beta,\n      gamma = e.gamma;\n  alpha = (alpha || 0) * Math.PI / 180;\n  beta = (beta || 0) * Math.PI / 180;\n  gamma = (gamma || 0) * Math.PI / 180;\n  this._deviceOrientationQ.setFromEulerYXZ(beta, alpha, -gamma);\n};\nFusionPoseSensor.prototype.onDeviceMotion_ = function (deviceMotion) {\n  this.updateDeviceMotion_(deviceMotion);\n};\nFusionPoseSensor.prototype.updateDeviceMotion_ = function (deviceMotion) {\n  var accGravity = deviceMotion.accelerationIncludingGravity;\n  var rotRate = deviceMotion.rotationRate;\n  var timestampS = deviceMotion.timeStamp / 1000;\n  var deltaS = timestampS - this.previousTimestampS;\n  if (deltaS < 0) {\n    warnOnce('fusion-pose-sensor:invalid:non-monotonic', 'Invalid timestamps detected: non-monotonic timestamp from devicemotion');\n    this.previousTimestampS = timestampS;\n    return;\n  } else if (deltaS <= MIN_TIMESTEP || deltaS > MAX_TIMESTEP) {\n    warnOnce('fusion-pose-sensor:invalid:outside-threshold', 'Invalid timestamps detected: Timestamp from devicemotion outside expected range.');\n    this.previousTimestampS = timestampS;\n    return;\n  }\n  this.accelerometer.set(-accGravity.x, -accGravity.y, -accGravity.z);\n  if (rotRate) {\n    if (isR7()) {\n      this.gyroscope.set(-rotRate.beta, rotRate.alpha, rotRate.gamma);\n    } else {\n      this.gyroscope.set(rotRate.alpha, rotRate.beta, rotRate.gamma);\n    }\n    if (!this.isDeviceMotionInRadians) {\n      this.gyroscope.multiplyScalar(Math.PI / 180);\n    }\n    this.filter.addGyroMeasurement(this.gyroscope, timestampS);\n  }\n  this.filter.addAccelMeasurement(this.accelerometer, timestampS);\n  this.previousTimestampS = timestampS;\n};\nFusionPoseSensor.prototype.onOrientationChange_ = function (screenOrientation) {\n  this.setScreenTransform_();\n};\nFusionPoseSensor.prototype.onMessage_ = function (event) {\n  var message = event.data;\n  if (!message || !message.type) {\n    return;\n  }\n  var type = message.type.toLowerCase();\n  if (type !== 'devicemotion') {\n    return;\n  }\n  this.updateDeviceMotion_(message.deviceMotionEvent);\n};\nFusionPoseSensor.prototype.setScreenTransform_ = function () {\n  this.worldToScreenQ.set(0, 0, 0, 1);\n  switch (window.orientation) {\n    case 0:\n      break;\n    case 90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), -Math.PI / 2);\n      break;\n    case -90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), Math.PI / 2);\n      break;\n    case 180:\n      break;\n  }\n  this.inverseWorldToScreenQ.copy(this.worldToScreenQ);\n  this.inverseWorldToScreenQ.inverse();\n};\nFusionPoseSensor.prototype.start = function () {\n  this.onDeviceMotionCallback_ = this.onDeviceMotion_.bind(this);\n  this.onOrientationChangeCallback_ = this.onOrientationChange_.bind(this);\n  this.onMessageCallback_ = this.onMessage_.bind(this);\n  this.onDeviceOrientationCallback_ = this.onDeviceOrientation_.bind(this);\n  if (isIOS() && isInsideCrossOriginIFrame()) {\n    window.addEventListener('message', this.onMessageCallback_);\n  }\n  window.addEventListener('orientationchange', this.onOrientationChangeCallback_);\n  if (this.isWithoutDeviceMotion) {\n    window.addEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  } else {\n    window.addEventListener('devicemotion', this.onDeviceMotionCallback_);\n  }\n};\nFusionPoseSensor.prototype.stop = function () {\n  window.removeEventListener('devicemotion', this.onDeviceMotionCallback_);\n  window.removeEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  window.removeEventListener('orientationchange', this.onOrientationChangeCallback_);\n  window.removeEventListener('message', this.onMessageCallback_);\n};\nvar SENSOR_FREQUENCY = 60;\nvar X_AXIS = new Vector3(1, 0, 0);\nvar Z_AXIS = new Vector3(0, 0, 1);\nvar SENSOR_TO_VR = new Quaternion();\nSENSOR_TO_VR.setFromAxisAngle(X_AXIS, -Math.PI / 2);\nSENSOR_TO_VR.multiply(new Quaternion().setFromAxisAngle(Z_AXIS, Math.PI / 2));\nvar PoseSensor = function () {\n  function PoseSensor(config) {\n    classCallCheck(this, PoseSensor);\n    this.config = config;\n    this.sensor = null;\n    this.fusionSensor = null;\n    this._out = new Float32Array(4);\n    this.api = null;\n    this.errors = [];\n    this._sensorQ = new Quaternion();\n    this._outQ = new Quaternion();\n    this._onSensorRead = this._onSensorRead.bind(this);\n    this._onSensorError = this._onSensorError.bind(this);\n    this.init();\n  }\n  createClass(PoseSensor, [{\n    key: 'init',\n    value: function init() {\n      var sensor = null;\n      try {\n        sensor = new RelativeOrientationSensor({\n          frequency: SENSOR_FREQUENCY,\n          referenceFrame: 'screen'\n        });\n        sensor.addEventListener('error', this._onSensorError);\n      } catch (error) {\n        this.errors.push(error);\n        if (error.name === 'SecurityError') {\n          console.error('Cannot construct sensors due to the Feature Policy');\n          console.warn('Attempting to fall back using \"devicemotion\"; however this will ' + 'fail in the future without correct permissions.');\n          this.useDeviceMotion();\n        } else if (error.name === 'ReferenceError') {\n          this.useDeviceMotion();\n        } else {\n          console.error(error);\n        }\n      }\n      if (sensor) {\n        this.api = 'sensor';\n        this.sensor = sensor;\n        this.sensor.addEventListener('reading', this._onSensorRead);\n        this.sensor.start();\n      }\n    }\n  }, {\n    key: 'useDeviceMotion',\n    value: function useDeviceMotion() {\n      this.api = 'devicemotion';\n      this.fusionSensor = new FusionPoseSensor(this.config.K_FILTER, this.config.PREDICTION_TIME_S, this.config.YAW_ONLY, this.config.DEBUG);\n      if (this.sensor) {\n        this.sensor.removeEventListener('reading', this._onSensorRead);\n        this.sensor.removeEventListener('error', this._onSensorError);\n        this.sensor = null;\n      }\n    }\n  }, {\n    key: 'getOrientation',\n    value: function getOrientation() {\n      if (this.fusionSensor) {\n        return this.fusionSensor.getOrientation();\n      }\n      if (!this.sensor || !this.sensor.quaternion) {\n        this._out[0] = this._out[1] = this._out[2] = 0;\n        this._out[3] = 1;\n        return this._out;\n      }\n      var q = this.sensor.quaternion;\n      this._sensorQ.set(q[0], q[1], q[2], q[3]);\n      var out = this._outQ;\n      out.copy(SENSOR_TO_VR);\n      out.multiply(this._sensorQ);\n      if (this.config.YAW_ONLY) {\n        out.x = out.z = 0;\n        out.normalize();\n      }\n      this._out[0] = out.x;\n      this._out[1] = out.y;\n      this._out[2] = out.z;\n      this._out[3] = out.w;\n      return this._out;\n    }\n  }, {\n    key: '_onSensorError',\n    value: function _onSensorError(event) {\n      this.errors.push(event.error);\n      if (event.error.name === 'NotAllowedError') {\n        console.error('Permission to access sensor was denied');\n      } else if (event.error.name === 'NotReadableError') {\n        console.error('Sensor could not be read');\n      } else {\n        console.error(event.error);\n      }\n      this.useDeviceMotion();\n    }\n  }, {\n    key: '_onSensorRead',\n    value: function _onSensorRead() {}\n  }]);\n  return PoseSensor;\n}();\nvar rotateInstructionsAsset = \"<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>\";\nfunction RotateInstructions() {\n  this.loadIcon_();\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.top = 0;\n  s.right = 0;\n  s.bottom = 0;\n  s.left = 0;\n  s.backgroundColor = 'gray';\n  s.fontFamily = 'sans-serif';\n  s.zIndex = 1000000;\n  var img = document.createElement('img');\n  img.src = this.icon;\n  var s = img.style;\n  s.marginLeft = '25%';\n  s.marginTop = '25%';\n  s.width = '50%';\n  overlay.appendChild(img);\n  var text = document.createElement('div');\n  var s = text.style;\n  s.textAlign = 'center';\n  s.fontSize = '16px';\n  s.lineHeight = '24px';\n  s.margin = '24px 25%';\n  s.width = '50%';\n  text.innerHTML = 'Place your phone into your Cardboard viewer.';\n  overlay.appendChild(text);\n  var snackbar = document.createElement('div');\n  var s = snackbar.style;\n  s.backgroundColor = '#CFD8DC';\n  s.position = 'fixed';\n  s.bottom = 0;\n  s.width = '100%';\n  s.height = '48px';\n  s.padding = '14px 24px';\n  s.boxSizing = 'border-box';\n  s.color = '#656A6B';\n  overlay.appendChild(snackbar);\n  var snackbarText = document.createElement('div');\n  snackbarText.style.float = 'left';\n  snackbarText.innerHTML = 'No Cardboard viewer?';\n  var snackbarButton = document.createElement('a');\n  snackbarButton.href = 'https://www.google.com/get/cardboard/get-cardboard/';\n  snackbarButton.innerHTML = 'get one';\n  snackbarButton.target = '_blank';\n  var s = snackbarButton.style;\n  s.float = 'right';\n  s.fontWeight = 600;\n  s.textTransform = 'uppercase';\n  s.borderLeft = '1px solid gray';\n  s.paddingLeft = '24px';\n  s.textDecoration = 'none';\n  s.color = '#656A6B';\n  snackbar.appendChild(snackbarText);\n  snackbar.appendChild(snackbarButton);\n  this.overlay = overlay;\n  this.text = text;\n  this.hide();\n}\nRotateInstructions.prototype.show = function (parent) {\n  if (!parent && !this.overlay.parentElement) {\n    document.body.appendChild(this.overlay);\n  } else if (parent) {\n    if (this.overlay.parentElement && this.overlay.parentElement != parent) this.overlay.parentElement.removeChild(this.overlay);\n    parent.appendChild(this.overlay);\n  }\n  this.overlay.style.display = 'block';\n  var img = this.overlay.querySelector('img');\n  var s = img.style;\n  if (isLandscapeMode()) {\n    s.width = '20%';\n    s.marginLeft = '40%';\n    s.marginTop = '3%';\n  } else {\n    s.width = '50%';\n    s.marginLeft = '25%';\n    s.marginTop = '25%';\n  }\n};\nRotateInstructions.prototype.hide = function () {\n  this.overlay.style.display = 'none';\n};\nRotateInstructions.prototype.showTemporarily = function (ms, parent) {\n  this.show(parent);\n  this.timer = setTimeout(this.hide.bind(this), ms);\n};\nRotateInstructions.prototype.disableShowTemporarily = function () {\n  clearTimeout(this.timer);\n};\nRotateInstructions.prototype.update = function () {\n  this.disableShowTemporarily();\n  if (!isLandscapeMode() && isMobile()) {\n    this.show();\n  } else {\n    this.hide();\n  }\n};\nRotateInstructions.prototype.loadIcon_ = function () {\n  this.icon = dataUri('image/svg+xml', rotateInstructionsAsset);\n};\nvar DEFAULT_VIEWER = 'CardboardV1';\nvar VIEWER_KEY = 'WEBVR_CARDBOARD_VIEWER';\nvar CLASS_NAME = 'webvr-polyfill-viewer-selector';\nfunction ViewerSelector(defaultViewer) {\n  try {\n    this.selectedKey = localStorage.getItem(VIEWER_KEY);\n  } catch (error) {\n    console.error('Failed to load viewer profile: %s', error);\n  }\n  if (!this.selectedKey) {\n    this.selectedKey = defaultViewer || DEFAULT_VIEWER;\n  }\n  this.dialog = this.createDialog_(DeviceInfo.Viewers);\n  this.root = null;\n  this.onChangeCallbacks_ = [];\n}\nViewerSelector.prototype.show = function (root) {\n  this.root = root;\n  root.appendChild(this.dialog);\n  var selected = this.dialog.querySelector('#' + this.selectedKey);\n  selected.checked = true;\n  this.dialog.style.display = 'block';\n};\nViewerSelector.prototype.hide = function () {\n  if (this.root && this.root.contains(this.dialog)) {\n    this.root.removeChild(this.dialog);\n  }\n  this.dialog.style.display = 'none';\n};\nViewerSelector.prototype.getCurrentViewer = function () {\n  return DeviceInfo.Viewers[this.selectedKey];\n};\nViewerSelector.prototype.getSelectedKey_ = function () {\n  var input = this.dialog.querySelector('input[name=field]:checked');\n  if (input) {\n    return input.id;\n  }\n  return null;\n};\nViewerSelector.prototype.onChange = function (cb) {\n  this.onChangeCallbacks_.push(cb);\n};\nViewerSelector.prototype.fireOnChange_ = function (viewer) {\n  for (var i = 0; i < this.onChangeCallbacks_.length; i++) {\n    this.onChangeCallbacks_[i](viewer);\n  }\n};\nViewerSelector.prototype.onSave_ = function () {\n  this.selectedKey = this.getSelectedKey_();\n  if (!this.selectedKey || !DeviceInfo.Viewers[this.selectedKey]) {\n    console.error('ViewerSelector.onSave_: this should never happen!');\n    return;\n  }\n  this.fireOnChange_(DeviceInfo.Viewers[this.selectedKey]);\n  try {\n    localStorage.setItem(VIEWER_KEY, this.selectedKey);\n  } catch (error) {\n    console.error('Failed to save viewer profile: %s', error);\n  }\n  this.hide();\n};\nViewerSelector.prototype.createDialog_ = function (options) {\n  var container = document.createElement('div');\n  container.classList.add(CLASS_NAME);\n  container.style.display = 'none';\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.left = 0;\n  s.top = 0;\n  s.width = '100%';\n  s.height = '100%';\n  s.background = 'rgba(0, 0, 0, 0.3)';\n  overlay.addEventListener('click', this.hide.bind(this));\n  var width = 280;\n  var dialog = document.createElement('div');\n  var s = dialog.style;\n  s.boxSizing = 'border-box';\n  s.position = 'fixed';\n  s.top = '24px';\n  s.left = '50%';\n  s.marginLeft = -width / 2 + 'px';\n  s.width = width + 'px';\n  s.padding = '24px';\n  s.overflow = 'hidden';\n  s.background = '#fafafa';\n  s.fontFamily = \"'Roboto', sans-serif\";\n  s.boxShadow = '0px 5px 20px #666';\n  dialog.appendChild(this.createH1_('Select your viewer'));\n  for (var id in options) {\n    dialog.appendChild(this.createChoice_(id, options[id].label));\n  }\n  dialog.appendChild(this.createButton_('Save', this.onSave_.bind(this)));\n  container.appendChild(overlay);\n  container.appendChild(dialog);\n  return container;\n};\nViewerSelector.prototype.createH1_ = function (name) {\n  var h1 = document.createElement('h1');\n  var s = h1.style;\n  s.color = 'black';\n  s.fontSize = '20px';\n  s.fontWeight = 'bold';\n  s.marginTop = 0;\n  s.marginBottom = '24px';\n  h1.innerHTML = name;\n  return h1;\n};\nViewerSelector.prototype.createChoice_ = function (id, name) {\n  var div = document.createElement('div');\n  div.style.marginTop = '8px';\n  div.style.color = 'black';\n  var input = document.createElement('input');\n  input.style.fontSize = '30px';\n  input.setAttribute('id', id);\n  input.setAttribute('type', 'radio');\n  input.setAttribute('value', id);\n  input.setAttribute('name', 'field');\n  var label = document.createElement('label');\n  label.style.marginLeft = '4px';\n  label.setAttribute('for', id);\n  label.innerHTML = name;\n  div.appendChild(input);\n  div.appendChild(label);\n  return div;\n};\nViewerSelector.prototype.createButton_ = function (label, onclick) {\n  var button = document.createElement('button');\n  button.innerHTML = label;\n  var s = button.style;\n  s.float = 'right';\n  s.textTransform = 'uppercase';\n  s.color = '#1094f7';\n  s.fontSize = '14px';\n  s.letterSpacing = 0;\n  s.border = 0;\n  s.background = 'none';\n  s.marginTop = '16px';\n  button.addEventListener('click', onclick);\n  return button;\n};\nvar commonjsGlobal$$1 = typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : typeof self !== 'undefined' ? self : {};\nfunction unwrapExports$$1 (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nfunction createCommonjsModule$$1(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\nvar NoSleep = createCommonjsModule$$1(function (module, exports) {\n(function webpackUniversalModuleDefinition(root, factory) {\n\tmodule.exports = factory();\n})(commonjsGlobal$$1, function() {\nreturn          (function(modules) {\n         \tvar installedModules = {};\n         \tfunction __webpack_require__(moduleId) {\n         \t\tif(installedModules[moduleId]) {\n         \t\t\treturn installedModules[moduleId].exports;\n         \t\t}\n         \t\tvar module = installedModules[moduleId] = {\n         \t\t\ti: moduleId,\n         \t\t\tl: false,\n         \t\t\texports: {}\n         \t\t};\n         \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n         \t\tmodule.l = true;\n         \t\treturn module.exports;\n         \t}\n         \t__webpack_require__.m = modules;\n         \t__webpack_require__.c = installedModules;\n         \t__webpack_require__.d = function(exports, name, getter) {\n         \t\tif(!__webpack_require__.o(exports, name)) {\n         \t\t\tObject.defineProperty(exports, name, {\n         \t\t\t\tconfigurable: false,\n         \t\t\t\tenumerable: true,\n         \t\t\t\tget: getter\n         \t\t\t});\n         \t\t}\n         \t};\n         \t__webpack_require__.n = function(module) {\n         \t\tvar getter = module && module.__esModule ?\n         \t\t\tfunction getDefault() { return module['default']; } :\n         \t\t\tfunction getModuleExports() { return module; };\n         \t\t__webpack_require__.d(getter, 'a', getter);\n         \t\treturn getter;\n         \t};\n         \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n         \t__webpack_require__.p = \"\";\n         \treturn __webpack_require__(__webpack_require__.s = 0);\n         })\n         ([\n      (function(module, exports, __webpack_require__) {\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar mediaFile = __webpack_require__(1);\nvar oldIOS = typeof navigator !== 'undefined' && parseFloat(('' + (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '')) < 10 && !window.MSStream;\nvar NoSleep = function () {\n  function NoSleep() {\n    _classCallCheck(this, NoSleep);\n    if (oldIOS) {\n      this.noSleepTimer = null;\n    } else {\n      this.noSleepVideo = document.createElement('video');\n      this.noSleepVideo.setAttribute('playsinline', '');\n      this.noSleepVideo.setAttribute('src', mediaFile);\n      this.noSleepVideo.addEventListener('timeupdate', function (e) {\n        if (this.noSleepVideo.currentTime > 0.5) {\n          this.noSleepVideo.currentTime = Math.random();\n        }\n      }.bind(this));\n    }\n  }\n  _createClass(NoSleep, [{\n    key: 'enable',\n    value: function enable() {\n      if (oldIOS) {\n        this.disable();\n        this.noSleepTimer = window.setInterval(function () {\n          window.location.href = '/';\n          window.setTimeout(window.stop, 0);\n        }, 15000);\n      } else {\n        this.noSleepVideo.play();\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      if (oldIOS) {\n        if (this.noSleepTimer) {\n          window.clearInterval(this.noSleepTimer);\n          this.noSleepTimer = null;\n        }\n      } else {\n        this.noSleepVideo.pause();\n      }\n    }\n  }]);\n  return NoSleep;\n}();\nmodule.exports = NoSleep;\n      }),\n      (function(module, exports, __webpack_require__) {\nmodule.exports = 'data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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';\n      })\n         ]);\n});\n});\nvar NoSleep$1 = unwrapExports$$1(NoSleep);\nvar nextDisplayId = 1000;\nvar defaultLeftBounds = [0, 0, 0.5, 1];\nvar defaultRightBounds = [0.5, 0, 0.5, 1];\nvar raf = window.requestAnimationFrame;\nvar caf = window.cancelAnimationFrame;\nfunction VRFrameData() {\n  this.leftProjectionMatrix = new Float32Array(16);\n  this.leftViewMatrix = new Float32Array(16);\n  this.rightProjectionMatrix = new Float32Array(16);\n  this.rightViewMatrix = new Float32Array(16);\n  this.pose = null;\n}\nfunction VRDisplayCapabilities(config) {\n  Object.defineProperties(this, {\n    hasPosition: {\n      writable: false, enumerable: true, value: config.hasPosition\n    },\n    hasExternalDisplay: {\n      writable: false, enumerable: true, value: config.hasExternalDisplay\n    },\n    canPresent: {\n      writable: false, enumerable: true, value: config.canPresent\n    },\n    maxLayers: {\n      writable: false, enumerable: true, value: config.maxLayers\n    },\n    hasOrientation: {\n      enumerable: true, get: function get() {\n        deprecateWarning('VRDisplayCapabilities.prototype.hasOrientation', 'VRDisplay.prototype.getFrameData');\n        return config.hasOrientation;\n      }\n    }\n  });\n}\nfunction VRDisplay(config) {\n  config = config || {};\n  var USE_WAKELOCK = 'wakelock' in config ? config.wakelock : true;\n  this.isPolyfilled = true;\n  this.displayId = nextDisplayId++;\n  this.displayName = '';\n  this.depthNear = 0.01;\n  this.depthFar = 10000.0;\n  this.isPresenting = false;\n  Object.defineProperty(this, 'isConnected', {\n    get: function get() {\n      deprecateWarning('VRDisplay.prototype.isConnected', 'VRDisplayCapabilities.prototype.hasExternalDisplay');\n      return false;\n    }\n  });\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: false,\n    hasExternalDisplay: false,\n    canPresent: false,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.waitingForPresent_ = false;\n  this.layer_ = null;\n  this.originalParent_ = null;\n  this.fullscreenElement_ = null;\n  this.fullscreenWrapper_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n  if (USE_WAKELOCK && isMobile()) {\n    this.wakelock_ = new NoSleep$1();\n  }\n}\nVRDisplay.prototype.getFrameData = function (frameData) {\n  return frameDataFromPose(frameData, this._getPose(), this);\n};\nVRDisplay.prototype.getPose = function () {\n  deprecateWarning('VRDisplay.prototype.getPose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.resetPose = function () {\n  deprecateWarning('VRDisplay.prototype.resetPose');\n  return this._resetPose();\n};\nVRDisplay.prototype.getImmediatePose = function () {\n  deprecateWarning('VRDisplay.prototype.getImmediatePose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.requestAnimationFrame = function (callback) {\n  return raf(callback);\n};\nVRDisplay.prototype.cancelAnimationFrame = function (id) {\n  return caf(id);\n};\nVRDisplay.prototype.wrapForFullscreen = function (element) {\n  if (isIOS()) {\n    return element;\n  }\n  if (!this.fullscreenWrapper_) {\n    this.fullscreenWrapper_ = document.createElement('div');\n    var cssProperties = ['height: ' + Math.min(screen.height, screen.width) + 'px !important', 'top: 0 !important', 'left: 0 !important', 'right: 0 !important', 'border: 0', 'margin: 0', 'padding: 0', 'z-index: 999999 !important', 'position: fixed'];\n    this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');\n    this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');\n  }\n  if (this.fullscreenElement_ == element) {\n    return this.fullscreenWrapper_;\n  }\n  if (this.fullscreenElement_) {\n    if (this.originalParent_) {\n      this.originalParent_.appendChild(this.fullscreenElement_);\n    } else {\n      this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_);\n    }\n  }\n  this.fullscreenElement_ = element;\n  this.originalParent_ = element.parentElement;\n  if (!this.originalParent_) {\n    document.body.appendChild(element);\n  }\n  if (!this.fullscreenWrapper_.parentElement) {\n    var parent = this.fullscreenElement_.parentElement;\n    parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);\n    parent.removeChild(this.fullscreenElement_);\n  }\n  this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);\n  this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');\n  var self = this;\n  function applyFullscreenElementStyle() {\n    if (!self.fullscreenElement_) {\n      return;\n    }\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0', 'width: ' + Math.max(screen.width, screen.height) + 'px', 'height: ' + Math.min(screen.height, screen.width) + 'px', 'border: 0', 'margin: 0', 'padding: 0'];\n    self.fullscreenElement_.setAttribute('style', cssProperties.join('; ') + ';');\n  }\n  applyFullscreenElementStyle();\n  return this.fullscreenWrapper_;\n};\nVRDisplay.prototype.removeFullscreenWrapper = function () {\n  if (!this.fullscreenElement_) {\n    return;\n  }\n  var element = this.fullscreenElement_;\n  if (this.fullscreenElementCachedStyle_) {\n    element.setAttribute('style', this.fullscreenElementCachedStyle_);\n  } else {\n    element.removeAttribute('style');\n  }\n  this.fullscreenElement_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  var parent = this.fullscreenWrapper_.parentElement;\n  this.fullscreenWrapper_.removeChild(element);\n  if (this.originalParent_ === parent) {\n    parent.insertBefore(element, this.fullscreenWrapper_);\n  }\n  else if (this.originalParent_) {\n      this.originalParent_.appendChild(element);\n    }\n  parent.removeChild(this.fullscreenWrapper_);\n  return element;\n};\nVRDisplay.prototype.requestPresent = function (layers) {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  if (!(layers instanceof Array)) {\n    deprecateWarning('VRDisplay.prototype.requestPresent with non-array argument', 'an array of VRLayers as the first argument');\n    layers = [layers];\n  }\n  return new Promise(function (resolve, reject) {\n    if (!self.capabilities.canPresent) {\n      reject(new Error('VRDisplay is not capable of presenting.'));\n      return;\n    }\n    if (layers.length == 0 || layers.length > self.capabilities.maxLayers) {\n      reject(new Error('Invalid number of layers.'));\n      return;\n    }\n    var incomingLayer = layers[0];\n    if (!incomingLayer.source) {\n      resolve();\n      return;\n    }\n    var leftBounds = incomingLayer.leftBounds || defaultLeftBounds;\n    var rightBounds = incomingLayer.rightBounds || defaultRightBounds;\n    if (wasPresenting) {\n      var layer = self.layer_;\n      if (layer.source !== incomingLayer.source) {\n        layer.source = incomingLayer.source;\n      }\n      for (var i = 0; i < 4; i++) {\n        layer.leftBounds[i] = leftBounds[i];\n        layer.rightBounds[i] = rightBounds[i];\n      }\n      self.wrapForFullscreen(self.layer_.source);\n      self.updatePresent_();\n      resolve();\n      return;\n    }\n    self.layer_ = {\n      predistorted: incomingLayer.predistorted,\n      source: incomingLayer.source,\n      leftBounds: leftBounds.slice(0),\n      rightBounds: rightBounds.slice(0)\n    };\n    self.waitingForPresent_ = false;\n    if (self.layer_ && self.layer_.source) {\n      var fullscreenElement = self.wrapForFullscreen(self.layer_.source);\n      var onFullscreenChange = function onFullscreenChange() {\n        var actualFullscreenElement = getFullscreenElement();\n        self.isPresenting = fullscreenElement === actualFullscreenElement;\n        if (self.isPresenting) {\n          if (screen.orientation && screen.orientation.lock) {\n            screen.orientation.lock('landscape-primary').catch(function (error) {\n              console.error('screen.orientation.lock() failed due to', error.message);\n            });\n          }\n          self.waitingForPresent_ = false;\n          self.beginPresent_();\n          resolve();\n        } else {\n          if (screen.orientation && screen.orientation.unlock) {\n            screen.orientation.unlock();\n          }\n          self.removeFullscreenWrapper();\n          self.disableWakeLock();\n          self.endPresent_();\n          self.removeFullscreenListeners_();\n        }\n        self.fireVRDisplayPresentChange_();\n      };\n      var onFullscreenError = function onFullscreenError() {\n        if (!self.waitingForPresent_) {\n          return;\n        }\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.disableWakeLock();\n        self.waitingForPresent_ = false;\n        self.isPresenting = false;\n        reject(new Error('Unable to present.'));\n      };\n      self.addFullscreenListeners_(fullscreenElement, onFullscreenChange, onFullscreenError);\n      if (requestFullscreen(fullscreenElement)) {\n        self.enableWakeLock();\n        self.waitingForPresent_ = true;\n      } else if (isIOS() || isWebViewAndroid()) {\n        self.enableWakeLock();\n        self.isPresenting = true;\n        self.beginPresent_();\n        self.fireVRDisplayPresentChange_();\n        resolve();\n      }\n    }\n    if (!self.waitingForPresent_ && !isIOS()) {\n      exitFullscreen();\n      reject(new Error('Unable to present.'));\n    }\n  });\n};\nVRDisplay.prototype.exitPresent = function () {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  this.isPresenting = false;\n  this.layer_ = null;\n  this.disableWakeLock();\n  return new Promise(function (resolve, reject) {\n    if (wasPresenting) {\n      if (!exitFullscreen() && isIOS()) {\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      if (isWebViewAndroid()) {\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      resolve();\n    } else {\n      reject(new Error('Was not presenting to VRDisplay.'));\n    }\n  });\n};\nVRDisplay.prototype.getLayers = function () {\n  if (this.layer_) {\n    return [this.layer_];\n  }\n  return [];\n};\nVRDisplay.prototype.fireVRDisplayPresentChange_ = function () {\n  var event = new CustomEvent('vrdisplaypresentchange', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.fireVRDisplayConnect_ = function () {\n  var event = new CustomEvent('vrdisplayconnect', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.addFullscreenListeners_ = function (element, changeHandler, errorHandler) {\n  this.removeFullscreenListeners_();\n  this.fullscreenEventTarget_ = element;\n  this.fullscreenChangeHandler_ = changeHandler;\n  this.fullscreenErrorHandler_ = errorHandler;\n  if (changeHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenchange', changeHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenchange', changeHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenchange', changeHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenchange', changeHandler, false);\n    }\n  }\n  if (errorHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenerror', errorHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenerror', errorHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenerror', errorHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenerror', errorHandler, false);\n    }\n  }\n};\nVRDisplay.prototype.removeFullscreenListeners_ = function () {\n  if (!this.fullscreenEventTarget_) return;\n  var element = this.fullscreenEventTarget_;\n  if (this.fullscreenChangeHandler_) {\n    var changeHandler = this.fullscreenChangeHandler_;\n    element.removeEventListener('fullscreenchange', changeHandler, false);\n    element.removeEventListener('webkitfullscreenchange', changeHandler, false);\n    document.removeEventListener('mozfullscreenchange', changeHandler, false);\n    element.removeEventListener('msfullscreenchange', changeHandler, false);\n  }\n  if (this.fullscreenErrorHandler_) {\n    var errorHandler = this.fullscreenErrorHandler_;\n    element.removeEventListener('fullscreenerror', errorHandler, false);\n    element.removeEventListener('webkitfullscreenerror', errorHandler, false);\n    document.removeEventListener('mozfullscreenerror', errorHandler, false);\n    element.removeEventListener('msfullscreenerror', errorHandler, false);\n  }\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n};\nVRDisplay.prototype.enableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.enable();\n  }\n};\nVRDisplay.prototype.disableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.disable();\n  }\n};\nVRDisplay.prototype.beginPresent_ = function () {\n};\nVRDisplay.prototype.endPresent_ = function () {\n};\nVRDisplay.prototype.submitFrame = function (pose) {\n};\nVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  return null;\n};\nvar config = {\n  ADDITIONAL_VIEWERS: [],\n  DEFAULT_VIEWER: '',\n  MOBILE_WAKE_LOCK: true,\n  DEBUG: false,\n  DPDB_URL: 'https://dpdb.webvr.rocks/dpdb.json',\n  K_FILTER: 0.98,\n  PREDICTION_TIME_S: 0.040,\n  CARDBOARD_UI_DISABLED: false,\n  ROTATE_INSTRUCTIONS_DISABLED: false,\n  YAW_ONLY: false,\n  BUFFER_SCALE: 0.5,\n  DIRTY_SUBMIT_FRAME_BINDINGS: false\n};\nvar Eye = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\nfunction CardboardVRDisplay(config$$1) {\n  var defaults = extend({}, config);\n  config$$1 = extend(defaults, config$$1 || {});\n  VRDisplay.call(this, {\n    wakelock: config$$1.MOBILE_WAKE_LOCK\n  });\n  this.config = config$$1;\n  this.displayName = 'Cardboard VRDisplay';\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: true,\n    hasExternalDisplay: false,\n    canPresent: true,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.bufferScale_ = this.config.BUFFER_SCALE;\n  this.poseSensor_ = new PoseSensor(this.config);\n  this.distorter_ = null;\n  this.cardboardUI_ = null;\n  this.dpdb_ = new Dpdb(this.config.DPDB_URL, this.onDeviceParamsUpdated_.bind(this));\n  this.deviceInfo_ = new DeviceInfo(this.dpdb_.getDeviceParams(), config$$1.ADDITIONAL_VIEWERS);\n  this.viewerSelector_ = new ViewerSelector(config$$1.DEFAULT_VIEWER);\n  this.viewerSelector_.onChange(this.onViewerChanged_.bind(this));\n  this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());\n  if (!this.config.ROTATE_INSTRUCTIONS_DISABLED) {\n    this.rotateInstructions_ = new RotateInstructions();\n  }\n  if (isIOS()) {\n    window.addEventListener('resize', this.onResize_.bind(this));\n  }\n}\nCardboardVRDisplay.prototype = Object.create(VRDisplay.prototype);\nCardboardVRDisplay.prototype._getPose = function () {\n  return {\n    position: null,\n    orientation: this.poseSensor_.getOrientation(),\n    linearVelocity: null,\n    linearAcceleration: null,\n    angularVelocity: null,\n    angularAcceleration: null\n  };\n};\nCardboardVRDisplay.prototype._resetPose = function () {\n  if (this.poseSensor_.resetPose) {\n    this.poseSensor_.resetPose();\n  }\n};\nCardboardVRDisplay.prototype._getFieldOfView = function (whichEye) {\n  var fieldOfView;\n  if (whichEye == Eye.LEFT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewLeftEye();\n  } else if (whichEye == Eye.RIGHT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewRightEye();\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return fieldOfView;\n};\nCardboardVRDisplay.prototype._getEyeOffset = function (whichEye) {\n  var offset;\n  if (whichEye == Eye.LEFT) {\n    offset = [-this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else if (whichEye == Eye.RIGHT) {\n    offset = [this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return offset;\n};\nCardboardVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  var offset = this._getEyeOffset(whichEye);\n  var fieldOfView = this._getFieldOfView(whichEye);\n  var eyeParams = {\n    offset: offset,\n    renderWidth: this.deviceInfo_.device.width * 0.5 * this.bufferScale_,\n    renderHeight: this.deviceInfo_.device.height * this.bufferScale_\n  };\n  Object.defineProperty(eyeParams, 'fieldOfView', {\n    enumerable: true,\n    get: function get() {\n      deprecateWarning('VRFieldOfView', 'VRFrameData\\'s projection matrices');\n      return fieldOfView;\n    }\n  });\n  return eyeParams;\n};\nCardboardVRDisplay.prototype.onDeviceParamsUpdated_ = function (newParams) {\n  if (this.config.DEBUG) {\n    console.log('DPDB reported that device params were updated.');\n  }\n  this.deviceInfo_.updateDeviceParams(newParams);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n};\nCardboardVRDisplay.prototype.updateBounds_ = function () {\n  if (this.layer_ && this.distorter_ && (this.layer_.leftBounds || this.layer_.rightBounds)) {\n    this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds);\n  }\n};\nCardboardVRDisplay.prototype.beginPresent_ = function () {\n  var gl = this.layer_.source.getContext('webgl');\n  if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n  if (!gl) gl = this.layer_.source.getContext('webgl2');\n  if (!gl) return;\n  if (this.layer_.predistorted) {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      gl.canvas.width = getScreenWidth() * this.bufferScale_;\n      gl.canvas.height = getScreenHeight() * this.bufferScale_;\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n  } else {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n    this.distorter_ = new CardboardDistorter(gl, this.cardboardUI_, this.config.BUFFER_SCALE, this.config.DIRTY_SUBMIT_FRAME_BINDINGS);\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.listen(function (e) {\n      this.viewerSelector_.show(this.layer_.source.parentElement);\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this), function (e) {\n      this.exitPresent();\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this));\n  }\n  if (this.rotateInstructions_) {\n    if (isLandscapeMode() && isMobile()) {\n      this.rotateInstructions_.showTemporarily(3000, this.layer_.source.parentElement);\n    } else {\n      this.rotateInstructions_.update();\n    }\n  }\n  this.orientationHandler = this.onOrientationChange_.bind(this);\n  window.addEventListener('orientationchange', this.orientationHandler);\n  this.vrdisplaypresentchangeHandler = this.updateBounds_.bind(this);\n  window.addEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.endPresent_ = function () {\n  if (this.distorter_) {\n    this.distorter_.destroy();\n    this.distorter_ = null;\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.destroy();\n    this.cardboardUI_ = null;\n  }\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.hide();\n  }\n  this.viewerSelector_.hide();\n  window.removeEventListener('orientationchange', this.orientationHandler);\n  window.removeEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n};\nCardboardVRDisplay.prototype.updatePresent_ = function () {\n  this.endPresent_();\n  this.beginPresent_();\n};\nCardboardVRDisplay.prototype.submitFrame = function (pose) {\n  if (this.distorter_) {\n    this.updateBounds_();\n    this.distorter_.submitFrame();\n  } else if (this.cardboardUI_ && this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n    if (!gl) gl = this.layer_.source.getContext('webgl2');\n    var canvas = gl.canvas;\n    if (canvas.width != this.lastWidth || canvas.height != this.lastHeight) {\n      this.cardboardUI_.onResize();\n    }\n    this.lastWidth = canvas.width;\n    this.lastHeight = canvas.height;\n    this.cardboardUI_.render();\n  }\n};\nCardboardVRDisplay.prototype.onOrientationChange_ = function (e) {\n  this.viewerSelector_.hide();\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.update();\n  }\n  this.onResize_();\n};\nCardboardVRDisplay.prototype.onResize_ = function (e) {\n  if (this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n    if (!gl) gl = this.layer_.source.getContext('webgl2');\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0',\n    'width: 100vw', 'height: 100vh', 'border: 0', 'margin: 0',\n    'padding: 0px', 'box-sizing: content-box'];\n    gl.canvas.setAttribute('style', cssProperties.join('; ') + ';');\n    safariCssSizeWorkaround(gl.canvas);\n  }\n};\nCardboardVRDisplay.prototype.onViewerChanged_ = function (viewer) {\n  this.deviceInfo_.setViewer(viewer);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_ = function () {\n  var event = new CustomEvent('vrdisplaydeviceparamschange', {\n    detail: {\n      vrdisplay: this,\n      deviceInfo: this.deviceInfo_\n    }\n  });\n  window.dispatchEvent(event);\n};\nCardboardVRDisplay.VRFrameData = VRFrameData;\nCardboardVRDisplay.VRDisplay = VRDisplay;\nreturn CardboardVRDisplay;\n})));\n});\nvar CardboardVRDisplay = unwrapExports(cardboardVrDisplay);\n\nclass XRDevice extends EventTarget {\n  constructor(global) {\n    super();\n    this.global = global;\n    this.onWindowResize = this.onWindowResize.bind(this);\n    this.global.window.addEventListener('resize', this.onWindowResize);\n    this.environmentBlendMode = 'opaque';\n  }\n  onBaseLayerSet(sessionId, layer) { throw new Error('Not implemented'); }\n  isSessionSupported(mode) { throw new Error('Not implemented'); }\n  isFeatureSupported(featureDescriptor) { throw new Error('Not implemented'); }\n  async requestSession(mode, enabledFeatures) { throw new Error('Not implemented'); }\n  requestAnimationFrame(callback) { throw new Error('Not implemented'); }\n  onFrameStart(sessionId) { throw new Error('Not implemented'); }\n  onFrameEnd(sessionId) { throw new Error('Not implemented'); }\n  doesSessionSupportReferenceSpace(sessionId, type) { throw new Error('Not implemented'); }\n  requestStageBounds() { throw new Error('Not implemented'); }\n  async requestFrameOfReferenceTransform(type, options) {\n    return undefined;\n  }\n  cancelAnimationFrame(handle) { throw new Error('Not implemented'); }\n  endSession(sessionId) { throw new Error('Not implemented'); }\n  getViewport(sessionId, eye, layer, target) { throw new Error('Not implemented'); }\n  getProjectionMatrix(eye) { throw new Error('Not implemented'); }\n  getBasePoseMatrix() { throw new Error('Not implemented'); }\n  getBaseViewMatrix(eye) { throw new Error('Not implemented'); }\n  getInputSources() { throw new Error('Not implemented'); }\n  getInputPose(inputSource, coordinateSystem, poseType) { throw new Error('Not implemented'); }\n  onWindowResize() {\n    this.onWindowResize();\n  }\n}\n\nlet daydream = {\n  mapping: '',\n  profiles: ['google-daydream', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: null,\n    1: null,\n    2: 0\n  },\n};\nlet viveFocus = {\n  mapping: 'xr-standard',\n  profiles: ['htc-vive-focus', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: 1,\n    1: null,\n    2: 0\n  },\n};\nlet oculusGo = {\n  mapping: 'xr-standard',\n  profiles: ['oculus-go', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: 1,\n    1: null,\n    2: 0\n  },\n  gripTransform: {\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet oculusTouch = {\n  mapping: 'xr-standard',\n  displayProfiles: {\n    'Oculus Quest': ['oculus-touch-v2', 'oculus-touch', 'generic-trigger-squeeze-thumbstick']\n  },\n  profiles: ['oculus-touch', 'generic-trigger-squeeze-thumbstick'],\n  axes: {\n    length: 4,\n    0: null,\n    1: null,\n    2: 0,\n    3: 1\n  },\n  buttons: {\n    length: 7,\n    0: 1,\n    1: 2,\n    2: null,\n    3: 0,\n    4: 3,\n    5: 4,\n    6: null\n  },\n  gripTransform: {\n    position: [0, -0.02, 0.04, 1],\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet openVr = {\n  mapping: 'xr-standard',\n  profiles: ['htc-vive', 'generic-trigger-squeeze-touchpad'],\n  displayProfiles: {\n    'HTC Vive': ['htc-vive', 'generic-trigger-squeeze-touchpad'],\n    'HTC Vive DVT': ['htc-vive', 'generic-trigger-squeeze-touchpad'],\n    'Valve Index': ['valve-index', 'generic-trigger-squeeze-touchpad-thumbstick']\n  },\n  buttons: {\n    length: 3,\n    0: 1,\n    1: 2,\n    2: 0\n  },\n  gripTransform: {\n    position: [0, 0, 0.05, 1],\n  },\n  targetRayTransform: {\n    orientation: [Math.PI * -0.08, 0, 0, 1]\n  },\n  userAgentOverrides: {\n    \"Firefox\": {\n      axes: {\n        invert: [1, 3]\n      }\n    }\n  }\n};\nlet samsungGearVR = {\n  mapping: 'xr-standard',\n  profiles: ['samsung-gearvr', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: 1,\n    1: null,\n    2: 0\n  },\n  gripTransform: {\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet samsungOdyssey = {\n  mapping: 'xr-standard',\n  profiles: ['samsung-odyssey', 'microsoft-mixed-reality', 'generic-trigger-squeeze-touchpad-thumbstick'],\n  buttons: {\n    length: 4,\n    0: 1,\n    1: 0,\n    2: 2,\n    3: 4,\n  },\n  gripTransform: {\n    position: [0, -0.02, 0.04, 1],\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet windowsMixedReality = {\n  mapping: 'xr-standard',\n  profiles: ['microsoft-mixed-reality', 'generic-trigger-squeeze-touchpad-thumbstick'],\n  buttons: {\n    length: 4,\n    0: 1,\n    1: 0,\n    2: 2,\n    3: 4,\n  },\n  gripTransform: {\n    position: [0, -0.02, 0.04, 1],\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet GamepadMappings = {\n  'Daydream Controller': daydream,\n  'Gear VR Controller': samsungGearVR,\n  'HTC Vive Focus Controller': viveFocus,\n  'Oculus Go Controller': oculusGo,\n  'Oculus Touch (Right)': oculusTouch,\n  'Oculus Touch (Left)': oculusTouch,\n  'OpenVR Gamepad': openVr,\n  'Spatial Controller (Spatial Interaction Source) 045E-065A': windowsMixedReality,\n  'Spatial Controller (Spatial Interaction Source) 045E-065D': samsungOdyssey,\n  'Windows Mixed Reality (Right)': windowsMixedReality,\n  'Windows Mixed Reality (Left)': windowsMixedReality,\n};\n\nconst HEAD_ELBOW_OFFSET_RIGHTHANDED = fromValues$1(0.155, -0.465, -0.15);\nconst HEAD_ELBOW_OFFSET_LEFTHANDED = fromValues$1(-0.155, -0.465, -0.15);\nconst ELBOW_WRIST_OFFSET = fromValues$1(0, 0, -0.25);\nconst WRIST_CONTROLLER_OFFSET = fromValues$1(0, 0, 0.05);\nconst ARM_EXTENSION_OFFSET = fromValues$1(-0.08, 0.14, 0.08);\nconst ELBOW_BEND_RATIO = 0.4;\nconst EXTENSION_RATIO_WEIGHT = 0.4;\nconst MIN_ANGULAR_SPEED = 0.61;\nconst MIN_ANGLE_DELTA = 0.175;\nconst MIN_EXTENSION_COS = 0.12;\nconst MAX_EXTENSION_COS = 0.87;\nconst RAD_TO_DEG = 180 / Math.PI;\nfunction eulerFromQuaternion(out, q, order) {\n  function clamp(value, min$$1, max$$1) {\n    return (value < min$$1 ? min$$1 : (value > max$$1 ? max$$1 : value));\n  }\n  var sqx = q[0] * q[0];\n  var sqy = q[1] * q[1];\n  var sqz = q[2] * q[2];\n  var sqw = q[3] * q[3];\n  if ( order === 'XYZ' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] - q[1] * q[2] ), ( sqw - sqx - sqy + sqz ) );\n    out[1] = Math.asin(  clamp( 2 * ( q[0] * q[2] + q[1] * q[3] ), -1, 1 ) );\n    out[2] = Math.atan2( 2 * ( q[2] * q[3] - q[0] * q[1] ), ( sqw + sqx - sqy - sqz ) );\n  } else if ( order ===  'YXZ' ) {\n    out[0] = Math.asin(  clamp( 2 * ( q[0] * q[3] - q[1] * q[2] ), -1, 1 ) );\n    out[1] = Math.atan2( 2 * ( q[0] * q[2] + q[1] * q[3] ), ( sqw - sqx - sqy + sqz ) );\n    out[2] = Math.atan2( 2 * ( q[0] * q[1] + q[2] * q[3] ), ( sqw - sqx + sqy - sqz ) );\n  } else if ( order === 'ZXY' ) {\n    out[0] = Math.asin(  clamp( 2 * ( q[0] * q[3] + q[1] * q[2] ), -1, 1 ) );\n    out[1] = Math.atan2( 2 * ( q[1] * q[3] - q[2] * q[0] ), ( sqw - sqx - sqy + sqz ) );\n    out[2] = Math.atan2( 2 * ( q[2] * q[3] - q[0] * q[1] ), ( sqw - sqx + sqy - sqz ) );\n  } else if ( order === 'ZYX' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] + q[2] * q[1] ), ( sqw - sqx - sqy + sqz ) );\n    out[1] = Math.asin(  clamp( 2 * ( q[1] * q[3] - q[0] * q[2] ), -1, 1 ) );\n    out[2] = Math.atan2( 2 * ( q[0] * q[1] + q[2] * q[3] ), ( sqw + sqx - sqy - sqz ) );\n  } else if ( order === 'YZX' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] - q[2] * q[1] ), ( sqw - sqx + sqy - sqz ) );\n    out[1] = Math.atan2( 2 * ( q[1] * q[3] - q[0] * q[2] ), ( sqw + sqx - sqy - sqz ) );\n    out[2] = Math.asin(  clamp( 2 * ( q[0] * q[1] + q[2] * q[3] ), -1, 1 ) );\n  } else if ( order === 'XZY' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] + q[1] * q[2] ), ( sqw - sqx + sqy - sqz ) );\n    out[1] = Math.atan2( 2 * ( q[0] * q[2] + q[1] * q[3] ), ( sqw + sqx - sqy - sqz ) );\n    out[2] = Math.asin(  clamp( 2 * ( q[2] * q[3] - q[0] * q[1] ), -1, 1 ) );\n  } else {\n    console.log('No order given for quaternion to euler conversion.');\n    return;\n  }\n}\nclass OrientationArmModel {\n  constructor() {\n    this.hand = 'right';\n    this.headElbowOffset = HEAD_ELBOW_OFFSET_RIGHTHANDED;\n    this.controllerQ = create$4();\n    this.lastControllerQ = create$4();\n    this.headQ = create$4();\n    this.headPos = create$1();\n    this.elbowPos = create$1();\n    this.wristPos = create$1();\n    this.time = null;\n    this.lastTime = null;\n    this.rootQ = create$4();\n    this.position = create$1();\n  }\n  setHandedness(hand) {\n    if (this.hand != hand) {\n      this.hand = hand;\n      if (this.hand == 'left') {\n        this.headElbowOffset = HEAD_ELBOW_OFFSET_LEFTHANDED;\n      } else {\n        this.headElbowOffset = HEAD_ELBOW_OFFSET_RIGHTHANDED;\n      }\n    }\n  }\n  update(controllerOrientation, headPoseMatrix) {\n    this.time = now$1();\n    if (controllerOrientation) {\n      copy$4(this.lastControllerQ, this.controllerQ);\n      copy$4(this.controllerQ, controllerOrientation);\n    }\n    if (headPoseMatrix) {\n      getTranslation(this.headPos, headPoseMatrix);\n      getRotation(this.headQ, headPoseMatrix);\n    }\n    let headYawQ = this.getHeadYawOrientation_();\n    let angleDelta = this.quatAngle_(this.lastControllerQ, this.controllerQ);\n    let timeDelta = (this.time - this.lastTime) / 1000;\n    let controllerAngularSpeed = angleDelta / timeDelta;\n    if (controllerAngularSpeed > MIN_ANGULAR_SPEED) {\n      slerp(this.rootQ, this.rootQ, headYawQ,\n                 Math.min(angleDelta / MIN_ANGLE_DELTA, 1.0));\n    } else {\n      copy$4(this.rootQ, headYawQ);\n    }\n    let controllerForward = fromValues$1(0, 0, -1.0);\n    transformQuat(controllerForward, controllerForward, this.controllerQ);\n    let controllerDotY = dot(controllerForward, [0, 1, 0]);\n    let extensionRatio = this.clamp_(\n        (controllerDotY - MIN_EXTENSION_COS) / MAX_EXTENSION_COS, 0.0, 1.0);\n    let controllerCameraQ = clone$4(this.rootQ);\n    invert$2(controllerCameraQ, controllerCameraQ);\n    multiply$4(controllerCameraQ, controllerCameraQ, this.controllerQ);\n    let elbowPos = this.elbowPos;\n    copy$1(elbowPos, this.headPos);\n    add$1(elbowPos, elbowPos, this.headElbowOffset);\n    let elbowOffset = clone$1(ARM_EXTENSION_OFFSET);\n    scale$1(elbowOffset, elbowOffset, extensionRatio);\n    add$1(elbowPos, elbowPos, elbowOffset);\n    let totalAngle = this.quatAngle_(controllerCameraQ, create$4());\n    let totalAngleDeg = totalAngle * RAD_TO_DEG;\n    let lerpSuppression = 1 - Math.pow(totalAngleDeg / 180, 4);let elbowRatio = ELBOW_BEND_RATIO;\n    let wristRatio = 1 - ELBOW_BEND_RATIO;\n    let lerpValue = lerpSuppression *\n        (elbowRatio + wristRatio * extensionRatio * EXTENSION_RATIO_WEIGHT);\n    let wristQ = create$4();\n    slerp(wristQ, wristQ, controllerCameraQ, lerpValue);\n    let invWristQ = invert$2(create$4(), wristQ);\n    let elbowQ = clone$4(controllerCameraQ);\n    multiply$4(elbowQ, elbowQ, invWristQ);\n    let wristPos = this.wristPos;\n    copy$1(wristPos, WRIST_CONTROLLER_OFFSET);\n    transformQuat(wristPos, wristPos, wristQ);\n    add$1(wristPos, wristPos, ELBOW_WRIST_OFFSET);\n    transformQuat(wristPos, wristPos, elbowQ);\n    add$1(wristPos, wristPos, elbowPos);\n    let offset = clone$1(ARM_EXTENSION_OFFSET);\n    scale$1(offset, offset, extensionRatio);\n    add$1(this.position, this.wristPos, offset);\n    transformQuat(this.position, this.position, this.rootQ);\n    this.lastTime = this.time;\n  }\n  getPosition() {\n    return this.position;\n  }\n  getHeadYawOrientation_() {\n    let headEuler = create$1();\n    eulerFromQuaternion(headEuler, this.headQ, 'YXZ');\n    let destinationQ = fromEuler(create$4(), 0, headEuler[1] * RAD_TO_DEG, 0);\n    return destinationQ;\n  }\n  clamp_(value, min$$1, max$$1) {\n    return Math.min(Math.max(value, min$$1), max$$1);\n  }\n  quatAngle_(q1, q2) {\n    let vec1 = [0, 0, -1];\n    let vec2 = [0, 0, -1];\n    transformQuat(vec1, vec1, q1);\n    transformQuat(vec2, vec2, q2);\n    return angle(vec1, vec2);\n  }\n}\n\nconst PRIVATE$18 = Symbol('@@webxr-polyfill/XRRemappedGamepad');\nconst PLACEHOLDER_BUTTON = { pressed: false, touched: false, value: 0.0 };\nObject.freeze(PLACEHOLDER_BUTTON);\nclass XRRemappedGamepad {\n  constructor(gamepad, display, map) {\n    if (!map) {\n      map = {};\n    }\n    if (map.userAgentOverrides) {\n      for (let agent in map.userAgentOverrides) {\n        if (navigator.userAgent.includes(agent)) {\n          let override = map.userAgentOverrides[agent];\n          for (let key in override) {\n            if (key in map) {\n              Object.assign(map[key], override[key]);\n            } else {\n              map[key] = override[key];\n            }\n          }\n          break;\n        }\n      }\n    }\n    let axes = new Array(map.axes && map.axes.length ? map.axes.length : gamepad.axes.length);\n    let buttons = new Array(map.buttons && map.buttons.length ? map.buttons.length : gamepad.buttons.length);\n    let gripTransform = null;\n    if (map.gripTransform) {\n      let orientation = map.gripTransform.orientation || [0, 0, 0, 1];\n      gripTransform = create();\n      fromRotationTranslation(\n        gripTransform,\n        normalize$2(orientation, orientation),\n        map.gripTransform.position || [0, 0, 0]\n      );\n    }\n    let targetRayTransform = null;\n    if (map.targetRayTransform) {\n      let orientation =  map.targetRayTransform.orientation || [0, 0, 0, 1];\n      targetRayTransform = create();\n      fromRotationTranslation(\n        targetRayTransform,\n        normalize$2(orientation, orientation),\n        map.targetRayTransform.position || [0, 0, 0]\n      );\n    }\n    let profiles = map.profiles;\n    if (map.displayProfiles) {\n      if (display.displayName in map.displayProfiles) {\n        profiles = map.displayProfiles[display.displayName];\n      }\n    }\n    this[PRIVATE$18] = {\n      gamepad,\n      map,\n      profiles: profiles || [gamepad.id],\n      mapping: map.mapping || gamepad.mapping,\n      axes,\n      buttons,\n      gripTransform,\n      targetRayTransform,\n    };\n    this._update();\n  }\n  _update() {\n    let gamepad = this[PRIVATE$18].gamepad;\n    let map = this[PRIVATE$18].map;\n    let axes = this[PRIVATE$18].axes;\n    for (let i = 0; i < axes.length; ++i) {\n      if (map.axes && i in map.axes) {\n        if (map.axes[i] === null) {\n          axes[i] = 0;\n        } else {\n          axes[i] = gamepad.axes[map.axes[i]];\n        }\n      } else {\n        axes[i] = gamepad.axes[i];\n      }\n    }\n    if (map.axes && map.axes.invert) {\n      for (let axis of map.axes.invert) {\n        if (axis < axes.length) {\n          axes[axis] *= -1;\n        }\n      }\n    }\n    let buttons = this[PRIVATE$18].buttons;\n    for (let i = 0; i < buttons.length; ++i) {\n      if (map.buttons && i in map.buttons) {\n        if (map.buttons[i] === null) {\n          buttons[i] = PLACEHOLDER_BUTTON;\n        } else {\n          buttons[i] = gamepad.buttons[map.buttons[i]];\n        }\n      } else {\n        buttons[i] = gamepad.buttons[i];\n      }\n    }\n  }\n  get id() {\n    return '';\n  }\n  get _profiles() {\n    return this[PRIVATE$18].profiles;\n  }\n  get index() {\n    return -1;\n  }\n  get connected() {\n    return this[PRIVATE$18].gamepad.connected;\n  }\n  get timestamp() {\n    return this[PRIVATE$18].gamepad.timestamp;\n  }\n  get mapping() {\n    return this[PRIVATE$18].mapping;\n  }\n  get axes() {\n    return this[PRIVATE$18].axes;\n  }\n  get buttons() {\n    return this[PRIVATE$18].buttons;\n  }\n  get hapticActuators() {\n    return this[PRIVATE$18].gamepad.hapticActuators;\n  }\n}\nclass GamepadXRInputSource {\n  constructor(polyfill, display, primaryButtonIndex = 0, primarySqueezeButtonIndex = -1) {\n    this.polyfill = polyfill;\n    this.display = display;\n    this.nativeGamepad = null;\n    this.gamepad = null;\n    this.inputSource = new XRInputSource(this);\n    this.lastPosition = create$1();\n    this.emulatedPosition = false;\n    this.basePoseMatrix = create();\n    this.outputMatrix = create();\n    this.primaryButtonIndex = primaryButtonIndex;\n    this.primaryActionPressed = false;\n    this.primarySqueezeButtonIndex = primarySqueezeButtonIndex;\n    this.primarySqueezeActionPressed = false;\n    this.handedness = '';\n    this.targetRayMode = 'gaze';\n    this.armModel = null;\n  }\n  get profiles() {\n    return this.gamepad ? this.gamepad._profiles : [];\n  }\n  updateFromGamepad(gamepad) {\n    if (this.nativeGamepad !== gamepad) {\n      this.nativeGamepad = gamepad;\n      if (gamepad) {\n        this.gamepad = new XRRemappedGamepad(gamepad, this.display, GamepadMappings[gamepad.id]);\n      } else {\n        this.gamepad = null;\n      }\n    }\n    this.handedness = gamepad.hand === '' ? 'none' : gamepad.hand;\n    if (this.gamepad) {\n      this.gamepad._update();\n    }\n    if (gamepad.pose) {\n      this.targetRayMode = 'tracked-pointer';\n      this.emulatedPosition = !gamepad.pose.hasPosition;\n    } else if (gamepad.hand === '') {\n      this.targetRayMode = 'gaze';\n      this.emulatedPosition = false;\n    }\n  }\n  updateBasePoseMatrix() {\n    if (this.nativeGamepad && this.nativeGamepad.pose) {\n      let pose = this.nativeGamepad.pose;\n      let position = pose.position;\n      let orientation = pose.orientation;\n      if (!position && !orientation) {\n        return;\n      }\n      if (!position) {\n        if (!pose.hasPosition) {\n          if (!this.armModel) {\n            this.armModel = new OrientationArmModel();\n          }\n          this.armModel.setHandedness(this.nativeGamepad.hand);\n          this.armModel.update(orientation, this.polyfill.getBasePoseMatrix());\n          position = this.armModel.getPosition();\n        } else {\n          position = this.lastPosition;\n        }\n      } else {\n        this.lastPosition[0] = position[0];\n        this.lastPosition[1] = position[1];\n        this.lastPosition[2] = position[2];\n      }\n      fromRotationTranslation(this.basePoseMatrix, orientation, position);\n    } else {\n      copy(this.basePoseMatrix, this.polyfill.getBasePoseMatrix());\n    }\n    return this.basePoseMatrix;\n  }\n  getXRPose(coordinateSystem, poseType) {\n    this.updateBasePoseMatrix();\n    switch(poseType) {\n      case \"target-ray\":\n        coordinateSystem._transformBasePoseMatrix(this.outputMatrix, this.basePoseMatrix);\n        if (this.gamepad && this.gamepad[PRIVATE$18].targetRayTransform) {\n          multiply(this.outputMatrix, this.outputMatrix, this.gamepad[PRIVATE$18].targetRayTransform);\n        }\n        break;\n      case \"grip\":\n        if (!this.nativeGamepad || !this.nativeGamepad.pose) {\n          return null;\n        }\n        coordinateSystem._transformBasePoseMatrix(this.outputMatrix, this.basePoseMatrix);\n        if (this.gamepad && this.gamepad[PRIVATE$18].gripTransform) {\n          multiply(this.outputMatrix, this.outputMatrix, this.gamepad[PRIVATE$18].gripTransform);\n        }\n        break;\n      default:\n        return null;\n    }\n    coordinateSystem._adjustForOriginOffset(this.outputMatrix);\n    return new XRPose(new XRRigidTransform(this.outputMatrix), this.emulatedPosition);\n  }\n}\n\nconst TEST_ENV = \"production\" === 'test';\nconst EXTRA_PRESENTATION_ATTRIBUTES = {\n  highRefreshRate: true,\n};\nconst PRIMARY_BUTTON_MAP = {\n  oculus: 1,\n  openvr: 1,\n  'spatial controller (spatial interaction source)': 1\n};\nlet SESSION_ID = 0;\nclass Session {\n  constructor(mode, enabledFeatures, polyfillOptions={}) {\n    this.mode = mode;\n    this.enabledFeatures = enabledFeatures;\n    this.outputContext = null;\n    this.immersive = mode == 'immersive-vr' || mode == 'immersive-ar';\n    this.ended = null;\n    this.baseLayer = null;\n    this.id = ++SESSION_ID;\n    this.modifiedCanvasLayer = false;\n    if (this.outputContext && !TEST_ENV) {\n      const renderContextType = polyfillOptions.renderContextType || '2d';\n      this.renderContext = this.outputContext.canvas.getContext(renderContextType);\n    }\n  }\n}\nclass WebVRDevice extends XRDevice {\n  constructor(global, display) {\n    const { canPresent } = display.capabilities;\n    super(global);\n    this.display = display;\n    this.frame = new global.VRFrameData();\n    this.sessions = new Map();\n    this.immersiveSession = null;\n    this.canPresent = canPresent;\n    this.baseModelMatrix = create();\n    this.gamepadInputSources = {};\n    this.tempVec3 = new Float32Array(3);\n    this.onVRDisplayPresentChange = this.onVRDisplayPresentChange.bind(this);\n    global.window.addEventListener('vrdisplaypresentchange', this.onVRDisplayPresentChange);\n    this.CAN_USE_GAMEPAD = global.navigator && ('getGamepads' in global.navigator);\n    this.HAS_BITMAP_SUPPORT = isImageBitmapSupported(global);\n  }\n  get depthNear() { return this.display.depthNear; }\n  set depthNear(val) { this.display.depthNear = val; }\n  get depthFar() { return this.display.depthFar; }\n  set depthFar(val) { this.display.depthFar = val; }\n  onBaseLayerSet(sessionId, layer) {\n    const session = this.sessions.get(sessionId);\n    const canvas = layer.context.canvas;\n    if (session.immersive) {\n      const left = this.display.getEyeParameters('left');\n      const right = this.display.getEyeParameters('right');\n      canvas.width = Math.max(left.renderWidth, right.renderWidth) * 2;\n      canvas.height = Math.max(left.renderHeight, right.renderHeight);\n      this.display.requestPresent([{\n          source: canvas, attributes: EXTRA_PRESENTATION_ATTRIBUTES\n        }]).then(() => {\n        if (!TEST_ENV && !this.global.document.body.contains(canvas)) {\n          session.modifiedCanvasLayer = true;\n          this.global.document.body.appendChild(canvas);\n          applyCanvasStylesForMinimalRendering(canvas);\n        }\n        session.baseLayer = layer;\n      });\n    }\n    else {\n      session.baseLayer = layer;\n    }\n  }\n  isSessionSupported(mode) {\n    if (mode == 'immersive-ar') {\n      return false;\n    }\n    if (mode == 'immersive-vr' && this.canPresent === false) {\n      return false;\n    }\n    return true;\n  }\n  isFeatureSupported(featureDescriptor) {\n    switch(featureDescriptor) {\n      case 'viewer': return true;\n      case 'local': return true;\n      case 'local-floor': return true;\n      case 'bounded': return false;\n      case 'unbounded': return false;\n      default: return false;\n    }\n  }\n  async requestSession(mode, enabledFeatures) {\n    if (!this.isSessionSupported(mode)) {\n      return Promise.reject();\n    }\n    let immersive = mode == 'immersive-vr';\n    if (immersive) {\n      const canvas = this.global.document.createElement('canvas');\n      if (!TEST_ENV) {\n        const ctx = canvas.getContext('webgl');\n      }\n      await this.display.requestPresent([{\n          source: canvas, attributes: EXTRA_PRESENTATION_ATTRIBUTES }]);\n    }\n    const session = new Session(mode, enabledFeatures, {\n      renderContextType: this.HAS_BITMAP_SUPPORT ? 'bitmaprenderer' : '2d'\n    });\n    this.sessions.set(session.id, session);\n    if (immersive) {\n      this.immersiveSession = session;\n      this.dispatchEvent('@@webxr-polyfill/vr-present-start', session.id);\n    }\n    return Promise.resolve(session.id);\n  }\n  requestAnimationFrame(callback) {\n    return this.display.requestAnimationFrame(callback);\n  }\n  getPrimaryButtonIndex(gamepad) {\n    let primaryButton = 0;\n    let name = gamepad.id.toLowerCase();\n    for (let key in PRIMARY_BUTTON_MAP) {\n      if (name.includes(key)) {\n        primaryButton = PRIMARY_BUTTON_MAP[key];\n        break;\n      }\n    }\n    return Math.min(primaryButton, gamepad.buttons.length - 1);\n  }\n  onFrameStart(sessionId, renderState) {\n    this.display.depthNear = renderState.depthNear;\n    this.display.depthFar = renderState.depthFar;\n    this.display.getFrameData(this.frame);\n    const session = this.sessions.get(sessionId);\n    if (session.immersive && this.CAN_USE_GAMEPAD) {\n      let prevInputSources = this.gamepadInputSources;\n      this.gamepadInputSources = {};\n      let gamepads = this.global.navigator.getGamepads();\n      for (let i = 0; i < gamepads.length; ++i) {\n        let gamepad = gamepads[i];\n        if (gamepad && gamepad.displayId > 0) {\n          let inputSourceImpl = prevInputSources[i];\n          if (!inputSourceImpl) {\n            inputSourceImpl = new GamepadXRInputSource(this, this.display, this.getPrimaryButtonIndex(gamepad));\n          }\n          inputSourceImpl.updateFromGamepad(gamepad);\n          this.gamepadInputSources[i] = inputSourceImpl;\n          if (inputSourceImpl.primaryButtonIndex != -1) {\n            let primaryActionPressed = gamepad.buttons[inputSourceImpl.primaryButtonIndex].pressed;\n            if (primaryActionPressed && !inputSourceImpl.primaryActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-select-start', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            } else if (!primaryActionPressed && inputSourceImpl.primaryActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-select-end', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            }\n            inputSourceImpl.primaryActionPressed = primaryActionPressed;\n          }\n          if (inputSourceImpl.primarySqueezeButtonIndex != -1) {\n            let primarySqueezeActionPressed = gamepad.buttons[inputSourceImpl.primarySqueezeButtonIndex].pressed;\n            if (primarySqueezeActionPressed && !inputSourceImpl.primarySqueezeActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-squeeze-start', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            } else if (!primarySqueezeActionPressed && inputSourceImpl.primarySqueezeActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-squeeze-end', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            }\n            inputSourceImpl.primarySqueezeActionPressed = primarySqueezeActionPressed;\n          }\n        }\n      }\n    }\n    if (TEST_ENV) {\n      return;\n    }\n    if (!session.immersive && session.baseLayer) {\n      const canvas = session.baseLayer.context.canvas;\n      perspective(this.frame.leftProjectionMatrix, renderState.inlineVerticalFieldOfView,\n          canvas.width/canvas.height, renderState.depthNear, renderState.depthFar);\n    }\n  }\n  onFrameEnd(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended || !session.baseLayer) {\n      return;\n    }\n    if (session.outputContext &&\n        !(session.immersive && !this.display.capabilities.hasExternalDisplay)) {\n      const mirroring =\n        session.immersive && this.display.capabilities.hasExternalDisplay;\n      const iCanvas = session.baseLayer.context.canvas;\n      const iWidth = mirroring ? iCanvas.width / 2 : iCanvas.width;\n      const iHeight = iCanvas.height;\n      if (!TEST_ENV) {\n        const oCanvas = session.outputContext.canvas;\n        const oWidth = oCanvas.width;\n        const oHeight = oCanvas.height;\n        const renderContext = session.renderContext;\n        if (this.HAS_BITMAP_SUPPORT) {\n          if (iCanvas.transferToImageBitmap) {\n            renderContext.transferFromImageBitmap(iCanvas.transferToImageBitmap());\n          }\n          else {\n            this.global.createImageBitmap(iCanvas, 0, 0, iWidth, iHeight, {\n              resizeWidth: oWidth,\n              resizeHeight: oHeight,\n            }).then(bitmap => renderContext.transferFromImageBitmap(bitmap));\n          }\n        } else {\n          renderContext.drawImage(iCanvas, 0, 0, iWidth, iHeight,\n                                           0, 0, oWidth, oHeight);\n        }\n      }\n    }\n    if (session.immersive && session.baseLayer) {\n      this.display.submitFrame();\n    }\n  }\n  cancelAnimationFrame(handle) {\n    this.display.cancelAnimationFrame(handle);\n  }\n  async endSession(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return;\n    }\n    if (session.immersive) {\n      return this.display.exitPresent();\n    } else {\n      session.ended = true;\n    }\n  }\n  doesSessionSupportReferenceSpace(sessionId, type) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return false;\n    }\n    return session.enabledFeatures.has(type);\n  }\n  requestStageBounds() {\n    if (this.display.stageParameters) {\n      const width = this.display.stageParameters.sizeX;\n      const depth = this.display.stageParameters.sizeZ;\n      const data = [];\n      data.push(-width / 2);\n      data.push(-depth / 2);\n      data.push(width / 2);\n      data.push(-depth / 2);\n      data.push(width / 2);\n      data.push(depth / 2);\n      data.push(-width / 2);\n      data.push(depth / 2);\n      return data;\n    }\n    return null;\n  }\n  async requestFrameOfReferenceTransform(type, options) {\n    if ((type === 'local-floor' || type === 'bounded-floor') &&\n        this.display.stageParameters &&\n        this.display.stageParameters.sittingToStandingTransform) {\n      return this.display.stageParameters.sittingToStandingTransform;\n    }\n    return null;\n  }\n  getProjectionMatrix(eye) {\n    if (eye === 'left') {\n      return this.frame.leftProjectionMatrix;\n    } else if (eye === 'right') {\n      return this.frame.rightProjectionMatrix;\n    } else if (eye === 'none') {\n      return this.frame.leftProjectionMatrix;\n    } else {\n      throw new Error(`eye must be of type 'left' or 'right'`);\n    }\n  }\n  getViewport(sessionId, eye, layer, target) {\n    const session = this.sessions.get(sessionId);\n    const { width, height } = layer.context.canvas;\n    if (!session.immersive) {\n      target.x = target.y = 0;\n      target.width = width;\n      target.height = height;\n      return true;\n    }\n    if (eye === 'left' || eye === 'none') {\n      target.x = 0;\n    } else if (eye === 'right') {\n      target.x = width / 2;\n    } else {\n      return false;\n    }\n    target.y = 0;\n    target.width = width / 2;\n    target.height = height;\n    return true;\n  }\n  getBasePoseMatrix() {\n    let { position, orientation } = this.frame.pose;\n    if (!position && !orientation) {\n      return this.baseModelMatrix;\n    }\n    if (!position) {\n      position = this.tempVec3;\n      position[0] = position[1] = position[2] = 0;\n    }\n    fromRotationTranslation(this.baseModelMatrix, orientation, position);\n    return this.baseModelMatrix;\n  }\n  getBaseViewMatrix(eye) {\n    if (eye === 'left' || eye === 'none') {\n      return this.frame.leftViewMatrix;\n    } else if (eye === 'right') {\n      return this.frame.rightViewMatrix;\n    } else {\n      throw new Error(`eye must be of type 'left' or 'right'`);\n    }\n  }\n  getInputSources() {\n    let inputSources = [];\n    for (let i in this.gamepadInputSources) {\n      inputSources.push(this.gamepadInputSources[i].inputSource);\n    }\n    return inputSources;\n  }\n  getInputPose(inputSource, coordinateSystem, poseType) {\n    if (!coordinateSystem) {\n      return null;\n    }\n    for (let i in this.gamepadInputSources) {\n      let inputSourceImpl = this.gamepadInputSources[i];\n      if (inputSourceImpl.inputSource === inputSource) {\n        return inputSourceImpl.getXRPose(coordinateSystem, poseType);\n      }\n    }\n    return null;\n  }\n  onWindowResize() {\n  }\n  onVRDisplayPresentChange(e) {\n    if (!this.display.isPresenting) {\n      this.sessions.forEach(session => {\n        if (session.immersive && !session.ended) {\n          if (session.modifiedCanvasLayer) {\n            const canvas = session.baseLayer.context.canvas;\n            document.body.removeChild(canvas);\n            canvas.setAttribute('style', '');\n          }\n          if (this.immersiveSession === session) {\n            this.immersiveSession = null;\n          }\n          this.dispatchEvent('@@webxr-polyfill/vr-present-end', session.id);\n        }\n      });\n    }\n  }\n}\n\nclass CardboardXRDevice extends WebVRDevice {\n  constructor(global, cardboardConfig) {\n    const display = new CardboardVRDisplay(cardboardConfig || {});\n    super(global, display);\n    this.display = display;\n    this.frame = {\n      rightViewMatrix: new Float32Array(16),\n      leftViewMatrix: new Float32Array(16),\n      rightProjectionMatrix: new Float32Array(16),\n      leftProjectionMatrix: new Float32Array(16),\n      pose: null,\n      timestamp: null,\n    };\n  }\n}\n\nconst TEST_ENV$1 = \"production\" === 'test';\nlet SESSION_ID$1 = 0;\nclass Session$1 {\n  constructor(mode, enabledFeatures) {\n    this.mode = mode;\n    this.enabledFeatures = enabledFeatures;\n    this.ended = null;\n    this.baseLayer = null;\n    this.id = ++SESSION_ID$1;\n  }\n}\nclass InlineDevice extends XRDevice {\n  constructor(global) {\n    super(global);\n    this.sessions = new Map();\n    this.projectionMatrix = create();\n    this.identityMatrix = create();\n  }\n  onBaseLayerSet(sessionId, layer) {\n    const session = this.sessions.get(sessionId);\n    session.baseLayer = layer;\n  }\n  isSessionSupported(mode) {\n    return mode == 'inline';\n  }\n  isFeatureSupported(featureDescriptor) {\n    switch(featureDescriptor) {\n      case 'viewer': return true;\n      default: return false;\n    }\n  }\n  async requestSession(mode, enabledFeatures) {\n    if (!this.isSessionSupported(mode)) {\n      return Promise.reject();\n    }\n    const session = new Session$1(mode, enabledFeatures);\n    this.sessions.set(session.id, session);\n    return Promise.resolve(session.id);\n  }\n  requestAnimationFrame(callback) {\n    return window.requestAnimationFrame(callback);\n  }\n  cancelAnimationFrame(handle) {\n    window.cancelAnimationFrame(handle);\n  }\n  onFrameStart(sessionId, renderState) {\n    if (TEST_ENV$1) {\n      return;\n    }\n    const session = this.sessions.get(sessionId);\n    if (session.baseLayer) {\n      const canvas = session.baseLayer.context.canvas;\n      perspective(this.projectionMatrix, renderState.inlineVerticalFieldOfView,\n          canvas.width/canvas.height, renderState.depthNear, renderState.depthFar);\n    }\n  }\n  onFrameEnd(sessionId) {\n  }\n  async endSession(sessionId) {\n    const session = this.sessions.get(sessionId);\n    session.ended = true;\n  }\n  doesSessionSupportReferenceSpace(sessionId, type) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return false;\n    }\n    return session.enabledFeatures.has(type);\n  }\n  requestStageBounds() {\n    return null;\n  }\n  async requestFrameOfReferenceTransform(type, options) {\n    return null;\n  }\n  getProjectionMatrix(eye) {\n    return this.projectionMatrix;\n  }\n  getViewport(sessionId, eye, layer, target) {\n    const session = this.sessions.get(sessionId);\n    const { width, height } = layer.context.canvas;\n    target.x = target.y = 0;\n    target.width = width;\n    target.height = height;\n    return true;\n  }\n  getBasePoseMatrix() {\n    return this.identityMatrix;\n  }\n  getBaseViewMatrix(eye) {\n    return this.identityMatrix;\n  }\n  getInputSources() {\n    return [];\n  }\n  getInputPose(inputSource, coordinateSystem, poseType) {\n    return null;\n  }\n  onWindowResize() {\n  }\n}\n\nconst getWebVRDevice = async function (global) {\n  let device = null;\n  if ('getVRDisplays' in global.navigator) {\n    try {\n      const displays = await global.navigator.getVRDisplays();\n      if (displays && displays.length) {\n        device = new WebVRDevice(global, displays[0]);\n      }\n    } catch (e) {}\n  }\n  return device;\n};\nconst requestXRDevice = async function (global, config) {\n  if (config.webvr) {\n    let xr = await getWebVRDevice(global);\n    if (xr) {\n      return xr;\n    }\n  }\n  let mobile = isMobile(global);\n  if ((mobile && config.cardboard) ||\n      (!mobile && config.allowCardboardOnDesktop)) {\n    if (!global.VRFrameData) {\n      global.VRFrameData = function () {\n        this.rightViewMatrix = new Float32Array(16);\n        this.leftViewMatrix = new Float32Array(16);\n        this.rightProjectionMatrix = new Float32Array(16);\n        this.leftProjectionMatrix = new Float32Array(16);\n        this.pose = null;\n      };\n    }\n    return new CardboardXRDevice(global, config.cardboardConfig);\n  }\n  return new InlineDevice(global);\n};\n\nconst CONFIG_DEFAULTS = {\n  global: _global,\n  webvr: true,\n  cardboard: true,\n  cardboardConfig: null,\n  allowCardboardOnDesktop: false,\n};\nconst partials = ['navigator', 'HTMLCanvasElement', 'WebGLRenderingContext'];\nclass WebXRPolyfill {\n  constructor(config={}) {\n    this.config = Object.freeze(Object.assign({}, CONFIG_DEFAULTS, config));\n    this.global = this.config.global;\n    this.nativeWebXR = 'xr' in this.global.navigator;\n    this.injected = false;\n    if (!this.nativeWebXR) {\n      this._injectPolyfill(this.global);\n    } else {\n      this._injectCompatibilityShims(this.global);\n    }\n  }\n  _injectPolyfill(global) {\n    if (!partials.every(iface => !!global[iface])) {\n      throw new Error(`Global must have the following attributes : ${partials}`);\n    }\n    for (const className of Object.keys(API)) {\n      if (global[className] !== undefined) {\n        console.warn(`${className} already defined on global.`);\n      } else {\n        global[className] = API[className];\n      }\n    }\n    {\n      const polyfilledCtx = polyfillMakeXRCompatible(global.WebGLRenderingContext);\n      if (polyfilledCtx) {\n        polyfillGetContext(global.HTMLCanvasElement);\n        if (global.OffscreenCanvas) {\n          polyfillGetContext(global.OffscreenCanvas);\n        }\n        if (global.WebGL2RenderingContext){\n          polyfillMakeXRCompatible(global.WebGL2RenderingContext);\n        }\n        if (!window.isSecureContext) {\n          console.warn(`WebXR Polyfill Warning:\nThis page is not running in a secure context (https:// or localhost)!\nThis means that although the page may be able to use the WebXR Polyfill it will\nnot be able to use native WebXR implementations, and as such will not be able to\naccess dedicated VR or AR hardware, and will not be able to take advantage of\nany performance improvements a native WebXR implementation may offer. Please\nhost this content on a secure origin for the best user experience.\n`);\n        }\n      }\n    }\n    this.injected = true;\n    this._patchNavigatorXR();\n  }\n  _patchNavigatorXR() {\n    let devicePromise = requestXRDevice(this.global, this.config);\n    this.xr = new API.XRSystem(devicePromise);\n    Object.defineProperty(this.global.navigator, 'xr', {\n      value: this.xr,\n      configurable: true,\n    });\n  }\n  _injectCompatibilityShims(global) {\n    if (!partials.every(iface => !!global[iface])) {\n      throw new Error(`Global must have the following attributes : ${partials}`);\n    }\n    if (global.navigator.xr &&\n        'supportsSession' in global.navigator.xr &&\n        !('isSessionSupported' in global.navigator.xr)) {\n      let originalSupportsSession = global.navigator.xr.supportsSession;\n      global.navigator.xr.isSessionSupported = function(mode) {\n        return originalSupportsSession.call(this, mode).then(() => {\n          return true;\n        }).catch(() => {\n          return false;\n        });\n      };\n      global.navigator.xr.supportsSession = function(mode) {\n        console.warn(\"navigator.xr.supportsSession() is deprecated. Please \" +\n        \"call navigator.xr.isSessionSupported() instead and check the boolean \" +\n        \"value returned when the promise resolves.\");\n        return originalSupportsSession.call(this, mode);\n      };\n    }\n  }\n}\n\nexport default WebXRPolyfill;\n","var NOW;\r\n// Include a performance.now polyfill.\r\n// In node.js, use process.hrtime.\r\n// eslint-disable-next-line\r\n// @ts-ignore\r\nif (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\r\n    NOW = function () {\r\n        // eslint-disable-next-line\r\n        // @ts-ignore\r\n        var time = process.hrtime();\r\n        // Convert [seconds, nanoseconds] to milliseconds.\r\n        return time[0] * 1000 + time[1] / 1000000;\r\n    };\r\n}\r\n// In a browser, use self.performance.now if it is available.\r\nelse if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\r\n    // This must be bound, because directly assigning this function\r\n    // leads to an invocation exception in Chrome.\r\n    NOW = self.performance.now.bind(self.performance);\r\n}\r\n// Use Date.now if it is available.\r\nelse if (Date.now !== undefined) {\r\n    NOW = Date.now;\r\n}\r\n// Otherwise, use 'new Date().getTime()'.\r\nelse {\r\n    NOW = function () {\r\n        return new Date().getTime();\r\n    };\r\n}\r\nvar NOW$1 = NOW;\n\n/**\r\n * Controlling groups of tweens\r\n *\r\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\r\n * In these cases, you may want to create your own smaller groups of tween\r\n */\r\nvar Group = /** @class */ (function () {\r\n    function Group() {\r\n        this._tweens = {};\r\n        this._tweensAddedDuringUpdate = {};\r\n    }\r\n    Group.prototype.getAll = function () {\r\n        var _this = this;\r\n        return Object.keys(this._tweens).map(function (tweenId) {\r\n            return _this._tweens[tweenId];\r\n        });\r\n    };\r\n    Group.prototype.removeAll = function () {\r\n        this._tweens = {};\r\n    };\r\n    Group.prototype.add = function (tween) {\r\n        this._tweens[tween.getId()] = tween;\r\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\r\n    };\r\n    Group.prototype.remove = function (tween) {\r\n        delete this._tweens[tween.getId()];\r\n        delete this._tweensAddedDuringUpdate[tween.getId()];\r\n    };\r\n    Group.prototype.update = function (time, preserve) {\r\n        var tweenIds = Object.keys(this._tweens);\r\n        if (tweenIds.length === 0) {\r\n            return false;\r\n        }\r\n        time = time !== undefined ? time : NOW$1();\r\n        // Tweens are updated in \"batches\". If you add a new tween during an\r\n        // update, then the new tween will be updated in the next batch.\r\n        // If you remove a tween during an update, it may or may not be updated.\r\n        // However, if the removed tween was added during the current batch,\r\n        // then it will not be updated.\r\n        while (tweenIds.length > 0) {\r\n            this._tweensAddedDuringUpdate = {};\r\n            for (var i = 0; i < tweenIds.length; i++) {\r\n                var tween = this._tweens[tweenIds[i]];\r\n                if (tween && tween.update(time) === false && !preserve) {\r\n                    delete this._tweens[tweenIds[i]];\r\n                }\r\n            }\r\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\r\n        }\r\n        return true;\r\n    };\r\n    return Group;\r\n}());\n\n/**\r\n * The Ease class provides a collection of easing functions for use with tween.js.\r\n */\r\nvar Easing = {\r\n    Linear: {\r\n        None: function (amount) {\r\n            return amount;\r\n        },\r\n    },\r\n    Quadratic: {\r\n        In: function (amount) {\r\n            return amount * amount;\r\n        },\r\n        Out: function (amount) {\r\n            return amount * (2 - amount);\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * amount * amount;\r\n            }\r\n            return -0.5 * (--amount * (amount - 2) - 1);\r\n        },\r\n    },\r\n    Cubic: {\r\n        In: function (amount) {\r\n            return amount * amount * amount;\r\n        },\r\n        Out: function (amount) {\r\n            return --amount * amount * amount + 1;\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * amount * amount * amount;\r\n            }\r\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\r\n        },\r\n    },\r\n    Quartic: {\r\n        In: function (amount) {\r\n            return amount * amount * amount * amount;\r\n        },\r\n        Out: function (amount) {\r\n            return 1 - --amount * amount * amount * amount;\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * amount * amount * amount * amount;\r\n            }\r\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\r\n        },\r\n    },\r\n    Quintic: {\r\n        In: function (amount) {\r\n            return amount * amount * amount * amount * amount;\r\n        },\r\n        Out: function (amount) {\r\n            return --amount * amount * amount * amount * amount + 1;\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * amount * amount * amount * amount * amount;\r\n            }\r\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\r\n        },\r\n    },\r\n    Sinusoidal: {\r\n        In: function (amount) {\r\n            return 1 - Math.cos((amount * Math.PI) / 2);\r\n        },\r\n        Out: function (amount) {\r\n            return Math.sin((amount * Math.PI) / 2);\r\n        },\r\n        InOut: function (amount) {\r\n            return 0.5 * (1 - Math.cos(Math.PI * amount));\r\n        },\r\n    },\r\n    Exponential: {\r\n        In: function (amount) {\r\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\r\n        },\r\n        Out: function (amount) {\r\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\r\n        },\r\n        InOut: function (amount) {\r\n            if (amount === 0) {\r\n                return 0;\r\n            }\r\n            if (amount === 1) {\r\n                return 1;\r\n            }\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * Math.pow(1024, amount - 1);\r\n            }\r\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\r\n        },\r\n    },\r\n    Circular: {\r\n        In: function (amount) {\r\n            return 1 - Math.sqrt(1 - amount * amount);\r\n        },\r\n        Out: function (amount) {\r\n            return Math.sqrt(1 - --amount * amount);\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\r\n            }\r\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\r\n        },\r\n    },\r\n    Elastic: {\r\n        In: function (amount) {\r\n            if (amount === 0) {\r\n                return 0;\r\n            }\r\n            if (amount === 1) {\r\n                return 1;\r\n            }\r\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\r\n        },\r\n        Out: function (amount) {\r\n            if (amount === 0) {\r\n                return 0;\r\n            }\r\n            if (amount === 1) {\r\n                return 1;\r\n            }\r\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\r\n        },\r\n        InOut: function (amount) {\r\n            if (amount === 0) {\r\n                return 0;\r\n            }\r\n            if (amount === 1) {\r\n                return 1;\r\n            }\r\n            amount *= 2;\r\n            if (amount < 1) {\r\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\r\n            }\r\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\r\n        },\r\n    },\r\n    Back: {\r\n        In: function (amount) {\r\n            var s = 1.70158;\r\n            return amount * amount * ((s + 1) * amount - s);\r\n        },\r\n        Out: function (amount) {\r\n            var s = 1.70158;\r\n            return --amount * amount * ((s + 1) * amount + s) + 1;\r\n        },\r\n        InOut: function (amount) {\r\n            var s = 1.70158 * 1.525;\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\r\n            }\r\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\r\n        },\r\n    },\r\n    Bounce: {\r\n        In: function (amount) {\r\n            return 1 - Easing.Bounce.Out(1 - amount);\r\n        },\r\n        Out: function (amount) {\r\n            if (amount < 1 / 2.75) {\r\n                return 7.5625 * amount * amount;\r\n            }\r\n            else if (amount < 2 / 2.75) {\r\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\r\n            }\r\n            else if (amount < 2.5 / 2.75) {\r\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\r\n            }\r\n            else {\r\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\r\n            }\r\n        },\r\n        InOut: function (amount) {\r\n            if (amount < 0.5) {\r\n                return Easing.Bounce.In(amount * 2) * 0.5;\r\n            }\r\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\r\n        },\r\n    },\r\n};\n\n/**\r\n *\r\n */\r\nvar Interpolation = {\r\n    Linear: function (v, k) {\r\n        var m = v.length - 1;\r\n        var f = m * k;\r\n        var i = Math.floor(f);\r\n        var fn = Interpolation.Utils.Linear;\r\n        if (k < 0) {\r\n            return fn(v[0], v[1], f);\r\n        }\r\n        if (k > 1) {\r\n            return fn(v[m], v[m - 1], m - f);\r\n        }\r\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\r\n    },\r\n    Bezier: function (v, k) {\r\n        var b = 0;\r\n        var n = v.length - 1;\r\n        var pw = Math.pow;\r\n        var bn = Interpolation.Utils.Bernstein;\r\n        for (var i = 0; i <= n; i++) {\r\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\r\n        }\r\n        return b;\r\n    },\r\n    CatmullRom: function (v, k) {\r\n        var m = v.length - 1;\r\n        var f = m * k;\r\n        var i = Math.floor(f);\r\n        var fn = Interpolation.Utils.CatmullRom;\r\n        if (v[0] === v[m]) {\r\n            if (k < 0) {\r\n                i = Math.floor((f = m * (1 + k)));\r\n            }\r\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\r\n        }\r\n        else {\r\n            if (k < 0) {\r\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\r\n            }\r\n            if (k > 1) {\r\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\r\n            }\r\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\r\n        }\r\n    },\r\n    Utils: {\r\n        Linear: function (p0, p1, t) {\r\n            return (p1 - p0) * t + p0;\r\n        },\r\n        Bernstein: function (n, i) {\r\n            var fc = Interpolation.Utils.Factorial;\r\n            return fc(n) / fc(i) / fc(n - i);\r\n        },\r\n        Factorial: (function () {\r\n            var a = [1];\r\n            return function (n) {\r\n                var s = 1;\r\n                if (a[n]) {\r\n                    return a[n];\r\n                }\r\n                for (var i = n; i > 1; i--) {\r\n                    s *= i;\r\n                }\r\n                a[n] = s;\r\n                return s;\r\n            };\r\n        })(),\r\n        CatmullRom: function (p0, p1, p2, p3, t) {\r\n            var v0 = (p2 - p0) * 0.5;\r\n            var v1 = (p3 - p1) * 0.5;\r\n            var t2 = t * t;\r\n            var t3 = t * t2;\r\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\r\n        },\r\n    },\r\n};\n\n/**\r\n * Utils\r\n */\r\nvar Sequence = /** @class */ (function () {\r\n    function Sequence() {\r\n    }\r\n    Sequence.nextId = function () {\r\n        return Sequence._nextId++;\r\n    };\r\n    Sequence._nextId = 0;\r\n    return Sequence;\r\n}());\n\n/**\r\n * Tween.js - Licensed under the MIT license\r\n * https://github.com/tweenjs/tween.js\r\n * ----------------------------------------------\r\n *\r\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\r\n * Thank you all, you're awesome!\r\n */\r\nvar Tween = /** @class */ (function () {\r\n    function Tween(_object, _group) {\r\n        if (_group === void 0) { _group = TWEEN; }\r\n        this._object = _object;\r\n        this._group = _group;\r\n        this._isPaused = false;\r\n        this._pauseStart = 0;\r\n        this._valuesStart = {};\r\n        this._valuesEnd = {};\r\n        this._valuesStartRepeat = {};\r\n        this._duration = 1000;\r\n        this._initialRepeat = 0;\r\n        this._repeat = 0;\r\n        this._yoyo = false;\r\n        this._isPlaying = false;\r\n        this._reversed = false;\r\n        this._delayTime = 0;\r\n        this._startTime = 0;\r\n        this._easingFunction = TWEEN.Easing.Linear.None;\r\n        this._interpolationFunction = TWEEN.Interpolation.Linear;\r\n        this._chainedTweens = [];\r\n        this._onStartCallbackFired = false;\r\n        this._id = TWEEN.nextId();\r\n        this._isChainStopped = false;\r\n    }\r\n    Tween.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    Tween.prototype.isPlaying = function () {\r\n        return this._isPlaying;\r\n    };\r\n    Tween.prototype.isPaused = function () {\r\n        return this._isPaused;\r\n    };\r\n    Tween.prototype.to = function (properties, duration) {\r\n        for (var prop in properties) {\r\n            this._valuesEnd[prop] = properties[prop];\r\n        }\r\n        if (duration !== undefined) {\r\n            this._duration = duration;\r\n        }\r\n        return this;\r\n    };\r\n    Tween.prototype.duration = function (d) {\r\n        this._duration = d;\r\n        return this;\r\n    };\r\n    Tween.prototype.start = function (time) {\r\n        if (this._isPlaying) {\r\n            return this;\r\n        }\r\n        // eslint-disable-next-line\r\n        // @ts-ignore FIXME?\r\n        this._group.add(this);\r\n        this._repeat = this._initialRepeat;\r\n        if (this._reversed) {\r\n            // If we were reversed (f.e. using the yoyo feature) then we need to\r\n            // flip the tween direction back to forward.\r\n            this._reversed = false;\r\n            for (var property in this._valuesStartRepeat) {\r\n                this._swapEndStartRepeatValues(property);\r\n                this._valuesStart[property] = this._valuesStartRepeat[property];\r\n            }\r\n        }\r\n        this._isPlaying = true;\r\n        this._isPaused = false;\r\n        this._onStartCallbackFired = false;\r\n        this._isChainStopped = false;\r\n        this._startTime =\r\n            time !== undefined ? (typeof time === 'string' ? TWEEN.now() + parseFloat(time) : time) : TWEEN.now();\r\n        this._startTime += this._delayTime;\r\n        this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat);\r\n        return this;\r\n    };\r\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat) {\r\n        for (var property in _valuesEnd) {\r\n            var startValue = _object[property];\r\n            var startValueIsArray = Array.isArray(startValue);\r\n            var propType = startValueIsArray ? 'array' : typeof startValue;\r\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\r\n            // If `to()` specifies a property that doesn't exist in the source object,\r\n            // we should not set that property in the object\r\n            if (propType === 'undefined' || propType === 'function') {\r\n                continue;\r\n            }\r\n            // Check if an Array was provided as property value\r\n            if (isInterpolationList) {\r\n                var endValues = _valuesEnd[property];\r\n                if (endValues.length === 0) {\r\n                    continue;\r\n                }\r\n                // handle an array of relative values\r\n                endValues = endValues.map(this._handleRelativeValue.bind(this, startValue));\r\n                // Create a local copy of the Array with the start value at the front\r\n                _valuesEnd[property] = [startValue].concat(endValues);\r\n            }\r\n            // handle the deepness of the values\r\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\r\n                _valuesStart[property] = startValueIsArray ? [] : {};\r\n                // eslint-disable-next-line\r\n                for (var prop in startValue) {\r\n                    // eslint-disable-next-line\r\n                    // @ts-ignore FIXME?\r\n                    _valuesStart[property][prop] = startValue[prop];\r\n                }\r\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {}; // TODO? repeat nested values? And yoyo? And array values?\r\n                // eslint-disable-next-line\r\n                // @ts-ignore FIXME?\r\n                this._setupProperties(startValue, _valuesStart[property], _valuesEnd[property], _valuesStartRepeat[property]);\r\n            }\r\n            else {\r\n                // Save the starting value, but only once.\r\n                if (typeof _valuesStart[property] === 'undefined') {\r\n                    _valuesStart[property] = startValue;\r\n                }\r\n                if (!startValueIsArray) {\r\n                    // eslint-disable-next-line\r\n                    // @ts-ignore FIXME?\r\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\r\n                }\r\n                if (isInterpolationList) {\r\n                    // eslint-disable-next-line\r\n                    // @ts-ignore FIXME?\r\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\r\n                }\r\n                else {\r\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Tween.prototype.stop = function () {\r\n        if (!this._isChainStopped) {\r\n            this._isChainStopped = true;\r\n            this.stopChainedTweens();\r\n        }\r\n        if (!this._isPlaying) {\r\n            return this;\r\n        }\r\n        // eslint-disable-next-line\r\n        // @ts-ignore FIXME?\r\n        this._group.remove(this);\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n        if (this._onStopCallback) {\r\n            this._onStopCallback(this._object);\r\n        }\r\n        return this;\r\n    };\r\n    Tween.prototype.end = function () {\r\n        this.update(Infinity);\r\n        return this;\r\n    };\r\n    Tween.prototype.pause = function (time) {\r\n        if (this._isPaused || !this._isPlaying) {\r\n            return this;\r\n        }\r\n        this._isPaused = true;\r\n        this._pauseStart = time === undefined ? TWEEN.now() : time;\r\n        // eslint-disable-next-line\r\n        // @ts-ignore FIXME?\r\n        this._group.remove(this);\r\n        return this;\r\n    };\r\n    Tween.prototype.resume = function (time) {\r\n        if (!this._isPaused || !this._isPlaying) {\r\n            return this;\r\n        }\r\n        this._isPaused = false;\r\n        this._startTime += (time === undefined ? TWEEN.now() : time) - this._pauseStart;\r\n        this._pauseStart = 0;\r\n        // eslint-disable-next-line\r\n        // @ts-ignore FIXME?\r\n        this._group.add(this);\r\n        return this;\r\n    };\r\n    Tween.prototype.stopChainedTweens = function () {\r\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\r\n            this._chainedTweens[i].stop();\r\n        }\r\n        return this;\r\n    };\r\n    Tween.prototype.group = function (group) {\r\n        this._group = group;\r\n        return this;\r\n    };\r\n    Tween.prototype.delay = function (amount) {\r\n        this._delayTime = amount;\r\n        return this;\r\n    };\r\n    Tween.prototype.repeat = function (times) {\r\n        this._initialRepeat = times;\r\n        this._repeat = times;\r\n        return this;\r\n    };\r\n    Tween.prototype.repeatDelay = function (amount) {\r\n        this._repeatDelayTime = amount;\r\n        return this;\r\n    };\r\n    Tween.prototype.yoyo = function (yoyo) {\r\n        this._yoyo = yoyo;\r\n        return this;\r\n    };\r\n    Tween.prototype.easing = function (easingFunction) {\r\n        this._easingFunction = easingFunction;\r\n        return this;\r\n    };\r\n    Tween.prototype.interpolation = function (interpolationFunction) {\r\n        this._interpolationFunction = interpolationFunction;\r\n        return this;\r\n    };\r\n    Tween.prototype.chain = function () {\r\n        var tweens = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            tweens[_i] = arguments[_i];\r\n        }\r\n        this._chainedTweens = tweens;\r\n        return this;\r\n    };\r\n    Tween.prototype.onStart = function (callback) {\r\n        this._onStartCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.onUpdate = function (callback) {\r\n        this._onUpdateCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.onRepeat = function (callback) {\r\n        this._onRepeatCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.onComplete = function (callback) {\r\n        this._onCompleteCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.onStop = function (callback) {\r\n        this._onStopCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.update = function (time) {\r\n        var property;\r\n        var elapsed;\r\n        var endTime = this._startTime + this._duration;\r\n        if (time > endTime && !this._isPlaying) {\r\n            return false;\r\n        }\r\n        // If the tween was already finished,\r\n        if (!this.isPlaying) {\r\n            this.start(time);\r\n        }\r\n        if (time < this._startTime) {\r\n            return true;\r\n        }\r\n        if (this._onStartCallbackFired === false) {\r\n            if (this._onStartCallback) {\r\n                this._onStartCallback(this._object);\r\n            }\r\n            this._onStartCallbackFired = true;\r\n        }\r\n        elapsed = (time - this._startTime) / this._duration;\r\n        elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\r\n        var value = this._easingFunction(elapsed);\r\n        // properties transformations\r\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\r\n        if (this._onUpdateCallback) {\r\n            this._onUpdateCallback(this._object, elapsed);\r\n        }\r\n        if (elapsed === 1) {\r\n            if (this._repeat > 0) {\r\n                if (isFinite(this._repeat)) {\r\n                    this._repeat--;\r\n                }\r\n                // Reassign starting values, restart by making startTime = now\r\n                for (property in this._valuesStartRepeat) {\r\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\r\n                        this._valuesStartRepeat[property] =\r\n                            // eslint-disable-next-line\r\n                            // @ts-ignore FIXME?\r\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\r\n                    }\r\n                    if (this._yoyo) {\r\n                        this._swapEndStartRepeatValues(property);\r\n                    }\r\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\r\n                }\r\n                if (this._yoyo) {\r\n                    this._reversed = !this._reversed;\r\n                }\r\n                if (this._repeatDelayTime !== undefined) {\r\n                    this._startTime = time + this._repeatDelayTime;\r\n                }\r\n                else {\r\n                    this._startTime = time + this._delayTime;\r\n                }\r\n                if (this._onRepeatCallback) {\r\n                    this._onRepeatCallback(this._object);\r\n                }\r\n                return true;\r\n            }\r\n            else {\r\n                if (this._onCompleteCallback) {\r\n                    this._onCompleteCallback(this._object);\r\n                }\r\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\r\n                    // Make the chained tweens start exactly at the time they should,\r\n                    // even if the `update()` method was called way past the duration of the tween\r\n                    this._chainedTweens[i].start(this._startTime + this._duration);\r\n                }\r\n                this._isPlaying = false;\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\r\n        for (var property in _valuesEnd) {\r\n            // Don't update properties that do not exist in the source object\r\n            if (_valuesStart[property] === undefined) {\r\n                continue;\r\n            }\r\n            var start = _valuesStart[property] || 0;\r\n            var end = _valuesEnd[property];\r\n            var startIsArray = Array.isArray(_object[property]);\r\n            var endIsArray = Array.isArray(end);\r\n            var isInterpolationList = !startIsArray && endIsArray;\r\n            if (isInterpolationList) {\r\n                _object[property] = this._interpolationFunction(end, value);\r\n            }\r\n            else if (typeof end === 'object' && end) {\r\n                // eslint-disable-next-line\r\n                // @ts-ignore FIXME?\r\n                this._updateProperties(_object[property], start, end, value);\r\n            }\r\n            else {\r\n                // Parses relative end values with start as base (e.g.: +10, -3)\r\n                end = this._handleRelativeValue(start, end);\r\n                // Protect against non numeric properties.\r\n                if (typeof end === 'number') {\r\n                    // eslint-disable-next-line\r\n                    // @ts-ignore FIXME?\r\n                    _object[property] = start + (end - start) * value;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Tween.prototype._handleRelativeValue = function (start, end) {\r\n        if (typeof end !== 'string') {\r\n            return end;\r\n        }\r\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\r\n            return start + parseFloat(end);\r\n        }\r\n        else {\r\n            return parseFloat(end);\r\n        }\r\n    };\r\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\r\n        var tmp = this._valuesStartRepeat[property];\r\n        if (typeof this._valuesEnd[property] === 'string') {\r\n            // eslint-disable-next-line\r\n            // @ts-ignore FIXME?\r\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\r\n        }\r\n        else {\r\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\r\n        }\r\n        this._valuesEnd[property] = tmp;\r\n    };\r\n    return Tween;\r\n}());\n\nvar VERSION = '18.6.0';\n\n/**\r\n * Tween.js - Licensed under the MIT license\r\n * https://github.com/tweenjs/tween.js\r\n * ----------------------------------------------\r\n *\r\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\r\n * Thank you all, you're awesome!\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/**\r\n * Controlling groups of tweens\r\n *\r\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\r\n * In these cases, you may want to create your own smaller groups of tween\r\n */\r\nvar Main = /** @class */ (function (_super) {\r\n    __extends(Main, _super);\r\n    function Main() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.version = VERSION;\r\n        _this.now = NOW$1;\r\n        _this.Group = Group;\r\n        _this.Easing = Easing;\r\n        _this.Interpolation = Interpolation;\r\n        _this.nextId = Sequence.nextId;\r\n        _this.Tween = Tween;\r\n        return _this;\r\n    }\r\n    return Main;\r\n}(Group));\r\nvar TWEEN = new Main();\n\nexport default TWEEN;\n","/* eslint-disable no-case-declarations */\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'\nimport {\n\tWebGLRenderer,\n\tScene,\n\tPerspectiveCamera,\n\tAmbientLight,\n\tDirectionalLight,\n\tSphereGeometry,\n\tBackSide,\n\tMesh,\n\tMeshBasicMaterial,\n\tVector3,\n\tMeshLambertMaterial,\n\tPlaneGeometry,\n\tTextureLoader,\n\tGroup,\n\tRepeatWrapping,\n\tMeshPhongMaterial\n} from 'three';\nimport { VRButton } from 'three/examples/jsm/webxr/VRButton.js';\nimport WebXRPolyfill from 'webxr-polyfill';\nimport TWEEN from '@tweenjs/tween.js/dist/tween.esm.js';\n\nconst sceneRadius = 500;\n\nconst cameraGroup = new Group();\n\nconst canvas = document.querySelector('canvas');\nconst context = canvas.getContext( 'webgl2', { antialias: true } );\nconst renderer = new WebGLRenderer({ canvas, context });\nrenderer.xr.enabled = true;\nrenderer.logarithmicDepthBuffer = true;\nrenderer.setPixelRatio(window.devicePixelRatio);\n\nconst scene = new Scene();\nscene.name = \"xrgarden\"\nwindow.scene = scene;\nconst camera = new PerspectiveCamera();\ncamera.far = 1000;\ncameraGroup.add(camera);\nscene.add(cameraGroup);\n\nconst controls = new OrbitControls(camera, renderer.domElement);\ncontrols.maxPolarAngle = Math.PI * 0.5;\ncontrols.maxDistance = 10;\ncamera.position.set(0, 1.6, -5);\ncontrols.target = new Vector3(0, 1, 0);\ncontrols.update();\n\nfunction onWindowResize() {\n\tconst w = window.innerWidth;\n\tconst h = window.innerHeight;\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize(w, h);\n}\nwindow.addEventListener('resize', onWindowResize, false);\nonWindowResize();\n\nconst light = new DirectionalLight(0xffaa33);\nlight.position.set(-sceneRadius, sceneRadius, sceneRadius);\nlight.intensity = 1.0;\nscene.add(light);\n// Add the sun\nlight.add(\n\tnew Mesh(new SphereGeometry(sceneRadius/10, 32, 32), new MeshBasicMaterial({\n\t\tcolor: 0xffaa33\n\t}))\n)\n\nconst light2 = new AmbientLight(0x003973);\nlight2.intensity = 1.0;\nscene.add(light2);\n\nconst skygeometry = new SphereGeometry(sceneRadius, 50, 50, 0, 2 * Math.PI);\nconst skymaterial = new MeshBasicMaterial({\n\tside: BackSide,\n\tdepthWrite: false\n});\n\nskymaterial.onBeforeCompile = function (shader) {\n\tshader.vertexShader = shader.vertexShader.replace('#include <common>', '#include <common>\\n#define USE_UV');\n\tshader.fragmentShader = shader.fragmentShader.replace('#include <common>', `\n    #include <common>\n    #define USE_UV\n    `);\n\tshader.fragmentShader = shader.fragmentShader.replace('#include <map_fragment>', `\n        vec4 col1 = vec4( 249, 229, 180, 255 ) / 255.0;\n        vec4 col2 = vec4( 0, 57, 115, 255 ) / 255.0;\n        float mixAmount = 0.0;\n        if (vUv.y > 0.5) {\n            float newY = (vUv.y - 0.5) * 2.0;\n            mixAmount = sqrt(newY)*2.0;\n        } else {\n            col1 = vec4(0.6,0.6,0.6,1.0);\n\t\t}\n        diffuseColor *= mix(col1, col2, mixAmount);\n    `);\n};\nskymaterial.dithering = true;\nconst skysphere = new Mesh(skygeometry, skymaterial);\nskysphere.name = 'skysphere';\nscene.add(skysphere);\n\nconst floorTexture = new TextureLoader().load('https://cdn.glitch.com/3423c223-e1e5-450d-8cfa-2f5215104916%2Fmemphis-mini.png?v=1579618577700');\nfloorTexture.repeat.multiplyScalar(sceneRadius/5);\nfloorTexture.wrapS = floorTexture.wrapT = RepeatWrapping;\nconst floor = new Mesh(\n\tnew PlaneGeometry(sceneRadius*2,sceneRadius*2,50,50),\n\tnew MeshLambertMaterial({\n\t\tmap: floorTexture\n\t})\n);\nfloor.rotation.x = -Math.PI / 2;\nfloor.name = 'floor';\nscene.add(floor);\n\nconst waterTexture = new TextureLoader().load('https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/waternormals.jpg');\nwaterTexture.wrapS = waterTexture.wrapT = RepeatWrapping;\nwaterTexture.repeat.multiplyScalar(sceneRadius/50);\nconst water = new Mesh(\n\tnew PlaneGeometry(sceneRadius*2,sceneRadius*2,50,50),\n\tnew MeshPhongMaterial({\n\t\tnormalMap: waterTexture,\n\t\tshininess: 1,\n\t\tcolor: 0x8ab39f,\n\t\ttransparent: true,\n\t\topacity: 0.4\n\t})\n);\nwater.geometry.rotateX(-Math.PI / 2);\nwater.position.y = 0.30;\nscene.add(water);\n\nnew WebXRPolyfill();\nconst vrbutton = VRButton.createButton(renderer);\ndocument.body.appendChild(vrbutton);\nvrbutton.addEventListener('click', function () {\n\tif (!window.canaudio.checked) window.canaudio.click();\n});\n\nconst rafCallbacks = new Set();\n\nrafCallbacks.add(function (t) {\n\twater.material.normalMap.offset.x += 0.01 * Math.sin(t / 10000)/sceneRadius;\n\twater.material.normalMap.offset.y += 0.01 * Math.cos(t / 8000)/sceneRadius;\n\twater.material.normalScale.x = 10 * (0.8 + 0.5 * Math.cos(t / 1000));\n\twater.material.normalScale.y = 10 * (0.8 + 0.5 * Math.sin(t / 1200));\n\twater.position.y = 0.4 + 0.1 * Math.sin(t / 2000);\n});\n\nrenderer.setAnimationLoop(function (time) {\n\tTWEEN.update(time);\n\trafCallbacks.forEach(cb => cb(time));\n\trenderer.render(scene, camera);\n});\n\nexport {\n\trenderer,\n\tscene,\n\trafCallbacks,\n\tcameraGroup,\n\tcamera,\n\tcontext,\n\twater,\n\tfloor,\n\tcontrols\n}","class VRButton {\n\n\tstatic createButton( renderer, options ) {\n\n\t\tif ( options ) {\n\n\t\t\tconsole.error( 'THREE.VRButton: The \"options\" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.' );\n\n\t\t}\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tfunction onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\trenderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t\t\t// be requested separately.)\n\n\t\t\t\t\tconst sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor', 'hand-tracking' ] };\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'VRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t} );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { VRButton };\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tCanvasTexture,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternionKeyframeTrack,\n\tRGBFormat,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from \"../../../build/three.module.js\";\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ddsLoader = null;\n\t\tthis.ktx2Loader = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\t\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function ( ddsLoader ) {\n\n\t\t\tthis.ddsLoader = ddsLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetKTX2Loader: function ( ktx2Loader ) {\n\n\t\t\tthis.ktx2Loader = ktx2Loader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\t\t\tvar plugins = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\tmanager: this.manager,\n\t\t\t\tktx2Loader: this.ktx2Loader\n\n\t\t\t} );\n\n\t\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\t\tfor ( var i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\t\tvar plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t\t// Remove this workaround if we move all the existing\n\t\t\t\t// extension handlers to plugin system\n\t\t\t\textensions[ plugin.name ] = true;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureDDSExtension( this.ddsLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.setExtensions( extensions );\n\t\t\tparser.setPlugins( plugins );\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n\t};\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n\tfunction GLTFTextureDDSExtension( ddsLoader ) {\n\n\t\tif ( ! ddsLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\tthis.ddsLoader = ddsLoader;\n\n\t}\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\tGLTFLightsExtension.prototype._markDefs = function () {\n\n\t\tvar parser = this.parser;\n\t\tvar nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tGLTFLightsExtension.prototype._loadLight = function ( lightIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar cacheKey = 'light:' + lightIndex;\n\t\tvar dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tvar json = parser.json;\n\t\tvar extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tvar lightDefs = extensions.lights || [];\n\t\tvar lightDef = lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".' );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t};\n\n\tGLTFLightsExtension.prototype.createNodeAttachment = function ( nodeIndex ) {\n\n\t\tvar self = this;\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\t\tvar lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tvar lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Clearcoat Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t */\n\tfunction GLTFMaterialsClearcoatExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tGLTFMaterialsClearcoatExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsClearcoatExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tvar scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Transmission Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n\t * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n\t */\n\tfunction GLTFMaterialsTransmissionExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tGLTFMaterialsTransmissionExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsTransmissionExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * BasisU Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n\t * (draft PR https://github.com/KhronosGroup/glTF/pull/1751)\n\t */\n\tfunction GLTFTextureBasisUExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tGLTFTextureBasisUExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ this.name ];\n\t\tvar source = json.images[ extension.source ];\n\t\tvar loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: NearestFilter,\n\t\t9729: LinearFilter,\n\t\t9984: NearestMipmapNearestFilter,\n\t\t9985: LinearMipmapNearestFilter,\n\t\t9986: NearestMipmapLinearFilter,\n\t\t9987: LinearMipmapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: ClampToEdgeWrapping,\n\t\t33648: MirroredRepeatWrapping,\n\t\t10497: RepeatWrapping\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: InterpolateLinear,\n\t\tSTEP: InterpolateDiscrete\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: FrontSide\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox/.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.setExtensions = function ( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t};\n\n\tGLTFParser.prototype.setPlugins = function ( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t};\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( [\n\n\t\t\tthis.getDependencies( 'scene' ),\n\t\t\tthis.getDependencies( 'animation' ),\n\t\t\tthis.getDependencies( 'camera' ),\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tonLoad( result );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype._markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\tGLTFParser.prototype._addNodeRef = function ( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t};\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\tGLTFParser.prototype._getNodeRef = function ( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tvar ref = object.clone();\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t};\n\n\tGLTFParser.prototype._invokeOne = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t};\n\n\tGLTFParser.prototype._invokeAll = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\tvar source;\n\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\n\n\t\t} else {\n\n\t\t\tsource = json.images[ textureDef.source ];\n\n\t\t}\n\n\t\tvar loader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tloader = options.manager.getHandler( source.uri );\n\n\t\t}\n\n\t\tif ( ! loader ) {\n\n\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\n\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\n\t\t\t\t: this.textureLoader;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\tGLTFParser.prototype.loadTextureImage = function ( textureIndex, source, loader ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar URL = self.URL || self.webkitURL;\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\t\tvar hasAlpha = true;\n\n\t\tif ( source.mimeType === 'image/jpeg' ) hasAlpha = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tif ( source.mimeType === 'image/png' ) {\n\n\t\t\t\t\t// Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n\t\t\t\t\t// alpha channel. This check is conservative  the image could have an alpha\n\t\t\t\t\t// channel with all values == 1, and the indexed type (colorType == 3) only\n\t\t\t\t\t// sometimes contains alpha.\n\t\t\t\t\t//\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n\t\t\t\t\tvar colorType = new DataView( bufferView, 25, 1 ).getUint8( 0, false );\n\t\t\t\t\thasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n\n\t\t\t\t}\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tvar onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tresolve( new CanvasTexture( imageBitmap ) );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\t\t\tif ( ! hasAlpha ) texture.format = RGBFormat;\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tvar gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accomodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexTangents ) cachedMaterial.vertexTangents = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\tif ( material.normalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.clearcoatNormalScale.y = - material.clearcoatNormalScale.y;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\tGLTFParser.prototype.getMaterialType = function ( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tGLTFParser.prototype.createUniqueName = function ( originalName ) {\n\n\t\tvar name = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tfor ( var i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = originalName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new Box3();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar maxDisplacement = new Vector3();\n\t\t\tvar vector = new Vector3();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\t\tbox.expandByVector( maxDisplacement );\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new Sphere();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tvar nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new Group();\n\t\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\nexport { GLTFLoader };\n","/**\n * @webxr-input-profiles/motion-controllers 1.0.0 https://github.com/immersive-web/webxr-input-profiles\n */\n\nconst Constants = {\n  Handedness: Object.freeze({\n    NONE: 'none',\n    LEFT: 'left',\n    RIGHT: 'right'\n  }),\n\n  ComponentState: Object.freeze({\n    DEFAULT: 'default',\n    TOUCHED: 'touched',\n    PRESSED: 'pressed'\n  }),\n\n  ComponentProperty: Object.freeze({\n    BUTTON: 'button',\n    X_AXIS: 'xAxis',\n    Y_AXIS: 'yAxis',\n    STATE: 'state'\n  }),\n\n  ComponentType: Object.freeze({\n    TRIGGER: 'trigger',\n    SQUEEZE: 'squeeze',\n    TOUCHPAD: 'touchpad',\n    THUMBSTICK: 'thumbstick',\n    BUTTON: 'button'\n  }),\n\n  ButtonTouchThreshold: 0.05,\n\n  AxisTouchThreshold: 0.1,\n\n  VisualResponseProperty: Object.freeze({\n    TRANSFORM: 'transform',\n    VISIBILITY: 'visibility'\n  })\n};\n\n/**\n * @description Static helper function to fetch a JSON file and turn it into a JS object\n * @param {string} path - Path to JSON file to be fetched\n */\nasync function fetchJsonFile(path) {\n  const response = await fetch(path);\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  } else {\n    return response.json();\n  }\n}\n\nasync function fetchProfilesList(basePath) {\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  const profileListFileName = 'profilesList.json';\n  const profilesList = await fetchJsonFile(`${basePath}/${profileListFileName}`);\n  return profilesList;\n}\n\nasync function fetchProfile(xrInputSource, basePath, defaultProfile = null, getAssetPath = true) {\n  if (!xrInputSource) {\n    throw new Error('No xrInputSource supplied');\n  }\n\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  // Get the list of profiles\n  const supportedProfilesList = await fetchProfilesList(basePath);\n\n  // Find the relative path to the first requested profile that is recognized\n  let match;\n  xrInputSource.profiles.some((profileId) => {\n    const supportedProfile = supportedProfilesList[profileId];\n    if (supportedProfile) {\n      match = {\n        profileId,\n        profilePath: `${basePath}/${supportedProfile.path}`,\n        deprecated: !!supportedProfile.deprecated\n      };\n    }\n    return !!match;\n  });\n\n  if (!match) {\n    if (!defaultProfile) {\n      throw new Error('No matching profile name found');\n    }\n\n    const supportedProfile = supportedProfilesList[defaultProfile];\n    if (!supportedProfile) {\n      throw new Error(`No matching profile name found and default profile \"${defaultProfile}\" missing.`);\n    }\n\n    match = {\n      profileId: defaultProfile,\n      profilePath: `${basePath}/${supportedProfile.path}`,\n      deprecated: !!supportedProfile.deprecated\n    };\n  }\n\n  const profile = await fetchJsonFile(match.profilePath);\n\n  let assetPath;\n  if (getAssetPath) {\n    let layout;\n    if (xrInputSource.handedness === 'any') {\n      layout = profile.layouts[Object.keys(profile.layouts)[0]];\n    } else {\n      layout = profile.layouts[xrInputSource.handedness];\n    }\n    if (!layout) {\n      throw new Error(\n        `No matching handedness, ${xrInputSource.handedness}, in profile ${match.profileId}`\n      );\n    }\n\n    if (layout.assetPath) {\n      assetPath = match.profilePath.replace('profile.json', layout.assetPath);\n    }\n  }\n\n  return { profile, assetPath };\n}\n\n/** @constant {Object} */\nconst defaultComponentValues = {\n  xAxis: 0,\n  yAxis: 0,\n  button: 0,\n  state: Constants.ComponentState.DEFAULT\n};\n\n/**\n * @description Converts an X, Y coordinate from the range -1 to 1 (as reported by the Gamepad\n * API) to the range 0 to 1 (for interpolation). Also caps the X, Y values to be bounded within\n * a circle. This ensures that thumbsticks are not animated outside the bounds of their physical\n * range of motion and touchpads do not report touch locations off their physical bounds.\n * @param {number} x The original x coordinate in the range -1 to 1\n * @param {number} y The original y coordinate in the range -1 to 1\n */\nfunction normalizeAxes(x = 0, y = 0) {\n  let xAxis = x;\n  let yAxis = y;\n\n  // Determine if the point is outside the bounds of the circle\n  // and, if so, place it on the edge of the circle\n  const hypotenuse = Math.sqrt((x * x) + (y * y));\n  if (hypotenuse > 1) {\n    const theta = Math.atan2(y, x);\n    xAxis = Math.cos(theta);\n    yAxis = Math.sin(theta);\n  }\n\n  // Scale and move the circle so values are in the interpolation range.  The circle's origin moves\n  // from (0, 0) to (0.5, 0.5). The circle's radius scales from 1 to be 0.5.\n  const result = {\n    normalizedXAxis: (xAxis * 0.5) + 0.5,\n    normalizedYAxis: (yAxis * 0.5) + 0.5\n  };\n  return result;\n}\n\n/**\n * Contains the description of how the 3D model should visually respond to a specific user input.\n * This is accomplished by initializing the object with the name of a node in the 3D model and\n * property that need to be modified in response to user input, the name of the nodes representing\n * the allowable range of motion, and the name of the input which triggers the change. In response\n * to the named input changing, this object computes the appropriate weighting to use for\n * interpolating between the range of motion nodes.\n */\nclass VisualResponse {\n  constructor(visualResponseDescription) {\n    this.componentProperty = visualResponseDescription.componentProperty;\n    this.states = visualResponseDescription.states;\n    this.valueNodeName = visualResponseDescription.valueNodeName;\n    this.valueNodeProperty = visualResponseDescription.valueNodeProperty;\n\n    if (this.valueNodeProperty === Constants.VisualResponseProperty.TRANSFORM) {\n      this.minNodeName = visualResponseDescription.minNodeName;\n      this.maxNodeName = visualResponseDescription.maxNodeName;\n    }\n\n    // Initializes the response's current value based on default data\n    this.value = 0;\n    this.updateFromComponent(defaultComponentValues);\n  }\n\n  /**\n   * Computes the visual response's interpolation weight based on component state\n   * @param {Object} componentValues - The component from which to update\n   * @param {number} xAxis - The reported X axis value of the component\n   * @param {number} yAxis - The reported Y axis value of the component\n   * @param {number} button - The reported value of the component's button\n   * @param {string} state - The component's active state\n   */\n  updateFromComponent({\n    xAxis, yAxis, button, state\n  }) {\n    const { normalizedXAxis, normalizedYAxis } = normalizeAxes(xAxis, yAxis);\n    switch (this.componentProperty) {\n      case Constants.ComponentProperty.X_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedXAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.Y_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedYAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.BUTTON:\n        this.value = (this.states.includes(state)) ? button : 0;\n        break;\n      case Constants.ComponentProperty.STATE:\n        if (this.valueNodeProperty === Constants.VisualResponseProperty.VISIBILITY) {\n          this.value = (this.states.includes(state));\n        } else {\n          this.value = this.states.includes(state) ? 1.0 : 0.0;\n        }\n        break;\n      default:\n        throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`);\n    }\n  }\n}\n\nclass Component {\n  /**\n   * @param {Object} componentId - Id of the component\n   * @param {Object} componentDescription - Description of the component to be created\n   */\n  constructor(componentId, componentDescription) {\n    if (!componentId\n     || !componentDescription\n     || !componentDescription.visualResponses\n     || !componentDescription.gamepadIndices\n     || Object.keys(componentDescription.gamepadIndices).length === 0) {\n      throw new Error('Invalid arguments supplied');\n    }\n\n    this.id = componentId;\n    this.type = componentDescription.type;\n    this.rootNodeName = componentDescription.rootNodeName;\n    this.touchPointNodeName = componentDescription.touchPointNodeName;\n\n    // Build all the visual responses for this component\n    this.visualResponses = {};\n    Object.keys(componentDescription.visualResponses).forEach((responseName) => {\n      const visualResponse = new VisualResponse(componentDescription.visualResponses[responseName]);\n      this.visualResponses[responseName] = visualResponse;\n    });\n\n    // Set default values\n    this.gamepadIndices = Object.assign({}, componentDescription.gamepadIndices);\n\n    this.values = {\n      state: Constants.ComponentState.DEFAULT,\n      button: (this.gamepadIndices.button !== undefined) ? 0 : undefined,\n      xAxis: (this.gamepadIndices.xAxis !== undefined) ? 0 : undefined,\n      yAxis: (this.gamepadIndices.yAxis !== undefined) ? 0 : undefined\n    };\n  }\n\n  get data() {\n    const data = { id: this.id, ...this.values };\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   * @param {Object} gamepad - The gamepad object from which the component data should be polled\n   */\n  updateFromGamepad(gamepad) {\n    // Set the state to default before processing other data sources\n    this.values.state = Constants.ComponentState.DEFAULT;\n\n    // Get and normalize button\n    if (this.gamepadIndices.button !== undefined\n        && gamepad.buttons.length > this.gamepadIndices.button) {\n      const gamepadButton = gamepad.buttons[this.gamepadIndices.button];\n      this.values.button = gamepadButton.value;\n      this.values.button = (this.values.button < 0) ? 0 : this.values.button;\n      this.values.button = (this.values.button > 1) ? 1 : this.values.button;\n\n      // Set the state based on the button\n      if (gamepadButton.pressed || this.values.button === 1) {\n        this.values.state = Constants.ComponentState.PRESSED;\n      } else if (gamepadButton.touched || this.values.button > Constants.ButtonTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize x axis value\n    if (this.gamepadIndices.xAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.xAxis) {\n      this.values.xAxis = gamepad.axes[this.gamepadIndices.xAxis];\n      this.values.xAxis = (this.values.xAxis < -1) ? -1 : this.values.xAxis;\n      this.values.xAxis = (this.values.xAxis > 1) ? 1 : this.values.xAxis;\n\n      // If the state is still default, check if the xAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.xAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize Y axis value\n    if (this.gamepadIndices.yAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.yAxis) {\n      this.values.yAxis = gamepad.axes[this.gamepadIndices.yAxis];\n      this.values.yAxis = (this.values.yAxis < -1) ? -1 : this.values.yAxis;\n      this.values.yAxis = (this.values.yAxis > 1) ? 1 : this.values.yAxis;\n\n      // If the state is still default, check if the yAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.yAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Update the visual response weights based on the current component data\n    Object.values(this.visualResponses).forEach((visualResponse) => {\n      visualResponse.updateFromComponent(this.values);\n    });\n  }\n}\n\n/**\n  * @description Builds a motion controller with components and visual responses based on the\n  * supplied profile description. Data is polled from the xrInputSource's gamepad.\n  * @author Nell Waliczek / https://github.com/NellWaliczek\n*/\nclass MotionController {\n  /**\n   * @param {Object} xrInputSource - The XRInputSource to build the MotionController around\n   * @param {Object} profile - The best matched profile description for the supplied xrInputSource\n   * @param {Object} assetUrl\n   */\n  constructor(xrInputSource, profile, assetUrl) {\n    if (!xrInputSource) {\n      throw new Error('No xrInputSource supplied');\n    }\n\n    if (!profile) {\n      throw new Error('No profile supplied');\n    }\n\n    this.xrInputSource = xrInputSource;\n    this.assetUrl = assetUrl;\n    this.id = profile.profileId;\n\n    // Build child components as described in the profile description\n    this.layoutDescription = profile.layouts[xrInputSource.handedness];\n    this.components = {};\n    Object.keys(this.layoutDescription.components).forEach((componentId) => {\n      const componentDescription = this.layoutDescription.components[componentId];\n      this.components[componentId] = new Component(componentId, componentDescription);\n    });\n\n    // Initialize components based on current gamepad state\n    this.updateFromGamepad();\n  }\n\n  get gripSpace() {\n    return this.xrInputSource.gripSpace;\n  }\n\n  get targetRaySpace() {\n    return this.xrInputSource.targetRaySpace;\n  }\n\n  /**\n   * @description Returns a subset of component data for simplified debugging\n   */\n  get data() {\n    const data = [];\n    Object.values(this.components).forEach((component) => {\n      data.push(component.data);\n    });\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   */\n  updateFromGamepad() {\n    Object.values(this.components).forEach((component) => {\n      component.updateFromGamepad(this.xrInputSource.gamepad);\n    });\n  }\n}\n\nexport { Constants, MotionController, fetchProfile, fetchProfilesList };\n","import {\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tQuaternion,\n\tSphereBufferGeometry,\n} from \"../../../build/three.module.js\";\n\nimport { GLTFLoader } from '../loaders/GLTFLoader.js';\n\nimport {\n\tConstants as MotionControllerConstants,\n\tfetchProfile,\n\tMotionController\n} from '../libs/motion-controllers.module.js';\n\nconst DEFAULT_PROFILES_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles';\nconst DEFAULT_PROFILE = 'generic-trigger';\n\nfunction XRControllerModel( ) {\n\n\tObject3D.call( this );\n\n\tthis.motionController = null;\n\tthis.envMap = null;\n\n}\n\nXRControllerModel.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: XRControllerModel,\n\n\tsetEnvironmentMap: function ( envMap ) {\n\n\t\tif ( this.envMap == envMap ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.envMap = envMap;\n\t\tthis.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = this.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Polls data from the XRInputSource and updates the model's components to match\n\t * the real world data\n\t */\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( ! this.motionController ) return;\n\n\t\t// Cause the MotionController to poll the Gamepad for data\n\t\tthis.motionController.updateFromGamepad();\n\n\t\t// Update the 3D model to reflect the button, thumbstick, and touchpad state\n\t\tObject.values( this.motionController.components ).forEach( ( component ) => {\n\n\t\t\t// Update node data based on the visual responses' current states\n\t\t\tObject.values( component.visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\t\tconst { valueNode, minNode, maxNode, value, valueNodeProperty } = visualResponse;\n\n\t\t\t\t// Skip if the visual response node is not found. No error is needed,\n\t\t\t\t// because it will have been reported at load time.\n\t\t\t\tif ( ! valueNode ) return;\n\n\t\t\t\t// Calculate the new properties based on the weight supplied\n\t\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.VISIBILITY ) {\n\n\t\t\t\t\tvalueNode.visible = value;\n\n\t\t\t\t} else if ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\t\tQuaternion.slerp(\n\t\t\t\t\t\tminNode.quaternion,\n\t\t\t\t\t\tmaxNode.quaternion,\n\t\t\t\t\t\tvalueNode.quaternion,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t\tvalueNode.position.lerpVectors(\n\t\t\t\t\t\tminNode.position,\n\t\t\t\t\t\tmaxNode.position,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n} );\n\n/**\n * Walks the model's tree to find the nodes needed to animate the components and\n * saves them to the motionContoller components for use in the frame loop. When\n * touchpads are found, attaches a touch dot to them.\n */\nfunction findNodes( motionController, scene ) {\n\n\t// Loop through the components and find the nodes needed for each components' visual responses\n\tObject.values( motionController.components ).forEach( ( component ) => {\n\n\t\tconst { type, touchPointNodeName, visualResponses } = component;\n\n\t\tif ( type === MotionControllerConstants.ComponentType.TOUCHPAD ) {\n\n\t\t\tcomponent.touchPointNode = scene.getObjectByName( touchPointNodeName );\n\t\t\tif ( component.touchPointNode ) {\n\n\t\t\t\t// Attach a touch dot to the touchpad.\n\t\t\t\tconst sphereGeometry = new SphereBufferGeometry( 0.001 );\n\t\t\t\tconst material = new MeshBasicMaterial( { color: 0x0000FF } );\n\t\t\t\tconst sphere = new Mesh( sphereGeometry, material );\n\t\t\t\tcomponent.touchPointNode.add( sphere );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( `Could not find touch dot, ${component.touchPointNodeName}, in touchpad component ${component.id}` );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Loop through all the visual responses to be applied to this component\n\t\tObject.values( visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\tconst { valueNodeName, minNodeName, maxNodeName, valueNodeProperty } = visualResponse;\n\n\t\t\t// If animating a transform, find the two nodes to be interpolated between.\n\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\tvisualResponse.minNode = scene.getObjectByName( minNodeName );\n\t\t\t\tvisualResponse.maxNode = scene.getObjectByName( maxNodeName );\n\n\t\t\t\t// If the extents cannot be found, skip this animation\n\t\t\t\tif ( ! visualResponse.minNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${minNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! visualResponse.maxNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${maxNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If the target node cannot be found, skip this animation\n\t\t\tvisualResponse.valueNode = scene.getObjectByName( valueNodeName );\n\t\t\tif ( ! visualResponse.valueNode ) {\n\n\t\t\t\tconsole.warn( `Could not find ${valueNodeName} in the model` );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n}\n\nfunction addAssetSceneToControllerModel( controllerModel, scene ) {\n\n\t// Find the nodes needed for animation and cache them on the motionController.\n\tfindNodes( controllerModel.motionController, scene );\n\n\t// Apply any environment map that the mesh already has set.\n\tif ( controllerModel.envMap ) {\n\n\t\tscene.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = controllerModel.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t// Add the glTF scene to the controllerModel.\n\tcontrollerModel.add( scene );\n\n}\n\nvar XRControllerModelFactory = ( function () {\n\n\tfunction XRControllerModelFactory( gltfLoader = null ) {\n\n\t\tthis.gltfLoader = gltfLoader;\n\t\tthis.path = DEFAULT_PROFILES_PATH;\n\t\tthis._assetCache = {};\n\n\t\t// If a GLTFLoader wasn't supplied to the constructor create a new one.\n\t\tif ( ! this.gltfLoader ) {\n\n\t\t\tthis.gltfLoader = new GLTFLoader();\n\n\t\t}\n\n\t}\n\n\tXRControllerModelFactory.prototype = {\n\n\t\tconstructor: XRControllerModelFactory,\n\n\t\tcreateControllerModel: function ( controller ) {\n\n\t\t\tconst controllerModel = new XRControllerModel();\n\t\t\tlet scene = null;\n\n\t\t\tcontroller.addEventListener( 'connected', ( event ) => {\n\n\t\t\t\tconst xrInputSource = event.data;\n\n\t\t\t\tif ( xrInputSource.targetRayMode !== 'tracked-pointer' || ! xrInputSource.gamepad ) return;\n\n\t\t\t\tfetchProfile( xrInputSource, this.path, DEFAULT_PROFILE ).then( ( { profile, assetPath } ) => {\n\n\t\t\t\t\tcontrollerModel.motionController = new MotionController(\n\t\t\t\t\t\txrInputSource,\n\t\t\t\t\t\tprofile,\n\t\t\t\t\t\tassetPath\n\t\t\t\t\t);\n\n\t\t\t\t\tconst cachedAsset = this._assetCache[ controllerModel.motionController.assetUrl ];\n\t\t\t\t\tif ( cachedAsset ) {\n\n\t\t\t\t\t\tscene = cachedAsset.scene.clone();\n\n\t\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( ! this.gltfLoader ) {\n\n\t\t\t\t\t\t\tthrow new Error( `GLTFLoader not set.` );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.gltfLoader.setPath( '' );\n\t\t\t\t\t\tthis.gltfLoader.load( controllerModel.motionController.assetUrl, ( asset ) => {\n\n\t\t\t\t\t\t\tthis._assetCache[ controllerModel.motionController.assetUrl ] = asset;\n\n\t\t\t\t\t\t\tscene = asset.scene.clone();\n\n\t\t\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t() => {\n\n\t\t\t\t\t\t\tthrow new Error( `Asset ${controllerModel.motionController.assetUrl} missing or malformed.` );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} ).catch( ( err ) => {\n\n\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t\tcontroller.addEventListener( 'disconnected', () => {\n\n\t\t\t\tcontrollerModel.motionController = null;\n\t\t\t\tcontrollerModel.remove( scene );\n\t\t\t\tscene = null;\n\n\t\t\t} );\n\n\t\t\treturn controllerModel;\n\n\t\t}\n\n\t};\n\n\treturn XRControllerModelFactory;\n\n} )();\n\nexport { XRControllerModelFactory };\n","import {\n\trenderer, rafCallbacks\n} from '../scene.js';\n\nconst prevGamePads = new Map();\nconst gamepad = new EventTarget();\n\nfunction dispatchEvent(type, detail) {\n\tconst specificEvent = new CustomEvent(type, {detail});\n\n\tconst generalDetail = {type};\n\tObject.assign(generalDetail, detail);\n\tconst generalEvent = new CustomEvent('gamepadInteraction', {detail: generalDetail});\n\n\tgamepad.dispatchEvent(specificEvent);\n\tgamepad.dispatchEvent(generalEvent);\n}\n\nrafCallbacks.add(() => {\n\tconst session = renderer.xr.getSession();\n\tlet i = 0;\n\tif (session) for (const source of session.inputSources) {\n\t\tif (!source.gamepad) continue;\n\t\tconst controller = renderer.xr.getController(i++);\n\t\tconst old = prevGamePads.get(source);\n\t\tconst data = {\n\t\t\tbuttons: source.gamepad.buttons.map(b => b.value),\n\t\t\taxes: source.gamepad.axes.slice(0)\n\t\t};\n\t\tif (old) {\n\t\t\tdata.buttons.forEach((value,i)=>{\n\t\t\t\tif (value !== old.buttons[i]) {\n\t\t\t\t\tif (value === 1) {\n\t\t\t\t\t\tdispatchEvent(`button${i}Down`, {value, source, controller,data});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdispatchEvent(`button${i}Up`, {value, source, controller,data});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.axes.forEach((value,i)=>{\n\t\t\t\tif (value !== old.axes[i]) {\n\t\t\t\t\tdispatchEvent(`axes${i}Move`, {value, source, controller,data});\n\t\t\t\t\tif (old.axes[i] === 0) {\n\t\t\t\t\t\tdispatchEvent(`axes${i}MoveStart`, {value, source, controller,data});\n\t\t\t\t\t}\n\t\t\t\t\tif (Math.abs(old.axes[i]) < 0.5 && Math.abs(value) > 0.5) {\n\t\t\t\t\t\tdispatchEvent(`axes${i}MoveMiddle`, {value, source, controller,data});\n\t\t\t\t\t}\n\t\t\t\t\tif (value === 0) {\n\t\t\t\t\t\tdispatchEvent(`axes${i}MoveEnd`, {value, source, controller,data});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tprevGamePads.set(source, data);\n\t}\n});\n\nexport {\n\tgamepad\n}","import {\n\tcameraGroup, camera\n} from '../../scene.js';\nimport {\n\tMesh,\n\tMeshBasicMaterial,\n\tSphereBufferGeometry,\n\tBackSide\n} from 'three';\n\nimport TWEEN from '@tweenjs/tween.js/dist/tween.esm.js';\n\nfunction locomotion(offset) {\n\n\tblinkerSphere.visible = true;\n\tblinkerSphere.material.opacity = 0;\n\tnew TWEEN.Tween(blinkerSphere.material)\n\t\t.to({opacity: 1}, 200)\n\t\t.easing(TWEEN.Easing.Quadratic.Out)\n\t\t.onComplete(function () {\n\n\t\t\t// Do the teleport\n\t\t\tcameraGroup.position.add(offset);\n\n\t\t\t// Fade back\n\t\t\tnew TWEEN.Tween(blinkerSphere.material)\n\t\t\t\t.to({opacity: 0}, 200)\n\t\t\t\t.onComplete(() => blinkerSphere.visible = false)\n\t\t\t\t.start();\n\t\t})\n\t\t.start();\n}\n\nconst blinkerSphereGeometry = new SphereBufferGeometry(0.3, 16, 16);\nblinkerSphereGeometry.translate(0,0.3,0);\nconst blinkerSphereMaterial = new MeshBasicMaterial({\n\tside: BackSide,\n\tcolor: 0x000000,\n\ttransparent: true\n});\nconst blinkerSphere = new Mesh( blinkerSphereGeometry, blinkerSphereMaterial );\nblinkerSphere.rotation.set(Math.PI/2, 0, 0);\nblinkerSphere.position.set(0, 0, -0.3);\nblinkerSphere.visible = false;\ncamera.add(blinkerSphere);\nblinkerSphereMaterial.renderOrder = -101;\n\nexport {\n\tlocomotion\n}","import {\n\tscene, renderer, rafCallbacks, cameraGroup, camera\n} from '../scene.js';\nimport { XRControllerModelFactory } from 'three/examples/jsm/webxr/XRControllerModelFactory.js';\nimport {\n\tMesh,\n\tMeshBasicMaterial,\n\tVector3,\n\tPointLight,\n\tPlaneGeometry,\n\tTextureLoader,\n\tBufferGeometry,\n\tBufferAttribute,\n\tLineBasicMaterial,\n\tAdditiveBlending,\n\tLine\n} from 'three';\nimport {\n\tgamepad\n} from './gamepad.js';\n\nimport {\n\tlocomotion\n} from './locomotion/fade.js';\n\nfunction positionAtT(inVec,t,p,v,g) {\n\tinVec.copy(p);\n\tinVec.addScaledVector(v,t);\n\tinVec.addScaledVector(g,0.5*t**2);\n\treturn inVec;\n}\n\n// Utility Vectors\nconst g = new Vector3(0,-9.8,0);\nconst tempVec = new Vector3();\nconst tempVec1 = new Vector3();\nconst tempVecP = new Vector3();\nconst tempVecV = new Vector3();\n\n// The guideline\nconst lineSegments=10;\nconst lineGeometry = new BufferGeometry();\nconst lineGeometryVertices = new Float32Array((lineSegments +1) * 3);\nlineGeometryVertices.fill(0);\nconst lineGeometryColors = new Float32Array((lineSegments +1) * 3);\nlineGeometryColors.fill(0.5);\nlineGeometry.setAttribute('position', new BufferAttribute(lineGeometryVertices, 3));\nlineGeometry.setAttribute('color', new BufferAttribute(lineGeometryColors, 3));\nconst lineMaterial = new LineBasicMaterial({ vertexColors: true, blending: AdditiveBlending });\nconst guideline = new Line( lineGeometry, lineMaterial );\n\n// The light at the end of the line\nconst guidelight = new PointLight(0xffeeaa, 0, 2);\n\n// The target on the ground\nconst guidespriteTexture = new TextureLoader().load('./assets/target.png');\nconst guidesprite = new Mesh(\n\tnew PlaneGeometry(0.3, 0.3, 1, 1),\n\tnew MeshBasicMaterial({\n\t\tmap: guidespriteTexture,\n\t\tblending: AdditiveBlending,\n\t\tcolor: 0x555555,\n\t\ttransparent: true\n\t})\n);\nguidesprite.rotation.x = -Math.PI/2;\n\nconst controller1 = renderer.xr.getController(0);\ncontroller1.addEventListener('selectstart', onSelectStart);\ncontroller1.addEventListener('selectend', onSelectEnd);\ncameraGroup.add(controller1);\nlet guidingController = null;\n\nconst controller2 = renderer.xr.getController(1);\ncontroller2.addEventListener('selectstart', onSelectStart);\ncontroller2.addEventListener('selectend', onSelectEnd);\ncameraGroup.add(controller2);\n\nconst controllerModelFactory = new XRControllerModelFactory();\n\nconst controllerGrip1 = renderer.xr.getControllerGrip(0);\nconst model1 = controllerModelFactory.createControllerModel( controllerGrip1 );\ncontrollerGrip1.add( model1 );\ncameraGroup.add( controllerGrip1 );\n\nconst controllerGrip2 = renderer.xr.getControllerGrip( 1 );\nconst model2 = controllerModelFactory.createControllerModel( controllerGrip2 );\ncontrollerGrip2.add( model2 );\ncameraGroup.add( controllerGrip2 );\n\nfunction onSelectStart() {\n\tguidingController = this;\n\tguidelight.intensity = 1;\n\tthis.add(guideline);\n\tscene.add(guidesprite);\n}\n\nfunction onSelectEnd() {\n\tif (guidingController === this) {\n\n\t\t// first work out vector from feet to cursor\n\n\t\t// feet position\n\t\tconst feetPos = renderer.xr.getCamera(camera).getWorldPosition(tempVec);\n\t\tfeetPos.y = 0;\n\n\t\t// cursor position\n\t\tconst p = guidingController.getWorldPosition(tempVecP);\n\t\tconst v = guidingController.getWorldDirection(tempVecV);\n\t\tv.multiplyScalar(6);\n\t\tconst t = (-v.y  + Math.sqrt(v.y**2 - 2*p.y*g.y))/g.y;\n\t\tconst cursorPos = positionAtT(tempVec1,t,p,v,g);\n\n\t\t// Offset\n\t\tconst offset = cursorPos.addScaledVector(feetPos ,-1);\n\n\t\t// Do the locomotion\n\t\tlocomotion(offset);\n\n\t\t// clean up\n\t\tguidingController = null;\n\t\tguidelight.intensity = 0;\n\t\tthis.remove(guideline);\n\t\tscene.remove(guidesprite);\n\t}\n}\n\nrafCallbacks.add(() => {\n\tif (guidingController) {\n\t\t// Controller start position\n\t\tconst p = guidingController.getWorldPosition(tempVecP);\n\n\t\t// Set Vector V to the direction of the controller, at 1m/s\n\t\tconst v = guidingController.getWorldDirection(tempVecV);\n\n\t\t// Scale the initial velocity to 6m/s\n\t\tv.multiplyScalar(6);\n\n\t\t// Time for tele ball to hit ground\n\t\tconst t = (-v.y  + Math.sqrt(v.y**2 - 2*p.y*g.y))/g.y;\n\n\t\tconst vertex = tempVec.set(0,0,0);\n\t\tfor (let i=1; i<=lineSegments; i++) {\n\n\t\t\t// set vertex to current position of the virtual ball at time t\n\t\t\tpositionAtT(vertex,i*t/lineSegments,p,v,g);\n\t\t\tguidingController.worldToLocal(vertex);\n\t\t\tvertex.toArray(lineGeometryVertices,i*3);\n\t\t}\n\t\tguideline.geometry.attributes.position.needsUpdate = true;\n\n\t\t// Place the light and sprite near the end of the poing\n\t\tpositionAtT(guidelight.position,t*0.98,p,v,g);\n\t\tpositionAtT(guidesprite.position,t*0.98,p,v,g);\n\t}\n});\n\nfunction handleMove({detail}) {\n\t// Turn left\n\tif (detail.value > 0) {\n\t\tcameraGroup.rotation.y -= Math.PI/4;\n\t}\n\t// Turn right\n\tif (detail.value < 0) {\n\t\tcameraGroup.rotation.y += Math.PI/4;\n\t}\n}\ngamepad.addEventListener('axes0MoveMiddle', handleMove, true);\ngamepad.addEventListener('axes2MoveMiddle', handleMove, true);\n\nfunction handleUp({detail}) {\n\tif (detail.value < 0) {\n\t\tonSelectStart.bind(detail.controller)();\n\t}\n}\nfunction handleUpEnd({detail}) {\n\tonSelectEnd.bind(detail.controller)();\n}\ngamepad.addEventListener('axes1MoveMiddle', handleUp, true);\ngamepad.addEventListener('axes3MoveMiddle', handleUp, true);\ngamepad.addEventListener('axes1MoveEnd', handleUpEnd, true);\ngamepad.addEventListener('axes3MoveEnd', handleUpEnd, true);\n\nexport {\n\tcontroller1,\n\tcontroller2,\n\tcontrollerGrip1,\n\tcontrollerGrip2\n}","// Original src: https://github.com/zz85/threejs-path-flow\nconst BITS = 3;\nconst TEXTURE_WIDTH = 1024;\nconst TEXTURE_HEIGHT = 4; // Ideally this should be able to be set to high powers of 2 but the parts from further down the texture get warped in that situation\n\nimport {\n\tDataTexture,\n\tRGBFormat,\n\tFloatType,\n\tRepeatWrapping,\n\tMesh,\n\tInstancedMesh,\n\tNearestFilter,\n\tDynamicDrawUsage,\n\tMatrix4\n} from 'three';\n\n/**\n * Prepares texture for storing positions and normals for spline\n */\nexport function initSplineTexture(numberOfCurves) {\n\tconst dataArray = new Float32Array( TEXTURE_WIDTH * TEXTURE_HEIGHT * numberOfCurves * BITS );\n\tconst dataTexture = new DataTexture(\n\t\tdataArray,\n\t\tTEXTURE_WIDTH,\n\t\tTEXTURE_HEIGHT * numberOfCurves,\n\t\tRGBFormat,\n\t\tFloatType\n\t);\n\n\tdataTexture.wrapS = RepeatWrapping;\n\tdataTexture.wrapY = RepeatWrapping;\n\tdataTexture.magFilter = NearestFilter;\n\tdataTexture.needsUpdate = true;\n\n\treturn dataTexture;\n}\n\nexport function updateSplineTexture(texture, splineCurve, offset) {\n\n\tconst numberOfPoints = Math.floor(TEXTURE_WIDTH * (TEXTURE_HEIGHT/4));\n\tsplineCurve.arcLengthDivisions = numberOfPoints/2;\n\tsplineCurve.updateArcLengths();\n\tconst points = splineCurve.getSpacedPoints(numberOfPoints);\n\tconst frenetFrames = splineCurve.computeFrenetFrames(numberOfPoints, true);\n\n\tfor (let i = 0; i < numberOfPoints; i++) {\n\t\tlet rowOffset = Math.floor(i / TEXTURE_WIDTH);\n\t\tlet rowIndex = i % TEXTURE_WIDTH;\n\n\t\tlet pt = points[i];\n\t\tsetTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 0 + rowOffset + (TEXTURE_HEIGHT * offset));\n\t\tpt = frenetFrames.tangents[i];\n\t\tsetTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 1 + rowOffset + (TEXTURE_HEIGHT * offset));\n\t\tpt = frenetFrames.normals[i];\n\t\tsetTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 2 + rowOffset + (TEXTURE_HEIGHT * offset));\n\t\tpt = frenetFrames.binormals[i];\n\t\tsetTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 3 + rowOffset + (TEXTURE_HEIGHT * offset));\n\t}\n\n\ttexture.needsUpdate = true;\n}\n\nfunction setTextureValue(texture, index, x, y, z, o) {\n\tconst image = texture.image;\n\tconst { data } = image;\n\tconst i = BITS * TEXTURE_WIDTH * o; // Row Offset\n\tdata[index * BITS + i + 0] = x;\n\tdata[index * BITS + i + 1] = y;\n\tdata[index * BITS + i + 2] = z;\n}\n\nexport function getUniforms(splineTexture) {\n\tconst uniforms = {\n\t\tspineTexture: { value: splineTexture },\n\t\tpathOffset: { type: 'f', value: 0 }, // time of path curve\n\t\tpathSegment: { type: 'f', value: 1 }, // fractional length of path\n\t\tspineOffset: { type: 'f', value: 161 },\n\t\tspineLength: { type: 'f', value: 400 },\n\t\tflow: { type: 'i', value: 1 },\n\t};\n\treturn uniforms;\n}\n\nexport function modifyShader(material, uniforms, numberOfCurves) {\n\tuniforms = uniforms || getUniforms();\n\tif (material.__ok) return;\n\tmaterial.__ok = true;\n\n\tmaterial.onBeforeCompile = (shader) => {\n\n\t\tif (shader.__modified) return;\n\t\tshader.__modified = true;\n\n\t\tObject.assign(shader.uniforms, uniforms);\n\n\t\tconst vertexShader = `\n\t\tuniform sampler2D spineTexture;\n\t\tuniform float pathOffset;\n\t\tuniform float pathSegment;\n\t\tuniform float spineOffset;\n\t\tuniform float spineLength;\n\t\tuniform int flow;\n\n\t\tfloat textureLayers = ${TEXTURE_HEIGHT * numberOfCurves}.;\n\t\tfloat textureStacks = ${TEXTURE_HEIGHT/4}.;\n\n\t\t${shader.vertexShader}\n\t\t`.replace(\n\t\t'#include <defaultnormal_vertex>',\n\t\t`\n\t\tvec4 worldPos = modelMatrix * vec4(position, 1.);\n\n\t\tbool bend = flow > 0;\n\t\tfloat xWeight = bend ? 0. : 1.;\n\n\t\t#ifdef USE_INSTANCING\n\t\tfloat pathOffsetFromInstanceMatrix = instanceMatrix[3][2];\n\t\tfloat spineLengthFromInstanceMatrix = instanceMatrix[3][0];\n\t\tfloat spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;\n\t\tfloat mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;\n\t\t#else\n\t\tfloat spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;\n\t\tfloat mt = (spinePortion * pathSegment + pathOffset)*textureStacks;\n\t\t#endif\n\n\t\tmt = mod(mt, textureStacks);\n\t\tfloat rowOffset = floor(mt);\n\n\t\t#ifdef USE_INSTANCING\n\t\trowOffset += instanceMatrix[3][1] * ${TEXTURE_HEIGHT}.;\n\t\t#endif\n\n\t\tvec3 spinePos = texture(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;\n\t\tvec3 a =        texture(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;\n\t\tvec3 b =        texture(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;\n\t\tvec3 c =        texture(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;\n\t\tmat3 basis = mat3(a, b, c);\n\n\t\tvec3 transformed = basis\n\t\t\t* vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)\n\t\t\t+ spinePos;\n\n\t\tvec3 transformedNormal = normalMatrix * (basis * objectNormal);\n\t\t`\n\t).replace(\n\t\t'#include <begin_vertex>',\n\t\t''\n\t).replace(\n\t\t'#include <project_vertex>',\n\t\t`\n\t\t\tvec4 mvPosition = viewMatrix * vec4( transformed, 1.0 );\n\t\t\t// vec4 mvPosition = viewMatrix * worldPos;\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t\t`\n\t)\n\n\t\tshader.vertexShader = vertexShader\n\t}\n\n\treturn uniforms;\n}\n\n/**\n * Ideally this would perform the material changes before cloning\n * so that they all share the same material making it much more\n * efficient but as far as I can tell there is currently no way\n * of doing that with beforeCompile.\n */\nexport class Flow {\n\tconstructor(mesh, numberOfCurves=1) {\n\t\tconst obj3D = mesh.clone();\n\t\tconst splineTexure = initSplineTexture(numberOfCurves);\n\t\tconst uniforms = getUniforms(splineTexure);\n\t\tobj3D.traverse(function (child) {\n\t\t\tif (\n\t\t\t\tchild instanceof Mesh ||\n\t\t\t\tchild instanceof InstancedMesh\n\t\t\t) {\n\t\t\t\tchild.material = child.material.clone();\n\t\t\t\tmodifyShader( child.material, uniforms, numberOfCurves );\n\t\t\t}\n\t\t});\n\n\t\tthis.curveArray = new Array(numberOfCurves);\n\t\tthis.curveLengthArray = new Array(numberOfCurves);\n\t\tthis.currentCurveCount = 0;\n\n\t\tthis.object3D = obj3D;\n\t\tthis.splineTexure = splineTexure;\n\t\tthis.uniforms = uniforms;\n\t}\n\n\tupdateCurve(index, curve) {\n\t\tif (index >= this.curveArray.length) throw Error('Index out of range for Flow');\n\t\tconst curveLength = curve.getLength();\n\t\tthis.uniforms.spineLength.value = curveLength;\n\t\tthis.curveLengthArray[index] = curveLength;\n\t\tthis.curveArray[index] = curve;\n\t\tupdateSplineTexture(this.splineTexure, curve, index);\n\t}\n\n\tmoveAlongCurve(amount) {\n\t\tthis.uniforms.pathOffset.value += amount;\n\t}\n}\nconst matrix = new Matrix4();\nexport class InstancedFlow extends Flow {\n\tconstructor(count, curveCount, geometry, material) {\n\t\tconst mesh = new InstancedMesh(\n\t\t\tgeometry,\n\t\t\tmaterial,\n\t\t\tcount\n\t\t);\n\t\tmesh.instanceMatrix.setUsage(DynamicDrawUsage);\n\t\tsuper(mesh, curveCount);\n\n\t\tthis.offsets = new Array(count).fill(0);\n\t\tthis.whichCurve = new Array(count).fill(0);\n\t\tthis.count = count;\n\t}\n\twriteChanges(index) {\n\t\tmatrix.makeTranslation(\n\t\t\tthis.curveLengthArray[this.whichCurve[index]],\n\t\t\tthis.whichCurve[index],\n\t\t\tthis.offsets[index]\n\t\t);\n\t\tthis.object3D.setMatrixAt(index, matrix);\n\t\tthis.object3D.instanceMatrix.needsUpdate = true;\n\t}\n\tmoveIndividualAlongCurve(index, offset) {\n\t\tthis.offsets[index] += offset;\n\t\tthis.writeChanges(index);\n\t}\n\tsetCurve(index, curveNo) {\n\t\tif (isNaN(curveNo)) throw Error(\"curve index being set is Not a Number (NaN)\")\n\t\tthis.whichCurve[index] = curveNo;\n\t\tthis.writeChanges(index);\n\t}\n}","import { Vector3 } from \"three\";\nconst curveData = JSON.parse(\"[[[-1,0.15,1],[-1,0.15,-1],[-1.181,0,-2.783],[1.019,0.15,-2.352],[3.143,0.15,-1],[2,0.15,2]],[[0.585,0,4.602],[0.949,0.15,2.508],[-0.181,0,2.341],[0,0.15,1],[-1,0.15,-2],[-2.324,0,-1.334],[-2,0.15,1],[-3,0.15,4]],[[7.609,0.15,0.07],[10.305,0.15,0.851],[7.943,0.15,3.415],[5.731,0,4.937],[4.372,0,2.548],[5.874,0.15,1.987]],[[0.48,0,-3.013],[-0.927,0,-3.178],[-1.662,0,-2.851],[-2.895,0,-3.53],[-2.153,0,-5.519],[-0.731,0,-6.387],[0.406,0,-5.602],[0.845,0,-4.414]],[[-14.143,0,-1.582],[-12.974,0,-4.005],[-11.093,0,-4.994],[-8.276,0,-6.303],[-6.037,0,-5.134],[-5.598,0,-2.426],[-6.756,0,-0.779],[-9.308,0,-1.146],[-12.407,0,-0.196]],[[-11.268,0,3.552],[-8.877,0,4.241],[-8.752,0,2.78],[-7.076,0,2.479],[-4.63,0,3.15],[-3.283,0,1.436],[-2.555,0,0.182],[-3.448,0,-0.893],[-5.919,0,-0.658],[-7.421,0,0.33],[-9.554,0,-0.223],[-11.381,0,0.569]],[[-2.544,0,8.43],[-1.779,0,5.972],[-3.337,0,6.654],[-4.747,0,5.874],[-3.961,0,4.454],[-5.661,0,4.084],[-7.603,0,3.953],[-8.199,0,4.645],[-9.519,0,5.208],[-10.295,0,6.14],[-9.092,0,8.563],[-8.171,0,9.79],[-7.17,0,9.577],[-7.766,0,8.75],[-7.081,0,6.775],[-5.739,0,8.582],[-7.303,0,10.329]],[[-0.981,0,8.102],[-1.071,0,6.366],[3.132,0,4.779],[4.68,0,6.075],[3.931,0,8.25],[2.431,0,9.101],[0.694,0,7.657],[0.506,0,5.367],[3.035,0,5.493],[3.472,0,7.077],[2.381,0,7.836],[1.624,0,7.307]],[[-7.099,0,-12.514],[-5.901,0,-11.888],[-4.256,0,-10.233],[-6.128,0,-8.909],[-8.381,0,-10.521],[-7.53,0,-11.605]],[[3.87,0,-4.785],[5.653,0,-5.735],[7.329,0,-3.98],[6.057,0,-2.805],[3.998,0,-3.511]],[[5.328,0,6.344],[8.128,0,4.969],[9.063,0,7.791],[7.52,0,9.222],[5.288,0,8.956]],[[-7.21,0,-2.618],[-9.013,0,-3.601],[-10.172,0,-3.451],[-11.815,0,-6.614],[-13.207,0,-4.267],[-12.216,0,-3.248],[-12.023,0,-2.199],[-11.49,0,-0.99],[-10.077,0,-1.343],[-8.047,0,-1.694]],[[2.511,0,0.777],[2.704,0,-1.219],[0.312,0,-1.598],[0.46,0,0.008]],[[3.555,0,2.104],[3.226,0,0.983],[3.89,0,-0.925],[2.138,0,-2.237],[3.546,0,-3.144],[5.016,0,-2.35],[7.103,0,-2.382],[8.051,0,-1.758],[7.27,0,-0.42],[6.4,0,0.731],[5.509,0,1.609]],[[-10.346,0,3.433],[-10.866,0,2.243],[-10.492,0,0.366],[-8.583,0,0.556],[-8.364,0,1.895],[-9.473,0,3.43]],[[-7.572,0,1.525],[-6.665,0,0.787],[-5.618,0,-0.071],[-4.262,0,-0.293],[-4.249,0,0.875],[-3.816,0,1.763],[-5.145,0,2.699],[-6.298,0,2.251]],[[1.308,0,4.122],[1.6,0,3.036],[2.286,0,2.147],[3.58,0,2.658],[3.905,0,3.691],[3.346,0,4.412],[1.965,0,4.334]],[[-4.538,0,4.823],[-5.207,0,4.535],[-7.154,0,4.802],[-8.455,0,6.313],[-7.628,0,6.537],[-5.909,0,6.584],[-5.201,0,8.037],[-4.204,0,8.502],[-3.079,0,8.015],[-2.168,0,7.196],[-3.26,0,6.985],[-4.817,0,6.435],[-5.08,0,5.701]],[[-1.812,0,2.236],[-0.852,0,1.788],[-0.637,0,2.516],[0.672,0,2.919],[0.481,0,3.999],[-1.125,0,4.368],[-2.406,0,4.044]],[[-4.541,0,-2.186],[-3.62,0,-2.669],[-3.033,0,-1.838],[-3.649,0,-1.37]],[[1.18,0,-12.513],[2.768,0,-10.997],[3.464,0,-8.367],[1.437,0,-7.586],[0.156,0,-7.036],[-0.887,0,-8.682],[0.109,0,-10.614]],[[2.353,0,-5.524],[1.879,0,-6.822],[3.422,0,-7.657],[-1.599,0,-11.696],[-1.172,0,-10.717],[-2.005,0,-8.23],[-3.473,0,-6.588],[-5.197,0,-6.988],[-5.462,0,-8.365],[-3.999,0,-9.301],[-4.063,0,-11.428]],[[2.673,0,-7.133],[4.413,0,-7.885],[5.14,0,-6.248],[4.198,0,-5.599],[3.419,0,-5.143],[3.345,0,-4.144],[1.618,0,-3.875],[1.06,0,-4.785],[1.036,0,-6.336]],[[6.979,0,-9.945],[7.506,0,-4.59],[6.669,0,-6.427],[5.048,0,-8.403],[3.409,0,-10.188],[1.965,0,-12.822]],[[8.019,0,-3.865],[10.063,0,-3.804],[11.247,0,-5.626],[11.025,0,-4.073],[12.51,0,-5.346],[11.998,0,-3.846],[14.276,0,-3.373],[12.933,0,-2.573],[13.905,0,-1.157],[12.624,0,-1.534],[11.721,0,-0.445],[10.423,0,-1.439],[8.728,0,-3.016],[9.712,0,-4.664],[7.765,0,-5.505]],[[12.206,0,1.27],[12.956,0,2.156],[11.434,0,2.824],[13.371,0,3.806],[14.251,0,5.444],[12.494,0,6.359],[10.743,0,7.531],[10.03,0,6.089],[8.921,0,4.48]]]\");\nconst lilyPad1Data = JSON.parse(\"[[-8.166,-1.184,-3.625],[0.759,-0.118,0.201],[2.127,0,1.745],[-2.644,7.108,-0.629],[-8.293,0,4.19],[-4.026,0,6.005],[3.061,0,7.008],[6.414,0,-3.748],[5.725,0,-3.251],[0.736,0,-8.463],[0.716,0,-9.431]]\");\nconst lilyPad2Data = JSON.parse(\"[[-0.728,0,3.497],[-1.483,0,3.603],[7.124,0,2.894],[7.823,0,1.236],[-8.2,0,-3.662],[-7.197,0,-3.354],[-7.013,0,3.543],[-7.788,0,2.617],[-3.806,0,7.43],[-7.295,0,5.788],[1.6,0,7.936],[2.071,0,6.071],[6.452,0,6.896],[7.638,0,7.418],[11.143,0,5.576],[11.766,0,4.914],[12.005,0,-1.567],[11.59,0,-2.894],[-6.432,0,-10.409],[-6.034,0,-10.763],[2.065,0,-0.56],[1.382,0,-0.861],[5.85,0,-0.066],[4.992,0,0.311]]\");\n\nexport const curves = curveData.map((curve) =>\n\tcurve.map((vertex) => new Vector3().fromArray(vertex))\n);\n\nexport const lilyPad1 = lilyPad1Data.map((vertex) => new Vector3().fromArray(vertex));\nexport const lilyPad2 = lilyPad2Data.map((vertex) => new Vector3().fromArray(vertex));","import { BackSide } from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nconst loader = new GLTFLoader();\n\nasync function loadModels() {\n\t// Forest from Google Poly, https://poly.google.com/view/2_fv3tn3NG_\n\tconst { scene: trees } = await new Promise((resolve) =>\n\t\tloader.load(\"./assets/forest.glb\", resolve)\n\t);\n\tconst flotsam = trees.children[0];\n\tflotsam.position.y = 0;\n\tflotsam.material.side = BackSide;\n\tflotsam.material.transparent = true;\n\tflotsam.material.opacity = 0.5;\n\n\t// LilyPad by Poly by Google, https://poly.google.com/view/0-_GjMekeob\n\tconst { scene: lilyPad1 } = await new Promise((resolve) =>\n\t\tloader.load(\"./assets/LilyPad.glb\", resolve)\n\t);\n\n\tconst { scene: lilyPad2 } = await new Promise((resolve) =>\n\t\tloader.load(\"./assets/LilyPad2.glb\", resolve)\n\t);\n\n\t// Fish by RunemarkStudio, https://sketchfab.com/3d-models/koi-fish-8ffded4f28514e439ea0a26d28c1852a\n\tconst { scene: fish } = await new Promise((resolve) =>\n\t\tloader.load(\"./assets/fish.glb\", resolve)\n\t);\n\n\treturn {\n\t\tfish,\n\t\tlilyPad2,\n\t\tlilyPad1,\n\t\ttrees,\n\t\tflotsam\n\t};\n}\n\nexport const models = loadModels();","import { Vector3 } from 'three';\nimport { rafCallbacks, camera } from './scene.js';\n\n/* global ResonanceAudio */\n// Notes in the key of G\nconst fileNames = [\n\t\"assets/piano/piano_mf_4_G.mp3\",\n\t// \"assets/piano/piano_mf_5_Ab.mp3\",\n\t\"assets/piano/piano_mf_5_A.mp3\",\n\t// \"assets/piano/piano_mf_5_Bb.mp3\",\n\t\"assets/piano/piano_mf_5_B.mp3\",\n\t\"assets/piano/piano_mf_5_C.mp3\",\n\t// \"assets/piano/piano_mf_5_Db.mp3\",\n\t\"assets/piano/piano_mf_5_D.mp3\",\n\t// \"assets/piano/piano_mf_5_Eb.mp3\",\n\t\"assets/piano/piano_mf_5_E.mp3\",\n\t// \"assets/piano/piano_mf_5_F.mp3\",\n\t\"assets/piano/piano_mf_5_Gb.mp3\",\n\t\"assets/piano/piano_mf_5_G.mp3\",\n];\nconst notes = new Map();\n\nclass Note {\n\tconstructor(audioElement, source) {\n\t\tthis.audioElement = audioElement;\n\t\tthis.source = source;\n\t}\n\n\tsetLocationAndPlay(vector3) {\n\t\tthis.source.setPosition(vector3.x, vector3.y, vector3.z);\n\t\tthis.audioElement.play();\n\t}\n}\n\nlet hasInit = false;\n\nexport function init() {\n\tif (hasInit) return;\n\thasInit = true;\n\n\t// Create an AudioContext\n\tconst audioContext = new AudioContext();\n\tconst resonanceAudioScene = new ResonanceAudio(audioContext);\n\tresonanceAudioScene.output.connect(audioContext.destination);\n\n\t// Details: https://resonance-audio.github.io/resonance-audio/reference/web/Utils.html#.ROOM_MATERIAL_COEFFICIENTS\n\tconst roomDimensions = {\n\t\twidth: 30,\n\t\theight: 2.5,\n\t\tdepth: 30,\n\t};\n\tconst roomMaterials = {\n\t\tleft: \"transparent\",\n\t\tright: \"transparent\",\n\t\tfront: \"transparent\",\n\t\tback: \"transparent\",\n\t\tdown: \"water-or-ice-surface\",\n\t\tup: \"transparent\",\n\t};\n\tresonanceAudioScene.setRoomProperties(roomDimensions, roomMaterials);\n\n\tconst tempVector1 = new Vector3();\n\tconst tempUpVector = new Vector3();\n\trafCallbacks.add(function () {\n\t\ttempVector1.set(0, 0, -1);\n\t\ttempVector1.applyQuaternion(camera.quaternion);\n\t\ttempUpVector.set(0, 1, 0);\n\t\ttempUpVector.applyQuaternion(camera.quaternion);\n\t\tresonanceAudioScene.setListenerOrientation(\n\t\t\ttempVector1.x,\n\t\t\ttempVector1.y,\n\t\t\ttempVector1.z,\n\t\t\ttempUpVector.x,\n\t\t\ttempUpVector.y,\n\t\t\ttempUpVector.z\n\t\t);\n\t\tresonanceAudioScene.setListenerPosition(\n\t\t\tcamera.position.x,\n\t\t\tcamera.position.y,\n\t\t\tcamera.position.z\n\t\t);\n\t});\n\n\tfor (const filename of fileNames) {\n\t\tconst audioElement = document.createElement(\"audio\");\n\t\taudioElement.src = filename;\n\t\tconst audioElementSource = audioContext.createMediaElementSource(\n\t\t\taudioElement\n\t\t);\n\t\tconst source = resonanceAudioScene.createSource();\n\t\taudioElementSource.connect(source.input);\n\n\t\tconst note = new Note(audioElement, source);\n\t\tnotes.set(filename, note);\n\t}\n}\n\nexport function playRandomNote(positionRelativeToHead) {\n\tif (!hasInit) return;\n\tconst index = Math.floor(Math.random() * fileNames.length);\n\tconst note = notes.get(fileNames[index]);\n\tnote.setLocationAndPlay(positionRelativeToHead);\n}\n","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n","import { renderer, scene, camera, rafCallbacks, water } from \"./lib/scene.js\";\nimport \"./lib/controllers/controllers.js\"; // Adds locomotion\nimport { InstancedFlow } from \"./lib/flow.js\";\nimport { curves, lilyPad1, lilyPad2 } from \"./lib/positions.js\";\nimport { models } from \"./lib/meshes.js\";\nimport { init as audioInit, playRandomNote } from \"./lib/audio.js\";\n\nwindow.canaudio.checked = false;\nwindow.canaudio.addEventListener('change', function () {\n\tif (this.checked) {\n\t\taudioInit();\n\t\twindow.bgsound.play();\n\t} else {\n\t\twindow.bgsound.pause();\n\t}\n});\n\nimport {\n\tAdditiveBlending,\n\tVector3,\n\tCatmullRomCurve3,\n\tLineBasicMaterial,\n\tLineLoop,\n\tCircleGeometry,\n\tColor\n} from \"three\";\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\nconst stats = new Stats();\ndocument.body.appendChild( stats.dom );\n\n\nconst modelsPromise = (async function () {\n\n\tconst {\n\t\tfish: fishScene,\n\t\ttrees,\n\t\tflotsam,\n\t\tlilyPad1: lilyPad1Model,\n\t\tlilyPad2: lilyPad2Model\n\t} = await models;\n\n\tfor (const l of lilyPad1) {\n\t\tconst newPad = lilyPad1Model.clone();\n\t\tnewPad.position.copy(l);\n\t\tnewPad.position.y = 0;\n\t\tnewPad.rotation.y = Math.PI*2*Math.random();\n\t\tnewPad.scale.multiplyScalar(0.8 + 0.4 * Math.random());\n\t\twater.add(newPad);\n\t}\n\n\tfor (const l of lilyPad2) {\n\t\tconst newPad = lilyPad2Model.clone();\n\t\tnewPad.position.copy(l);\n\t\tnewPad.position.y = 0;\n\t\tnewPad.rotation.y = Math.PI*2*Math.random();\n\t\tnewPad.scale.multiplyScalar(0.8 + 0.4 * Math.random());\n\t\twater.add(newPad);\n\t}\n\n\twater.add(flotsam);\n\tscene.add(trees);\n\n\tclass Fishes extends InstancedFlow {\n\t\tconstructor(count, curveCount) {\n\t\t\tfishScene.children[0].geometry.scale(0.6, 0.6, 0.6);\n\t\t\tfishScene.children[0].geometry.rotateZ(Math.PI);\n\t\t\tfishScene.children[0].geometry.rotateY(-Math.PI / 2);\n\t\t\tsuper(count, curveCount, fishScene.children[0].geometry, fishScene.children[0].material);\n\t\t}\n\t}\n\treturn { Fishes };\n})();\n\n(async function generatePath() {\n\n\tconst { Fishes } = await modelsPromise;\n\tlet totalFishCount = 60;\n\tconst searchMatch = (window.location.search || \"\").match(/^\\?fish=(\\d+)/);\n\tif (searchMatch) {\n\t\ttotalFishCount = +searchMatch[1];\n\t}\n\tconst fishes = new Fishes(totalFishCount, curves.length); // 10 fish models, space for 2 curves\n\tscene.add(fishes.object3D);\n\twindow.fishes = fishes;\n\n\tfor (let i = 0; i < curves.length; i++) {\n\t\tconst curve = new CatmullRomCurve3(curves[i]);\n\t\tcurve.curveType = \"centripetal\";\n\t\tcurve.closed = true;\n\t\tfishes.updateCurve(i, curve);\n\t}\n\n\tconst totalCurveLength = fishes.curveLengthArray.reduce((a, b) => a + b, 0);\n\tconst noOfFishPersegment = fishes.curveLengthArray.map(length => Math.round(totalFishCount * length / totalCurveLength));\n\tconst noOfFish = noOfFishPersegment.slice(0);\n\tfor (let i=0; i<noOfFish.length; i++) {\n\t\tnoOfFish[i]+=(i===0?0:noOfFish[i-1])\n\t}\n\tfor (let i = 0; i < fishes.count; i++) {\n\t\tconst curveIndex = noOfFish.findIndex(n => i <= n);\n\t\tfishes.setCurve(i, curveIndex);\n\t\tfishes.moveIndividualAlongCurve(i, (i * 1) / noOfFishPersegment[curveIndex]);\n\t\tfishes.object3D.setColorAt(i, new Color(`hsl(${Math.floor(50 * Math.random())}, ${Math.floor(100 * Math.random())}%, ${Math.floor(20 + 80 * Math.random())}%)`));\n\t}\n\n\tconst speedPerTick = 0.009 / 10;\n\trafCallbacks.add(function () {\n\t\t// fishes.moveAlongCurve(speedPerTick);\n\t\tfor (let i = 0; i < fishes.count; i++) {\n\t\t\tfishes.moveIndividualAlongCurve(i, speedPerTick);\n\t\t}\n\t});\n\n\trafCallbacks.add(() => stats.update());\n})();\n\n(function rain() {\n\tconst rainRipples = [];\n\tconst unsedRainRipples = [];\n\tconst geometry = new CircleGeometry(1, 32);\n\tconst dripPos = new Vector3();\n\n\tgeometry.rotateX(-Math.PI / 2);\n\tgeometry.vertices.splice(0, 1);\n\n\tfor (let i = 0; i < 5*3; i++) {\n\t\tconst material = new LineBasicMaterial({\n\t\t\tcolor: 0x999999,\n\t\t\tblending: AdditiveBlending,\n\t\t});\n\t\tconst mesh = new LineLoop(geometry, material);\n\t\trainRipples.push(mesh);\n\t\tunsedRainRipples.push(mesh);\n\t}\n\n\t(function drip() {\n\t\tif (unsedRainRipples.length > 3) {\n\t\t\tconst ripplesToUse = unsedRainRipples.splice(0, 3);\n\t\t\tconst x = 20 * (Math.random() - 0.5);\n\t\t\tconst z = 20 * (Math.random() - 0.5);\n\n\t\t\tdripPos.set(x, water.position.y, z);\n\t\t\tif (window.canaudio.checked) playRandomNote(dripPos);\n\n\t\t\tfor (let ri = 1; ri <= 3; ri++) {\n\t\t\t\tconst ripple = ripplesToUse[ri - 1];\n\t\t\t\tripple.position.set(x, -0.1, z);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tripple.scale.multiplyScalar(0);\n\t\t\t\t\tripple.material.color.setHex(0xffffff);\n\t\t\t\t\twater.add(ripple);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\twater.remove(ripple);\n\t\t\t\t\t\tunsedRainRipples.push(ripple)\n\t\t\t\t\t}, 3000);\n\t\t\t\t}, ri * 800);\n\t\t\t}\n\t\t}\n\n\t\tsetTimeout(drip, Math.random() * 1000);\n\t}());\n\n\tconst rippleSpeed = new Vector3(1, 1, 1).multiplyScalar(0.018);\n\trafCallbacks.add(function () {\n\t\tfor (const r of rainRipples) {\n\t\t\tr.scale.add(rippleSpeed);\n\t\t\tconst col = (r.material.color.getHex() >> 16)*0.99;\n\t\t\tconst newCol = (col << 16) + (col << 8) + col;\n\t\t\tr.material.color.setHex(newCol);\n\t\t}\n\t});\n})();\n\nwindow.renderer = renderer;\nwindow.camera = camera;\nwindow.scene = scene;\n\nif (location.search === \"?editor\") {\n\timport(\"./lib/editor.js\");\n}"],"names":["OrbitControls","object","domElement","offset","quat","quatInverse","lastPosition","lastQuaternion","twoPI","undefined","console","warn","document","error","this","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","Quaternion","setFromUnitVectors","up","inverse","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","onKeyDown","type","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","v","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","pointerType","mouseAction","preventDefault","focus","window","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","addEventListener","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","onMouseUp","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","tabIndex","prototype","Object","create","EventDispatcher","constructor","MapControls","call","_global","global","self","PRIVATE","Symbol","EventTarget","[object Object]","listeners","Map","listener","Error","typedListeners","get","push","i","pop","queue","ARRAY_TYPE","Float32Array","Array","out","identity","invert","a","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b","b0","b1","b2","b3","fromRotationTranslation","q","z","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","getTranslation","mat","getRotation","trace","S","perspective","fovy","aspect","near","far","nf","f","create$1","clone$1","fromValues$1","copy$1","add$1","scale$1","normalize","len","cross","ax","ay","az","bx","by","bz","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","vec","create$3","create$4","multiply$4","aw","bw","slerp","t","omega","cosom","sinom","scale0","scale1","acos","sin","invert$2","a0","a1","a2","a3","dot$$1","invDot","clone$4","fromValues$4","copy$4","normalize$2","PRIVATE$1","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","create$2","XRRigidTransform$1","orientation","arguments","_getPoint","DOMPointReadOnly","fromPoint","arg","invMatrix","PRIVATE$2","XRSpace","specialType","inputSource","baseMatrix","inverseBaseMatrix","lastFrameId","_specialType","_inputSource","device","frameId","_onPoseUpdate","_baseMatrix","getBasePoseMatrix","_inverseBaseMatrix","space","PRIVATE$3","XRReferenceSpaceTypes","XRReferenceSpace","transform","includes","super","isFloor","originOffset","pose","transformMatrix","inverseOriginOffsetMatrix","_getSpaceRelativeTransform","_adjustForOriginOffset","XRRigidTransform","additionalOffset","newSpace","bounds","PRIVATE$4","XRSessionModes","DEFAULT_SESSION_OPTIONS","inline","requiredFeatures","optionalFeatures","immersive-vr","immersive-ar","now","startTime","Date","performance","now$1","PRIVATE$5","XRPose$1","emulatedPosition","PRIVATE$6","XRViewerPose","views","PRIVATE$7","XRViewport","width","height","XREyes","PRIVATE$8","XRView","eye","sessionId","temp","viewport","projectionMatrix","getProjectionMatrix","layer","getViewport","PRIVATE$9","NON_ACTIVE_MSG","NEXT_FRAME_ID","XRFrame","session","id","active","animationFrame","referenceSpace","DOMException","PRIVATE$15","viewerSpace","_ensurePoseUpdated","viewerTransform","viewSpace","viewSpaces","viewTransform","view","baseSpace","getInputPose","XRPose","PRIVATE$10","XRRenderStateInit","freeze","depthNear","depthFar","inlineVerticalFieldOfView","baseLayer","XRRenderState","stateInit","config","assign","POLYFILLED_XR_COMPATIBLE","XR_COMPATIBLE","PRIVATE$11","XRWebGLLayerInit","antialias","depth","stencil","alpha","multiview","ignoreDepthValues","framebufferScaleFactor","PRIVATE$12","XRInputSourceEvent","Event","eventInitDict","frame","setPrototypeOf","PRIVATE$13","XRSessionEvent","PRIVATE$14","XRInputSourcesChangeEvent","added","removed","XRViewSpace","getBaseViewMatrix","XRSession$1","mode","immersive","initialRenderState","ended","suspended","frameCallbacks","currentFrameCallbacks","frameHandle","deviceFrameHandle","activeRenderState","pendingRenderState","currentInputSources","onDeviceFrame","startDeviceFrameLoop","onBaseLayerSet","callbacks","onFrameStart","_checkInputSourcesChange","rightNow","cancelled","callback","err","onFrameEnd","requestAnimationFrame","stopDeviceFrameLoop","handle","cancelAnimationFrame","onPresentationEnd","onPresentationStart","onSelectStart","onSelectEnd","evt","dispatchInputSourceEvent","onSqueezeStart","onSqueezeEnd","onblur","onfocus","onresetpose","onend","onselect","onselectstart","onselectend","renderState","environmentBlendMode","TypeError","doesSessionSupportReferenceSpace","requestFrameOfReferenceTransform","requestStageBounds","index","findIndex","d","splice","inputSources","getInputSources","endSession","newState","_session","newInputSources","oldInputSources","newInputSource","oldInputSource","PRIVATE$16","XRInputSource","impl","gripSpace","targetRaySpace","handedness","targetRayMode","profiles","gamepad","PRIVATE$17","XRReferenceSpaceEvent","API","XRSystem","devicePromise","immersiveSession","inlineSessions","Set","then","Promise","resolve","isSessionSupported","options","defaultOptions","concat","enabledFeatures","requirementsFailed","feature","isFeatureSupported","log","requestSession","XRSession","onSessionEnd","delete","XRWebGLLayer","context","layerInit","framebuffer","getParameter","FRAMEBUFFER_BINDING","framebufferWidth","drawingBufferWidth","framebufferHeight","drawingBufferHeight","_getViewport","polyfillMakeXRCompatible","Context","makeXRCompatible","polyfillGetContext","Canvas","getContext","contextType","glAttribs","ctx","xrCompatible","commonjsGlobal","module","cardboardVrDisplay","exports","observedWarnings","match","value","classCallCheck","instance","Constructor","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","key","protoProps","staticProps","slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","iterator","next","done","isArray","MIN_TIMESTEP","MAX_TIMESTEP","dataUri","mimeType","svg","encodeURIComponent","lerp","isIOS","test","navigator","platform","isWebViewAndroid","userAgent","indexOf","isSafari","isFirefoxAndroid","getChromeVersion","parseInt","isSafariWithoutDeviceMotion","isChromeWithoutDeviceMotion","_match$1$split","split","_match$1$split2","branch","build","isR7","isLandscapeMode","rtn","isTimestampDeltaValid","timestampDeltaS","isNaN","getScreenWidth","screen","devicePixelRatio","getScreenHeight","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","getFullscreenElement","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","linkProgram","gl","vertexSource","fragmentSource","attribLocationMap","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","program","createProgram","attribName","attachShader","bindAttribLocation","deleteShader","getProgramUniforms","uniforms","uniformCount","getProgramParameter","ACTIVE_UNIFORMS","uniformName","getActiveUniform","name","replace","getUniformLocation","orthoMatrix","lr","bt","isMobile","check","vendor","opera","substr","extend","dest","src","hasOwnProperty","safariCssSizeWorkaround","canvas","style","setTimeout","frameDataFromPose","piOver180","rad45","mat4_perspectiveFromFieldOfView","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","mat4_fromRotationTranslation","mat4_translate","mat4_invert","defaultOrientation","defaultPosition","updateEyeMatrices","projection","vrDisplay","frameData","timestamp","leftProjectionMatrix","leftViewMatrix","_getFieldOfView","_getEyeOffset","rightProjectionMatrix","rightViewMatrix","isInsideCrossOriginIFrame","isFramed","refOrigin","getOriginFromUrl","referrer","thisOrigin","location","href","url","domainIdx","protoSepIdx","domainEndIdx","substring","getQuaternionAngle","warnOnce","message","deprecateWarning","deprecated","suggested","WGLUPreserveGLState","bindings","boundValues","activeTexture","binding","TEXTURE_BINDING_2D","TEXTURE_BINDING_CUBE_MAP","textureUnit","TEXTURE0","TEXTURE31","ACTIVE_TEXTURE","boundValue","ARRAY_BUFFER_BINDING","bindBuffer","ARRAY_BUFFER","COLOR_CLEAR_VALUE","clearColor","COLOR_WRITEMASK","colorMask","CURRENT_PROGRAM","useProgram","ELEMENT_ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER","bindFramebuffer","FRAMEBUFFER","RENDERBUFFER_BINDING","bindRenderbuffer","RENDERBUFFER","bindTexture","TEXTURE_2D","TEXTURE_CUBE_MAP","VIEWPORT","BLEND","CULL_FACE","DEPTH_TEST","SCISSOR_TEST","STENCIL_TEST","enable","disable","toString","glPreserveState","distortionVS","join","distortionFS","CardboardDistorter","cardboardUI","bufferScale","dirtySubmitFrameBindings","ctxAttribs","getContextAttributes","instanceExt","getExtension","meshWidth","meshHeight","bufferWidth","bufferHeight","realBindFramebuffer","realEnable","realDisable","realColorMask","realClearColor","realViewport","realCanvasWidth","getOwnPropertyDescriptor","__proto__","realCanvasHeight","isPatched","lastBoundFramebuffer","cullFace","depthTest","blend","scissorTest","stencilTest","attribs","texCoord","viewportOffsetScale","setTextureBounds","vertexBuffer","createBuffer","indexBuffer","indexCount","renderTarget","createTexture","createFramebuffer","depthStencilBuffer","depthBuffer","stencilBuffer","createRenderbuffer","patch","onResize","destroy","unpatch","deleteProgram","deleteBuffer","deleteTexture","deleteFramebuffer","deleteRenderbuffer","glState","clear","COLOR_BUFFER_BIT","texImage2D","RGBA","RGB","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","COLOR_ATTACHMENT0","renderbufferStorage","DEPTH_STENCIL","framebufferRenderbuffer","DEPTH_STENCIL_ATTACHMENT","DEPTH_COMPONENT16","DEPTH_ATTACHMENT","STENCIL_INDEX8","STENCIL_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","apply","pname","r","g","h","leftBounds","rightBounds","submitFrame","positionDivisor","texCoordDivisor","getVertexAttrib","VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE","enableVertexAttribArray","vertexAttribPointer","FLOAT","vertexAttribDivisorANGLE","uniform1i","diffuse","uniform4fv","drawElements","TRIANGLES","UNSIGNED_SHORT","renderNoState","preserveDrawingBuffer","updateDeviceInfo","deviceInfo","vertices","computeMeshVertices_","bufferData","STATIC_DRAW","indices","computeMeshIndices_","lensFrustum","getLeftEyeVisibleTanAngles","noLensFrustum","getLeftEyeNoLensTanAngles","getLeftEyeVisibleScreenRect","vidx","e","j","u","s","distortion","distortInverse","Uint16Array","halfwidth","halfheight","iidx","getOwnPropertyDescriptor_","proto","attrName","getAttribute","val","setAttribute","uiVS","uiFS","DEG2RAD","kAnglePerGearSection","kOuterRimEndAngle","kInnerRimBeginAngle","kOuterRadius","kMiddleRadius","kInnerRadius","kCenterLineThicknessDp","kButtonWidthDp","kTouchSlopFactor","CardboardUI","gearOffset","gearVertexCount","arrowOffset","arrowVertexCount","projMat","Distortion","coefficients","listen","optionsCallback","backCallback","midline","buttonSize","physicalPixels","dps","lineWidth","buttonScale","buttonBorder","addGearSegment","cos","segmentTheta","addArrowVertex","angledLineWidth","render","uniform4f","color","uniformMatrix4fv","projectionMat","drawArrays","TRIANGLE_STRIP","r0","r1","dr0","distort","abs","dr1","r2","ret","degToRad","radToDeg","scalar","invScalar","ix","iy","iz","iw","v1","Device","params","widthMeters","heightMeters","bevelMeters","setFromEulerXYZ","c1","c2","c3","s1","s2","s3","setFromEulerYXZ","setFromAxisAngle","axis","halfAngle","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","l","qb","cosHalfTheta","halfTheta","sinHalfTheta","ratioA","ratioB","vFrom","vTo","DEFAULT_ANDROID","DEFAULT_IOS","Viewers","CardboardV1","CardboardViewer","label","interLensDistance","baselineLensDistance","screenLensDistance","distortionCoefficients","inverseCoefficients","CardboardV2","DeviceInfo","deviceParams","additionalViewers","viewer","updateDeviceParams","determineDevice_","getDevice","setViewer","METERS_PER_INCH","metersPerPixelX","xdpi","metersPerPixelY","ydpi","bevelMm","getDistortedFieldOfViewLeftEye","eyeToScreenDistance","outerDist","innerDist","bottomDist","topDist","outerAngle","atan","innerAngle","bottomAngle","topAngle","fovLeft","fovTop","fovRight","fovBottom","halfWidth","halfHeight","verticalLensOffset","centerX","centerY","centerZ","screenLeft","screenTop","screenRight","screenBottom","result","undistortedFrustum","dist","eyeX","eyeY","getFieldOfViewLeftEye","opt_isUndistorted","getUndistortedFieldOfViewLeftEye","getFieldOfViewRightEye","p","getUndistortedParams_","getUndistortedViewportLeftEye","screenWidth","screenHeight","xPxPerTanAngle","yPxPerTanAngle","round","eyePosX","eyePosY","halfLensDistance","maxFov","viewerMax","DPDB_CACHE","format","last_updated","devices","rules","mdmh","ua","dpi","ac","res","Dpdb","onDeviceParamsUpdated","dpdb","recalculateDeviceParams_","xhr","XMLHttpRequest","obj","open","loading","status","JSON","parse","response","send","DeviceParams","SensorSample","sample","timestampS","ComplementaryFilter","kFilter","isDebug","currentAccelMeasurement","currentGyroMeasurement","previousGyroMeasurement","filterQ","previousFilterQ","accelQ","isOrientationInitialized","estimatedGravity","measuredGravity","gyroIntegralQ","PosePredictor","predictionTimeS","previousQ","previousTimestampS","deltaQ","outQ","FusionPoseSensor","predictionTime","yawOnly","accelerometer","gyroscope","filter","posePredictor","chromeVersion","isDeviceMotionInRadians","isWithoutDeviceMotion","filterToWorldQ","inverseWorldToScreenQ","worldToScreenQ","originalPoseAdjustQ","setScreenTransform_","resetQ","orientationOut_","start","getDeviceParams","newDeviceParams","calcDeviceParams_","db","matched","rule","ruleMatches_","resX","resY","sensorSample","addAccelMeasurement","vector","addGyroMeasurement","deltaT","run_","accelToQuaternion_","gyroDeltaQ","gyroToQuaternionDelta_","invFilterQ","toFixed","targetQ","getOrientation","accel","normAccel","gyro","dt","getPrediction","currentQ","angularSpeed","predictAngle","getPosition","_deviceOrientationQ","deviceOrientationFixQ","deviceOrientationFilterToWorldQ","filterOrientation","resetPose","onDeviceOrientation_","beta","gamma","onDeviceMotion_","deviceMotion","updateDeviceMotion_","accGravity","accelerationIncludingGravity","rotRate","rotationRate","timeStamp","deltaS","onOrientationChange_","screenOrientation","onMessage_","data","toLowerCase","deviceMotionEvent","onDeviceMotionCallback_","bind","onOrientationChangeCallback_","onMessageCallback_","onDeviceOrientationCallback_","stop","SENSOR_FREQUENCY","X_AXIS","Z_AXIS","SENSOR_TO_VR","PoseSensor","sensor","fusionSensor","_out","api","errors","_sensorQ","_outQ","_onSensorRead","_onSensorError","init","RelativeOrientationSensor","frequency","referenceFrame","useDeviceMotion","K_FILTER","PREDICTION_TIME_S","YAW_ONLY","DEBUG","rotateInstructionsAsset","RotateInstructions","loadIcon_","overlay","createElement","backgroundColor","fontFamily","zIndex","img","icon","marginLeft","marginTop","appendChild","text","textAlign","fontSize","lineHeight","margin","innerHTML","snackbar","padding","boxSizing","snackbarText","float","snackbarButton","fontWeight","textTransform","borderLeft","paddingLeft","textDecoration","hide","show","parent","parentElement","removeChild","body","display","querySelector","showTemporarily","ms","timer","disableShowTemporarily","clearTimeout","DEFAULT_VIEWER","VIEWER_KEY","CLASS_NAME","ViewerSelector","defaultViewer","selectedKey","localStorage","getItem","dialog","createDialog_","root","onChangeCallbacks_","unwrapExports$$1","__esModule","createCommonjsModule$$1","fn","checked","contains","getCurrentViewer","getSelectedKey_","input","onChange","cb","fireOnChange_","onSave_","setItem","container","classList","background","overflow","boxShadow","createH1_","createChoice_","createButton_","h1","marginBottom","div","onclick","letterSpacing","border","NoSleep$1","factory","commonjsGlobal$$1","modules","installedModules","__webpack_require__","moduleId","m","c","getter","o","n","property","_createClass","_classCallCheck","mediaFile","oldIOS","parseFloat","exec","MSStream","NoSleep","noSleepTimer","noSleepVideo","currentTime","random","setInterval","play","clearInterval","pause","nextDisplayId","defaultLeftBounds","defaultRightBounds","raf","caf","VRFrameData","VRDisplayCapabilities","hasPosition","hasExternalDisplay","canPresent","maxLayers","hasOrientation","VRDisplay","USE_WAKELOCK","wakelock","isPolyfilled","displayId","displayName","isPresenting","capabilities","stageParameters","waitingForPresent_","layer_","originalParent_","fullscreenElement_","fullscreenWrapper_","fullscreenElementCachedStyle_","fullscreenEventTarget_","fullscreenChangeHandler_","fullscreenErrorHandler_","wakelock_","getFrameData","_getPose","getPose","_resetPose","getImmediatePose","wrapForFullscreen","cssProperties","insertBefore","firstChild","applyFullscreenElementStyle","removeFullscreenWrapper","removeAttribute","requestPresent","layers","wasPresenting","reject","incomingLayer","source","updatePresent_","predistorted","slice","onFullscreenChange","actualFullscreenElement","lock","catch","beginPresent_","unlock","disableWakeLock","endPresent_","removeFullscreenListeners_","fireVRDisplayPresentChange_","onFullscreenError","addFullscreenListeners_","enableWakeLock","exitPresent","getLayers","CustomEvent","detail","fireVRDisplayConnect_","changeHandler","errorHandler","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","getEyeParameters","whichEye","ADDITIONAL_VIEWERS","MOBILE_WAKE_LOCK","DPDB_URL","CARDBOARD_UI_DISABLED","ROTATE_INSTRUCTIONS_DISABLED","BUFFER_SCALE","DIRTY_SUBMIT_FRAME_BINDINGS","Eye","CardboardVRDisplay","config$$1","defaults","bufferScale_","poseSensor_","distorter_","cardboardUI_","dpdb_","onDeviceParamsUpdated_","deviceInfo_","viewerSelector_","onViewerChanged_","rotateInstructions_","onResize_","linearVelocity","linearAcceleration","angularVelocity","angularAcceleration","fieldOfView","eyeParams","renderWidth","renderHeight","newParams","updateBounds_","orientationHandler","vrdisplaypresentchangeHandler","fireVRDisplayDeviceParamsChange_","lastWidth","lastHeight","vrdisplay","XRDevice","onWindowResize","featureDescriptor","coordinateSystem","poseType","oculusGo","mapping","buttons","0","1","2","gripTransform","oculusTouch","displayProfiles","Oculus Quest","axes","3","4","5","6","openVr","HTC Vive","HTC Vive DVT","Valve Index","targetRayTransform","userAgentOverrides","Firefox","samsungGearVR","samsungOdyssey","windowsMixedReality","GamepadMappings","Daydream Controller","Gear VR Controller","HTC Vive Focus Controller","Oculus Go Controller","Oculus Touch (Right)","Oculus Touch (Left)","OpenVR Gamepad","Spatial Controller (Spatial Interaction Source) 045E-065A","Spatial Controller (Spatial Interaction Source) 045E-065D","Windows Mixed Reality (Right)","Windows Mixed Reality (Left)","HEAD_ELBOW_OFFSET_RIGHTHANDED","HEAD_ELBOW_OFFSET_LEFTHANDED","ELBOW_WRIST_OFFSET","WRIST_CONTROLLER_OFFSET","ARM_EXTENSION_OFFSET","RAD_TO_DEG","OrientationArmModel","hand","headElbowOffset","controllerQ","lastControllerQ","headQ","headPos","elbowPos","wristPos","time","lastTime","rootQ","controllerOrientation","headPoseMatrix","headYawQ","getHeadYawOrientation_","angleDelta","quatAngle_","controllerForward","controllerDotY","extensionRatio","clamp_","controllerCameraQ","elbowOffset","totalAngleDeg","lerpValue","wristQ","invWristQ","elbowQ","headEuler","order","clamp","min$$1","max$$1","sqx","sqy","sqz","sqw","atan2","asin","eulerFromQuaternion","halfToRad","sx","cx","sy","cy","sz","cz","fromEuler","q1","q2","vec1","vec2","tempA","tempB","cosine","PRIVATE$18","PLACEHOLDER_BUTTON","pressed","touched","XRRemappedGamepad","map","agent","override","_update","_profiles","connected","hapticActuators","GamepadXRInputSource","polyfill","primaryButtonIndex","primarySqueezeButtonIndex","nativeGamepad","basePoseMatrix","outputMatrix","primaryActionPressed","primarySqueezeActionPressed","armModel","setHandedness","updateBasePoseMatrix","_transformBasePoseMatrix","EXTRA_PRESENTATION_ATTRIBUTES","highRefreshRate","PRIMARY_BUTTON_MAP","oculus","openvr","spatial controller (spatial interaction source)","SESSION_ID","Session","polyfillOptions","outputContext","modifiedCanvasLayer","renderContextType","renderContext","WebVRDevice","sessions","baseModelMatrix","gamepadInputSources","tempVec3","onVRDisplayPresentChange","CAN_USE_GAMEPAD","HAS_BITMAP_SUPPORT","ImageBitmapRenderingContext","createImageBitmap","isImageBitmapSupported","attributes","applyCanvasStylesForMinimalRendering","primaryButton","prevInputSources","gamepads","getGamepads","inputSourceImpl","getPrimaryButtonIndex","updateFromGamepad","mirroring","iCanvas","iWidth","iHeight","oCanvas","oWidth","oHeight","transferToImageBitmap","transferFromImageBitmap","resizeWidth","resizeHeight","bitmap","drawImage","has","sizeX","sizeZ","sittingToStandingTransform","getXRPose","forEach","CardboardXRDevice","cardboardConfig","SESSION_ID$1","Session$1","InlineDevice","identityMatrix","requestXRDevice","async","webvr","xr","displays","getVRDisplays","getWebVRDevice","mobile","cardboard","allowCardboardOnDesktop","CONFIG_DEFAULTS","partials","extendStatics","NOW$1","process","hrtime","getTime","Group","_tweens","_tweensAddedDuringUpdate","getAll","_this","tweenId","removeAll","tween","getId","remove","preserve","tweenIds","Easing","Linear","None","amount","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce","Interpolation","k","floor","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","t2","Sequence","nextId","_nextId","Tween","_object","_group","TWEEN","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_id","_isChainStopped","isPlaying","isPaused","to","properties","duration","prop","_swapEndStartRepeatValues","_setupProperties","startValue","startValueIsArray","propType","isInterpolationList","endValues","_handleRelativeValue","reverse","stopChainedTweens","_onStopCallback","end","resume","numChainedTweens","group","delay","repeat","times","repeatDelay","_repeatDelayTime","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","tweens","onStart","_onStartCallback","onUpdate","_onUpdateCallback","onRepeat","_onRepeatCallback","onComplete","_onCompleteCallback","onStop","elapsed","_updateProperties","startIsArray","endIsArray","charAt","tmp","__extends","__","_super","Main","version","cameraGroup","renderer","WebGLRenderer","logarithmicDepthBuffer","setPixelRatio","scene","Scene","camera","PerspectiveCamera","controls","innerWidth","innerHeight","setSize","light","DirectionalLight","intensity","Mesh","SphereGeometry","sceneRadius","MeshBasicMaterial","light2","AmbientLight","skygeometry","skymaterial","side","BackSide","depthWrite","onBeforeCompile","shader","dithering","skysphere","floorTexture","TextureLoader","load","wrapS","wrapT","RepeatWrapping","PlaneGeometry","MeshLambertMaterial","rotation","waterTexture","water","MeshPhongMaterial","normalMap","shininess","transparent","opacity","geometry","rotateX","nativeWebXR","injected","_injectCompatibilityShims","_injectPolyfill","every","iface","className","WebGLRenderingContext","HTMLCanvasElement","OffscreenCanvas","WebGL2RenderingContext","isSecureContext","_patchNavigatorXR","originalSupportsSession","supportsSession","vrbutton","showWebXRNotFound","cursor","onmouseenter","onmouseleave","textContent","stylizeElement","borderRadius","font","outline","supported","currentSession","onSessionStarted","onSessionEnded","setSession","sessionInit","showEnterVR","createButton","canaudio","click","rafCallbacks","material","normalScale","setAnimationLoop","GLTFLoader","manager","Loader","dracoLoader","ddsLoader","ktx2Loader","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFMaterialsTransmissionExtension","GLTFLightsExtension","GLTFRegistry","objects","onLoad","onProgress","onError","resourcePath","path","LoaderUtils","extractUrlBase","itemStart","_onError","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","unregister","content","extensions","plugins","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","asset","GLTFParser","crossOrigin","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_TRANSMISSION","KHR_TEXTURE_BASISU","cache","refs","uses","_markDefs","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightNode","lightDef","lights","Color","fromArray","range","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","penumbra","decay","createUniqueName","createNodeAttachment","_getNodeRef","getMaterialType","extendParams","materialParams","materialDef","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","array","baseColorTexture","assignTexture","all","materialIndex","materials","MeshPhysicalMaterial","extendMaterialParams","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","transmissionFactor","transmission","transmissionTexture","loadTexture","textureIndex","textureDef","textures","images","loadTextureImage","BINARY_EXTENSION_CHUNK_TYPES","headerView","DataView","header","magic","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","preload","GLTFMeshStandardSGMaterial","MeshStandardMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","specular","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","setValues","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","fog","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMapType","TangentSpaceNormalMap","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","getDependency","decodeDracoFile","attribute","extendTexture","texture","copySampleValue_","values","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t1","stride","stride2","stride3","td","pp","ppp","offset1","offset0","s0","m0","m1","WEBGL_CONSTANTS","5120","Int8Array","5121","5122","Int16Array","5123","5125","Uint32Array","5126","WEBGL_FILTERS","9728","NearestFilter","9729","LinearFilter","9984","NearestMipmapNearestFilter","9985","LinearMipmapNearestFilter","9986","NearestMipmapLinearFilter","9987","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","resolveURL","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","mesh","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","createAttributesKey","attributesKey","sort","associations","primitiveCache","meshCache","cameraCache","lightCache","nodeNamesUsed","textureLoader","ImageBitmapLoader","setCrossOrigin","addPrimitiveAttributes","primitiveDef","assignAttributeAccessor","accessorIndex","accessor","gltfAttributeName","setIndex","box","Box3","targets","maxDisplacement","setX","setY","setZ","expandByVector","boundingBox","sphere","Sphere","getCenter","center","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","normal","morphPositions","morphNormals","morphAttributes","morphTargetsRelative","addMorphTargets","toTrianglesDrawMode","drawMode","getIndex","count","numberOfTriangles","newIndices","TriangleFanDrawMode","getX","newGeometry","_invokeAll","ext","getDependencies","dependencies","scenes","animations","cameras","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","ref","_invokeOne","func","unshift","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","uri","bufferViewDef","bufferViews","buffer","sparse","pendingBufferViews","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibSlice","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","BufferAttribute","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setW","textureExtensions","getHandler","URL","webkitURL","sourceURI","isObjectURL","hasAlpha","colorType","getUint8","blob","Blob","createObjectURL","isImageBitmapLoader","imageBitmap","CanvasTexture","revokeObjectURL","flipY","RGBFormat","sampler","samplers","magFilter","minFilter","mapName","mapDef","gltfReference","assignFinalMaterial","useVertexTangents","tangent","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","skinning","vertexTangents","vertexColors","flatShading","morphTargets","uv2","uv","materialType","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","DoubleSide","alphaMode","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","sRGBEncoding","originalName","PropertyBinding","sanitizeNodeName","loadGeometries","primitives","createDracoPrimitive","dracoExtension","geometryPromise","cached","promise","BufferGeometry","meshIndex","FrontSide","results","geometries","SkinnedMesh","skinWeight","normalizeSkinWeights","TriangleStripDrawMode","LineSegments","Line","LineLoop","Points","cameraIndex","cameraDef","MathUtils","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","updateMatrix","matrixAutoUpdate","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","traverse","isMesh","outputArray","scaled","jl","track","createInterpolant","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","nodeName","Bone","Object3D","Matrix4","applyMatrix4","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","Skeleton","matrixWorld","children","child","sceneIndex","sceneDef","nodeIds","Constants","Handedness","ComponentState","DEFAULT","TOUCHED","PRESSED","ComponentProperty","BUTTON","Y_AXIS","ComponentType","TRIGGER","SQUEEZE","TOUCHPAD","THUMBSTICK","ButtonTouchThreshold","AxisTouchThreshold","VisualResponseProperty","TRANSFORM","VISIBILITY","fetchJsonFile","fetch","ok","statusText","fetchProfile","xrInputSource","basePath","defaultProfile","getAssetPath","supportedProfilesList","fetchProfilesList","some","profileId","supportedProfile","profilePath","profile","assetPath","layout","layouts","defaultComponentValues","xAxis","yAxis","VisualResponse","visualResponseDescription","componentProperty","states","valueNodeName","valueNodeProperty","minNodeName","maxNodeName","updateFromComponent","normalizedXAxis","normalizedYAxis","normalizeAxes","Component","componentId","componentDescription","visualResponses","gamepadIndices","rootNodeName","touchPointNodeName","responseName","visualResponse","gamepadButton","MotionController","assetUrl","layoutDescription","components","component","XRControllerModel","motionController","addAssetSceneToControllerModel","controllerModel","MotionControllerConstants","touchPointNode","getObjectByName","sphereGeometry","SphereBufferGeometry","minNode","maxNode","valueNode","findNodes","setEnvironmentMap","updateMatrixWorld","force","visible","lerpVectors","XRControllerModelFactory","gltfLoader","_assetCache","createControllerModel","controller","cachedAsset","prevGamePads","specificEvent","generalDetail","generalEvent","getSession","getController","old","blinkerSphereGeometry","translate","blinkerSphereMaterial","blinkerSphere","positionAtT","inVec","renderOrder","tempVec","tempVec1","tempVecP","tempVecV","lineGeometry","lineGeometryVertices","fill","lineGeometryColors","blending","AdditiveBlending","guideline","guidelight","guidespriteTexture","guidesprite","controller1","guidingController","controller2","controllerModelFactory","controllerGrip1","getControllerGrip","model1","controllerGrip2","model2","feetPos","getCamera","getWorldPosition","getWorldDirection","locomotion","handleMove","handleUp","handleUpEnd","vertex","worldToLocal","toArray","setTextureValue","image","BITS","getUniforms","splineTexture","spineTexture","pathOffset","pathSegment","spineOffset","spineLength","flow","curveData","lilyPad1Data","lilyPad2Data","curves","curve","lilyPad1","lilyPad2","models","trees","flotsam","fish","loadModels","fileNames","notes","Note","audioElement","vector3","setPosition","hasInit","Stats","addPanel","panel","dom","showPanel","cssText","beginTime","prevTime","frames","fpsPanel","Panel","msPanel","memory","memPanel","REVISION","begin","usedJSHeapSize","jsHeapSizeLimit","setMode","fg","bg","PR","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","textBaseline","fillStyle","fillRect","fillText","globalAlpha","maxValue","audioContext","AudioContext","resonanceAudioScene","ResonanceAudio","connect","destination","setRoomProperties","front","back","down","tempVector1","tempUpVector","setListenerOrientation","setListenerPosition","filename","audioElementSource","createMediaElementSource","createSource","note","audioInit","bgsound","stats","modelsPromise","fishScene","lilyPad1Model","lilyPad2Model","newPad","Fishes","numberOfCurves","obj3D","splineTexure","dataArray","TEXTURE_WIDTH","dataTexture","DataTexture","FloatType","wrapY","initSplineTexture","InstancedMesh","__ok","__modified","modifyShader","curveArray","curveLengthArray","currentCurveCount","object3D","curveLength","getLength","splineCurve","numberOfPoints","arcLengthDivisions","updateArcLengths","points","getSpacedPoints","frenetFrames","computeFrenetFrames","rowOffset","rowIndex","pt","tangents","normals","binormals","updateSplineTexture","curveCount","instanceMatrix","setUsage","DynamicDrawUsage","offsets","whichCurve","makeTranslation","setMatrixAt","writeChanges","curveNo","rotateZ","rotateY","totalFishCount","searchMatch","search","fishes","CatmullRomCurve3","curveType","closed","updateCurve","totalCurveLength","reduce","noOfFishPersegment","noOfFish","curveIndex","setCurve","moveIndividualAlongCurve","setColorAt","rainRipples","unsedRainRipples","CircleGeometry","dripPos","drip","ripplesToUse","positionRelativeToHead","setLocationAndPlay","playRandomNote","ri","ripple","rippleSpeed","col","getHex","newCol","import"],"mappings":"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"}